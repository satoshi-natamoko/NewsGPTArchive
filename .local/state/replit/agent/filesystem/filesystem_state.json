{"file_contents":{"server/db.ts":{"content":"// Reference: javascript_database blueprint\nimport { Pool, neonConfig } from '@neondatabase/serverless';\nimport { drizzle } from 'drizzle-orm/neon-serverless';\nimport ws from \"ws\";\nimport * as schema from \"@shared/schema\";\n\nneonConfig.webSocketConstructor = ws;\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nexport const pool = new Pool({ connectionString: process.env.DATABASE_URL });\nexport const db = drizzle({ client: pool, schema });\n","size_bytes":527},"client/src/components/article-list.tsx":{"content":"import { useState } from \"react\";\nimport { CategoryWithArticles, ArticleWithMetadata } from \"@shared/schema\";\nimport { ArticleCard } from \"@/components/article-card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Loader2, FileX, Trash2 } from \"lucide-react\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { ConfirmDialog } from \"@/components/confirm-dialog\";\n\ninterface ArticleListProps {\n  categories: CategoryWithArticles[];\n  isLoading: boolean;\n  deleteMode: boolean;\n}\n\nexport function ArticleList({\n  categories,\n  isLoading,\n  deleteMode,\n}: ArticleListProps) {\n  const [selectedArticles, setSelectedArticles] = useState<Set<string>>(\n    new Set()\n  );\n  const [showConfirmDelete, setShowConfirmDelete] = useState(false);\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const deleteArticlesMutation = useMutation({\n    mutationFn: async (articleIds: string[]) => {\n      return await apiRequest(\"DELETE\", \"/api/articles/bulk\", { articleIds });\n    },\n    onSuccess: () => {\n      toast({\n        title: \"기사 삭제 완료\",\n        description: `${selectedArticles.size}개의 기사가 삭제되었습니다.`,\n      });\n      setSelectedArticles(new Set());\n      queryClient.invalidateQueries({ queryKey: [\"/api/articles\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/articles/dates\"] });\n      setShowConfirmDelete(false);\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"삭제 실패\",\n        description: error.message || \"기사 삭제 중 오류가 발생했습니다.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleToggleArticle = (articleId: string) => {\n    const newSelected = new Set(selectedArticles);\n    if (newSelected.has(articleId)) {\n      newSelected.delete(articleId);\n    } else {\n      newSelected.add(articleId);\n    }\n    setSelectedArticles(newSelected);\n  };\n\n  const handleDeleteSelected = () => {\n    if (selectedArticles.size === 0) {\n      toast({\n        title: \"선택된 기사 없음\",\n        description: \"삭제할 기사를 먼저 선택하세요.\",\n      });\n      return;\n    }\n    setShowConfirmDelete(true);\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center py-16\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n      </div>\n    );\n  }\n\n  if (categories.length === 0) {\n    return (\n      <div className=\"flex flex-col items-center justify-center py-16 text-center\">\n        <FileX className=\"h-16 w-16 text-muted-foreground mb-4\" />\n        <h3 className=\"text-lg font-medium mb-2\" data-testid=\"text-no-articles\">\n          아직 크롤링된 기사가 없습니다\n        </h3>\n        <p className=\"text-sm text-muted-foreground\">\n          관리 메뉴에서 크롤링을 시작하세요\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Delete Mode Actions */}\n      {deleteMode && (\n        <div className=\"flex items-center justify-between bg-card border border-card-border rounded-md p-4\">\n          <div className=\"text-sm text-muted-foreground\">\n            {selectedArticles.size}개 선택됨\n          </div>\n          <Button\n            variant=\"destructive\"\n            size=\"sm\"\n            onClick={handleDeleteSelected}\n            disabled={\n              selectedArticles.size === 0 || deleteArticlesMutation.isPending\n            }\n            data-testid=\"button-delete-selected\"\n          >\n            {deleteArticlesMutation.isPending ? (\n              <Loader2 className=\"h-4 w-4 animate-spin mr-2\" />\n            ) : (\n              <Trash2 className=\"h-4 w-4 mr-2\" />\n            )}\n            선택 삭제\n          </Button>\n        </div>\n      )}\n\n      {/* Category Sections */}\n      {categories.map((category) => (\n        <section key={category.id} className=\"space-y-4\">\n          {/* Category Header */}\n          <div className=\"flex items-center gap-4\">\n            <h2\n              className=\"text-lg font-medium\"\n              data-testid={`text-category-${category.name}`}\n            >\n              {category.name}\n            </h2>\n            <div className=\"h-px flex-1 bg-border\" />\n          </div>\n\n          {/* Articles */}\n          {category.articles.length === 0 ? (\n            <p className=\"text-sm text-muted-foreground py-4\">\n              최근 3일 기사 없음\n            </p>\n          ) : (\n            <div className=\"space-y-0\">\n              {category.articles.map((article, index) => (\n                <ArticleCard\n                  key={article.id}\n                  article={article}\n                  deleteMode={deleteMode}\n                  isSelected={selectedArticles.has(article.id)}\n                  onToggleSelect={() => handleToggleArticle(article.id)}\n                  showBorder={index < category.articles.length - 1}\n                />\n              ))}\n            </div>\n          )}\n        </section>\n      ))}\n\n      {/* Confirm Delete Dialog */}\n      <ConfirmDialog\n        open={showConfirmDelete}\n        onOpenChange={setShowConfirmDelete}\n        title=\"기사 삭제\"\n        description={`선택한 ${selectedArticles.size}개의 기사를 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.`}\n        onConfirm={() =>\n          deleteArticlesMutation.mutate(Array.from(selectedArticles))\n        }\n        confirmText=\"삭제\"\n        cancelText=\"취소\"\n        variant=\"destructive\"\n      />\n    </div>\n  );\n}\n","size_bytes":5628},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\", /* 9px */\n        md: \".375rem\", /* 6px */\n        sm: \".1875rem\", /* 3px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":4050},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/pages/home.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { format } from \"date-fns\";\nimport { Calendar, Menu, Search, ArrowLeft } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { DatePicker } from \"@/components/ui/date-picker\";\nimport { ManagementPanel } from \"@/components/management-panel\";\nimport { ArticleList } from \"@/components/article-list\";\nimport { SearchBar, type SearchFilters } from \"@/components/search-bar\";\nimport { TimelineView } from \"@/components/timeline-view\";\nimport { CategoryWithArticles, ArticleWithMetadata, CategoryWithKeywords } from \"@shared/schema\";\n\nexport default function HomePage() {\n  const today = new Date();\n  const [selectedDate, setSelectedDate] = useState<Date | undefined>(today);\n  const [isManagementOpen, setIsManagementOpen] = useState(false);\n  const [deleteMode, setDeleteMode] = useState(false);\n  const [searchMode, setSearchMode] = useState(false);\n  const [searchFilters, setSearchFilters] = useState<SearchFilters | null>(null);\n\n  // Fetch categories\n  const { data: categories = [] } = useQuery<CategoryWithKeywords[]>({\n    queryKey: [\"/api/categories\"],\n  });\n\n  // Fetch available dates (for DateRangePicker highlighting)\n  const { data: availableDates = [] } = useQuery<string[]>({\n    queryKey: [\"/api/articles/dates\"],\n  });\n\n  // Fetch articles for selected date\n  const { data: categoriesWithArticles = [], isLoading } = useQuery<\n    CategoryWithArticles[]\n  >({\n    queryKey: [\"/api/articles\", selectedDate],\n    queryFn: async () => {\n      if (!selectedDate) {\n        return [];\n      }\n      \n      const dateStr = format(selectedDate, \"yyyy-MM-dd\");\n      \n      const response = await fetch(`/api/articles?date=${dateStr}`);\n      if (!response.ok) {\n        throw new Error(\"Failed to fetch articles\");\n      }\n      return response.json();\n    },\n    enabled: !searchMode && !!selectedDate,\n  });\n\n  // Fetch archive search results\n  const { data: searchResults = [], isLoading: isSearching } = useQuery<\n    ArticleWithMetadata[]\n  >({\n    queryKey: [\"/api/articles/search\", searchFilters],\n    queryFn: async () => {\n      if (!searchFilters || searchFilters.searchType !== \"archive\") return [];\n      \n      const params = new URLSearchParams();\n      if (searchFilters.query) params.append(\"q\", searchFilters.query);\n      if (searchFilters.categoryId) params.append(\"categoryId\", searchFilters.categoryId);\n      if (searchFilters.dateRange?.from) {\n        params.append(\"startDate\", format(searchFilters.dateRange.from, \"yyyy-MM-dd\"));\n      }\n      if (searchFilters.dateRange?.to) {\n        params.append(\"endDate\", format(searchFilters.dateRange.to, \"yyyy-MM-dd\"));\n      }\n\n      const response = await fetch(`/api/articles/search?${params.toString()}`);\n      if (!response.ok) {\n        throw new Error(\"Failed to search articles\");\n      }\n      return response.json();\n    },\n    enabled: searchMode && searchFilters !== null && searchFilters.searchType === \"archive\",\n  });\n\n  // Fetch live search results\n  const { data: liveResults = [], isLoading: isSearchingLive } = useQuery<any[]>({\n    queryKey: [\"/api/search/live\", searchFilters?.query, searchFilters?.daysBack],\n    queryFn: async () => {\n      if (!searchFilters || !searchFilters.query || searchFilters.searchType !== \"live\") return [];\n      \n      const params = new URLSearchParams();\n      params.append(\"q\", searchFilters.query);\n      if (searchFilters.daysBack) {\n        params.append(\"daysBack\", searchFilters.daysBack.toString());\n      }\n\n      const response = await fetch(`/api/search/live?${params.toString()}`);\n      if (!response.ok) {\n        throw new Error(\"Failed to search live news\");\n      }\n      return response.json();\n    },\n    enabled: searchMode && searchFilters !== null && searchFilters.searchType === \"live\" && !!searchFilters.query,\n  });\n\n  // Convert live results to ArticleWithMetadata format for TimelineView\n  const liveResultsAsArticles: ArticleWithMetadata[] = liveResults.map((item: any, index: number) => ({\n    id: `live-${index}-${Date.now()}`,\n    title: item.title,\n    summary: item.summary || item.description,\n    url: item.link,\n    publishedDate: new Date(item.pubDate),\n    crawledDate: new Date(),\n    categoryId: undefined as any,\n    categoryName: undefined as any,\n    isBookmarked: false,\n    note: null,\n  }));\n\n  const handleSearch = (filters: SearchFilters) => {\n    setSearchFilters(filters);\n    setSearchMode(true);\n  };\n\n  const handleToggleMode = () => {\n    setSearchMode(!searchMode);\n    if (searchMode) {\n      setSearchFilters(null);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Header */}\n      <header className=\"sticky top-0 z-50 w-full border-b border-border bg-background\">\n        <div className=\"container mx-auto flex h-16 items-center justify-between px-6 md:px-12 lg:px-16\">\n          {/* Logo */}\n          <div className=\"flex items-center gap-3\">\n            <h1 className=\"text-xl font-semibold tracking-tight\" data-testid=\"text-title\">\n              뉴스 아카이브\n            </h1>\n            <Button\n              variant={searchMode ? \"default\" : \"outline\"}\n              size=\"sm\"\n              onClick={handleToggleMode}\n              data-testid=\"button-toggle-search-mode\"\n            >\n              {searchMode ? (\n                <>\n                  <ArrowLeft className=\"h-4 w-4 mr-2\" />\n                  뒤로 가기\n                </>\n              ) : (\n                <>\n                  <Search className=\"h-4 w-4 mr-2\" />\n                  검색 모드\n                </>\n              )}\n            </Button>\n          </div>\n\n          {/* Date Selector - Only show in date mode */}\n          {!searchMode && (\n            <DatePicker\n              date={selectedDate}\n              onDateChange={setSelectedDate}\n              availableDates={availableDates}\n              data-testid=\"date-picker-main\"\n            />\n          )}\n\n          {searchMode && <div />}\n\n          {/* Actions */}\n          <div className=\"flex items-center gap-2\">\n            <Button\n              variant=\"outline\"\n              onClick={() => setIsManagementOpen(true)}\n              data-testid=\"button-open-management\"\n            >\n              <Menu className=\"h-4 w-4 mr-2\" />\n              메뉴\n            </Button>\n          </div>\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <main className=\"container mx-auto px-6 py-8 md:px-12 lg:px-16\">\n        {searchMode ? (\n          <div className=\"space-y-6\">\n            <SearchBar\n              categories={categories}\n              onSearch={handleSearch}\n            />\n            \n            {(isSearching || isSearchingLive) ? (\n              <div className=\"text-center py-12 text-muted-foreground\">\n                검색 중...\n              </div>\n            ) : (\n              <TimelineView\n                articles={searchFilters?.searchType === \"live\" ? liveResultsAsArticles : searchResults}\n                categories={categories}\n              />\n            )}\n          </div>\n        ) : (\n          <ArticleList\n            categories={categoriesWithArticles}\n            isLoading={isLoading}\n            deleteMode={deleteMode}\n          />\n        )}\n      </main>\n\n      {/* Management Panel */}\n      <ManagementPanel\n        isOpen={isManagementOpen}\n        onClose={() => setIsManagementOpen(false)}\n        deleteMode={deleteMode}\n        setDeleteMode={setDeleteMode}\n        selectedDate={selectedDate}\n      />\n    </div>\n  );\n}\n","size_bytes":7598},"client/src/components/notification-settings.tsx":{"content":"import { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport type { NotificationSettings } from \"@shared/schema\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Loader2, Bell, BellOff } from \"lucide-react\";\nimport { useState, useEffect } from \"react\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\n\nexport function NotificationSettingsComponent() {\n  const { toast } = useToast();\n\n  // Fetch notification settings\n  const { data: settings, isLoading } = useQuery<NotificationSettings>({\n    queryKey: [\"/api/notifications\"],\n  });\n\n  // Local state for form\n  const [enabled, setEnabled] = useState(false);\n  const [emailEnabled, setEmailEnabled] = useState(false);\n  const [emailAddress, setEmailAddress] = useState(\"\");\n  const [slackEnabled, setSlackEnabled] = useState(false);\n  const [slackWebhookUrl, setSlackWebhookUrl] = useState(\"\");\n\n  // Initialize form when settings are loaded\n  useEffect(() => {\n    if (settings) {\n      setEnabled(settings.enabled);\n      setEmailEnabled(settings.emailEnabled);\n      setEmailAddress(settings.emailAddress || \"\");\n      setSlackEnabled(settings.slackEnabled);\n      setSlackWebhookUrl(settings.slackWebhookUrl || \"\");\n    }\n  }, [settings]);\n\n  // Update settings mutation\n  const updateMutation = useMutation({\n    mutationFn: async (updates: Partial<NotificationSettings>) => {\n      return await apiRequest(\"PUT\", \"/api/notifications\", updates);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/notifications\"] });\n      toast({\n        title: \"알림 설정 저장됨\",\n        description: \"알림 설정이 성공적으로 저장되었습니다.\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        variant: \"destructive\",\n        title: \"저장 실패\",\n        description: error.message || \"알림 설정 저장에 실패했습니다.\",\n      });\n    },\n  });\n\n  const handleSave = () => {\n    updateMutation.mutate({\n      enabled,\n      emailEnabled,\n      emailAddress: emailAddress || null,\n      slackEnabled,\n      slackWebhookUrl: slackWebhookUrl || null,\n    });\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center p-8\">\n        <Loader2 className=\"h-6 w-6 animate-spin\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Master Toggle */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"space-y-0.5\">\n          <Label className=\"text-base\">알림 활성화</Label>\n          <p className=\"text-sm text-muted-foreground\">\n            크롤링 완료 시 새 기사 알림 받기\n          </p>\n        </div>\n        <Switch\n          checked={enabled}\n          onCheckedChange={setEnabled}\n          data-testid=\"switch-notification-enabled\"\n        />\n      </div>\n\n      {/* Email Settings */}\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <CardTitle>이메일 알림</CardTitle>\n              <CardDescription>이메일로 새 기사 알림 받기</CardDescription>\n            </div>\n            <Switch\n              checked={emailEnabled}\n              onCheckedChange={setEmailEnabled}\n              disabled={!enabled}\n              data-testid=\"switch-email-enabled\"\n            />\n          </div>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"email-address\">이메일 주소</Label>\n            <Input\n              id=\"email-address\"\n              type=\"email\"\n              placeholder=\"your@email.com\"\n              value={emailAddress}\n              onChange={(e) => setEmailAddress(e.target.value)}\n              disabled={!enabled || !emailEnabled}\n              data-testid=\"input-email-address\"\n            />\n            <p className=\"text-xs text-muted-foreground\">\n              ℹ️ 이메일 전송을 위해서는 SMTP 설정이 필요합니다\n            </p>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Slack Settings */}\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <CardTitle>Slack 알림</CardTitle>\n              <CardDescription>Slack Webhook으로 새 기사 알림 받기</CardDescription>\n            </div>\n            <Switch\n              checked={slackEnabled}\n              onCheckedChange={setSlackEnabled}\n              disabled={!enabled}\n              data-testid=\"switch-slack-enabled\"\n            />\n          </div>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"slack-webhook\">Slack Webhook URL</Label>\n            <Input\n              id=\"slack-webhook\"\n              type=\"url\"\n              placeholder=\"https://hooks.slack.com/services/...\"\n              value={slackWebhookUrl}\n              onChange={(e) => setSlackWebhookUrl(e.target.value)}\n              disabled={!enabled || !slackEnabled}\n              data-testid=\"input-slack-webhook\"\n            />\n            <p className=\"text-xs text-muted-foreground\">\n              <a \n                href=\"https://api.slack.com/messaging/webhooks\" \n                target=\"_blank\" \n                rel=\"noopener noreferrer\"\n                className=\"text-primary hover:underline\"\n              >\n                Slack Webhook URL 만들기 →\n              </a>\n            </p>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Save Button */}\n      <div className=\"flex justify-end gap-2\">\n        <Button\n          onClick={handleSave}\n          disabled={updateMutation.isPending}\n          data-testid=\"button-save-notifications\"\n        >\n          {updateMutation.isPending ? (\n            <>\n              <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n              저장 중...\n            </>\n          ) : (\n            <>\n              {enabled ? <Bell className=\"mr-2 h-4 w-4\" /> : <BellOff className=\"mr-2 h-4 w-4\" />}\n              설정 저장\n            </>\n          )}\n        </Button>\n      </div>\n    </div>\n  );\n}\n","size_bytes":6434},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"server/storage.ts":{"content":"// Reference: javascript_database blueprint\nimport {\n  categories,\n  keywords,\n  articles,\n  bookmarks,\n  notes,\n  type Category,\n  type Keyword,\n  type Article,\n  type Bookmark,\n  type Note,\n  type InsertCategory,\n  type InsertKeyword,\n  type InsertArticle,\n  type InsertBookmark,\n  type InsertNote,\n  type CategoryWithKeywords,\n  type CategoryWithArticles,\n  type ArticleWithMetadata,\n} from \"@shared/schema\";\nimport { db } from \"./db\";\nimport { eq, sql, desc, and, gte } from \"drizzle-orm\";\n\nexport interface IStorage {\n  // Categories\n  getCategories(): Promise<Category[]>;\n  getCategoriesWithKeywords(): Promise<CategoryWithKeywords[]>;\n  getCategoriesWithArticlesByDate(date: string): Promise<CategoryWithArticles[]>;\n  getCategoriesWithArticlesByDateRange(startDate: string, endDate: string): Promise<CategoryWithArticles[]>;\n  createCategory(category: InsertCategory): Promise<Category>;\n\n  // Keywords\n  getKeywordsByCategoryId(categoryId: string): Promise<Keyword[]>;\n  updateKeywordsByCategory(categoryId: string, newKeywords: string[]): Promise<void>;\n  \n  // Articles\n  getArticlesByDate(date: string): Promise<Article[]>;\n  getArticleById(articleId: string): Promise<Article | null>;\n  getAvailableDates(): Promise<string[]>;\n  createArticle(article: InsertArticle): Promise<Article>;\n  createArticleWithDate(article: InsertArticle & { crawledDate: Date }): Promise<Article>;\n  updateArticle(articleId: string, updates: Partial<InsertArticle>): Promise<Article>;\n  deleteArticlesByDate(date: string): Promise<void>;\n  deleteArticlesByIds(articleIds: string[]): Promise<void>;\n  getArticlesByDateAndCategory(date: string, categoryId: string): Promise<Article[]>;\n  getArticlesForExport(startDate: string, endDate: string): Promise<CategoryWithArticles[]>;\n  searchArticles(query?: string, startDate?: string, endDate?: string, categoryId?: string): Promise<ArticleWithMetadata[]>;\n\n  // Bookmarks\n  toggleBookmark(articleId: string): Promise<boolean>;\n  isArticleBookmarked(articleId: string): Promise<boolean>;\n  getBookmarkedArticles(): Promise<ArticleWithMetadata[]>;\n\n  // Notes\n  getNote(articleId: string): Promise<Note | null>;\n  saveNote(articleId: string, content: string): Promise<Note>;\n  deleteNote(articleId: string): Promise<void>;\n\n  // Statistics\n  getCategoryStats(startDate?: string, endDate?: string): Promise<import(\"@shared/schema\").CategoryStats[]>;\n  getDateStats(startDate?: string, endDate?: string): Promise<import(\"@shared/schema\").DateStats[]>;\n  getCategoryDateStats(startDate?: string, endDate?: string): Promise<import(\"@shared/schema\").CategoryDateStats[]>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  // Categories\n  async getCategories(): Promise<Category[]> {\n    return await db.select().from(categories).orderBy(categories.displayOrder);\n  }\n\n  async getCategoriesWithKeywords(): Promise<CategoryWithKeywords[]> {\n    const allCategories = await db.select().from(categories).orderBy(categories.displayOrder);\n    const allKeywords = await db.select().from(keywords);\n\n    return allCategories.map(category => ({\n      ...category,\n      keywords: allKeywords.filter(k => k.categoryId === category.id),\n    }));\n  }\n\n  async getCategoriesWithArticlesByDate(date: string): Promise<CategoryWithArticles[]> {\n    const allCategories = await db.select().from(categories).orderBy(categories.displayOrder);\n    \n    // Use SQL DATE() function to compare dates directly without timezone issues\n    const articlesWithMetadata = await db\n      .select({\n        article: articles,\n        bookmark: bookmarks,\n        note: notes,\n      })\n      .from(articles)\n      .leftJoin(bookmarks, eq(bookmarks.articleId, articles.id))\n      .leftJoin(notes, eq(notes.articleId, articles.id))\n      .where(\n        sql`DATE(${articles.crawledDate}) = ${date}`\n      )\n      .orderBy(desc(articles.publishedDate));\n\n    const allArticlesWithMetadata: ArticleWithMetadata[] = articlesWithMetadata.map(r => ({\n      ...r.article,\n      bookmark: r.bookmark,\n      note: r.note,\n      isBookmarked: !!r.bookmark,\n    }));\n\n    return allCategories.map(category => ({\n      ...category,\n      articles: allArticlesWithMetadata.filter(a => a.categoryId === category.id),\n    }));\n  }\n\n  async getCategoriesWithArticlesByDateRange(startDate: string, endDate: string): Promise<CategoryWithArticles[]> {\n    const allCategories = await db.select().from(categories).orderBy(categories.displayOrder);\n    \n    // Use SQL DATE() function to compare dates directly without timezone issues\n    const articlesWithMetadata = await db\n      .select({\n        article: articles,\n        bookmark: bookmarks,\n        note: notes,\n      })\n      .from(articles)\n      .leftJoin(bookmarks, eq(bookmarks.articleId, articles.id))\n      .leftJoin(notes, eq(notes.articleId, articles.id))\n      .where(\n        sql`DATE(${articles.crawledDate}) BETWEEN ${startDate} AND ${endDate}`\n      )\n      .orderBy(desc(articles.publishedDate));\n\n    const allArticlesWithMetadata: ArticleWithMetadata[] = articlesWithMetadata.map(r => ({\n      ...r.article,\n      bookmark: r.bookmark,\n      note: r.note,\n      isBookmarked: !!r.bookmark,\n    }));\n\n    return allCategories.map(category => ({\n      ...category,\n      articles: allArticlesWithMetadata.filter(a => a.categoryId === category.id),\n    }));\n  }\n\n  async createCategory(category: InsertCategory): Promise<Category> {\n    const [newCategory] = await db\n      .insert(categories)\n      .values(category)\n      .returning();\n    return newCategory;\n  }\n\n  // Keywords\n  async getKeywordsByCategoryId(categoryId: string): Promise<Keyword[]> {\n    return await db\n      .select()\n      .from(keywords)\n      .where(eq(keywords.categoryId, categoryId));\n  }\n\n  async updateKeywordsByCategory(categoryId: string, newKeywords: string[]): Promise<void> {\n    // Delete existing keywords for this category\n    await db.delete(keywords).where(eq(keywords.categoryId, categoryId));\n\n    // Insert new keywords\n    if (newKeywords.length > 0) {\n      await db.insert(keywords).values(\n        newKeywords.map(keyword => ({\n          categoryId,\n          keyword,\n        }))\n      );\n    }\n  }\n\n  // Articles\n  async getArticlesByDate(date: string): Promise<Article[]> {\n    // Use SQL DATE() function to compare dates directly without timezone issues\n    return await db\n      .select()\n      .from(articles)\n      .where(\n        sql`DATE(${articles.crawledDate}) = ${date}`\n      )\n      .orderBy(desc(articles.publishedDate));\n  }\n\n  async getAvailableDates(): Promise<string[]> {\n    const result = await db\n      .selectDistinct({\n        date: sql<string>`DATE(${articles.crawledDate})`,\n      })\n      .from(articles)\n      .orderBy(sql`DATE(${articles.crawledDate}) DESC`);\n\n    return result.map(r => r.date);\n  }\n\n  async getArticleById(articleId: string): Promise<Article | null> {\n    const [article] = await db\n      .select()\n      .from(articles)\n      .where(eq(articles.id, articleId))\n      .limit(1);\n    return article || null;\n  }\n\n  async createArticle(article: InsertArticle): Promise<Article> {\n    const [newArticle] = await db\n      .insert(articles)\n      .values(article)\n      .returning();\n    return newArticle;\n  }\n\n  async createArticleWithDate(article: InsertArticle & { crawledDate: Date }): Promise<Article> {\n    const [newArticle] = await db\n      .insert(articles)\n      .values(article)\n      .returning();\n    return newArticle;\n  }\n\n  async updateArticle(articleId: string, updates: Partial<InsertArticle>): Promise<Article> {\n    const [updatedArticle] = await db\n      .update(articles)\n      .set(updates)\n      .where(eq(articles.id, articleId))\n      .returning();\n    return updatedArticle;\n  }\n\n  async deleteArticlesByDate(date: string): Promise<void> {\n    // Use SQL DATE() function to compare dates directly without timezone issues\n    await db\n      .delete(articles)\n      .where(\n        sql`DATE(${articles.crawledDate}) = ${date}`\n      );\n  }\n\n  async deleteArticlesByIds(articleIds: string[]): Promise<void> {\n    if (articleIds.length === 0) return;\n    \n    await db\n      .delete(articles)\n      .where(sql`${articles.id} IN (${sql.join(articleIds.map(id => sql`${id}`), sql`, `)})`);\n  }\n\n  async getArticlesByDateAndCategory(date: string, categoryId: string): Promise<Article[]> {\n    // Use SQL DATE() function to compare dates directly without timezone issues\n    return await db\n      .select()\n      .from(articles)\n      .where(\n        and(\n          eq(articles.categoryId, categoryId),\n          sql`DATE(${articles.crawledDate}) = ${date}`\n        )\n      );\n  }\n\n  async getArticlesForExport(startDate: string, endDate: string): Promise<CategoryWithArticles[]> {\n    const allCategories = await db.select().from(categories).orderBy(categories.displayOrder);\n    \n    // Use SQL DATE() function to compare dates directly without timezone issues\n    const allArticles = await db\n      .select()\n      .from(articles)\n      .where(\n        and(\n          sql`DATE(${articles.crawledDate}) >= ${startDate}`,\n          sql`DATE(${articles.crawledDate}) <= ${endDate}`\n        )\n      )\n      .orderBy(desc(articles.publishedDate));\n\n    return allCategories.map(category => ({\n      ...category,\n      articles: allArticles.filter(a => a.categoryId === category.id),\n    }));\n  }\n\n  async searchArticles(\n    query?: string,\n    startDate?: string,\n    endDate?: string,\n    categoryId?: string\n  ): Promise<ArticleWithMetadata[]> {\n    const conditions: any[] = [];\n\n    if (query && query.trim()) {\n      conditions.push(\n        sql`(${articles.title} ILIKE ${'%' + query + '%'} OR ${articles.summary} ILIKE ${'%' + query + '%'})`\n      );\n    }\n\n    if (startDate) {\n      conditions.push(sql`DATE(${articles.crawledDate}) >= ${startDate}`);\n    }\n\n    if (endDate) {\n      conditions.push(sql`DATE(${articles.crawledDate}) <= ${endDate}`);\n    }\n\n    if (categoryId) {\n      conditions.push(eq(articles.categoryId, categoryId));\n    }\n\n    const whereClause = conditions.length > 0 ? and(...conditions) : undefined;\n\n    const result = await db\n      .select({\n        article: articles,\n        bookmark: bookmarks,\n        note: notes,\n      })\n      .from(articles)\n      .leftJoin(bookmarks, eq(bookmarks.articleId, articles.id))\n      .leftJoin(notes, eq(notes.articleId, articles.id))\n      .where(whereClause)\n      .orderBy(desc(articles.publishedDate));\n\n    return result.map(r => ({\n      ...r.article,\n      bookmark: r.bookmark,\n      note: r.note,\n      isBookmarked: !!r.bookmark,\n    }));\n  }\n\n  // Bookmarks\n  async toggleBookmark(articleId: string): Promise<boolean> {\n    const existing = await db\n      .select()\n      .from(bookmarks)\n      .where(eq(bookmarks.articleId, articleId))\n      .limit(1);\n\n    if (existing.length > 0) {\n      await db.delete(bookmarks).where(eq(bookmarks.articleId, articleId));\n      return false;\n    } else {\n      await db.insert(bookmarks).values({ articleId });\n      return true;\n    }\n  }\n\n  async isArticleBookmarked(articleId: string): Promise<boolean> {\n    const result = await db\n      .select()\n      .from(bookmarks)\n      .where(eq(bookmarks.articleId, articleId))\n      .limit(1);\n    return result.length > 0;\n  }\n\n  async getBookmarkedArticles(): Promise<ArticleWithMetadata[]> {\n    const result = await db\n      .select({\n        article: articles,\n        bookmark: bookmarks,\n        note: notes,\n      })\n      .from(bookmarks)\n      .innerJoin(articles, eq(bookmarks.articleId, articles.id))\n      .leftJoin(notes, eq(notes.articleId, articles.id))\n      .orderBy(desc(bookmarks.createdAt));\n\n    return result.map(r => ({\n      ...r.article,\n      bookmark: r.bookmark,\n      note: r.note,\n      isBookmarked: true,\n    }));\n  }\n\n  // Notes\n  async getNote(articleId: string): Promise<Note | null> {\n    const result = await db\n      .select()\n      .from(notes)\n      .where(eq(notes.articleId, articleId))\n      .limit(1);\n    return result[0] || null;\n  }\n\n  async saveNote(articleId: string, content: string): Promise<Note> {\n    const existing = await db\n      .select()\n      .from(notes)\n      .where(eq(notes.articleId, articleId))\n      .limit(1);\n\n    if (existing.length > 0) {\n      const [updated] = await db\n        .update(notes)\n        .set({ content, updatedAt: new Date() })\n        .where(eq(notes.articleId, articleId))\n        .returning();\n      return updated;\n    } else {\n      const [newNote] = await db\n        .insert(notes)\n        .values({ articleId, content })\n        .returning();\n      return newNote;\n    }\n  }\n\n  async deleteNote(articleId: string): Promise<void> {\n    await db.delete(notes).where(eq(notes.articleId, articleId));\n  }\n\n  // Statistics\n  async getCategoryStats(startDate?: string, endDate?: string): Promise<import(\"@shared/schema\").CategoryStats[]> {\n    const allCategories = await db.select().from(categories).orderBy(categories.displayOrder);\n    \n    // Use SQL DATE() function to compare dates directly without timezone issues\n    let dateConditions = [];\n    if (startDate) {\n      dateConditions.push(sql`DATE(${articles.crawledDate}) >= ${startDate}`);\n    }\n    if (endDate) {\n      dateConditions.push(sql`DATE(${articles.crawledDate}) <= ${endDate}`);\n    }\n\n    const allArticles = await db\n      .select()\n      .from(articles)\n      .where(dateConditions.length > 0 ? and(...dateConditions) : undefined);\n\n    return allCategories.map(category => ({\n      categoryId: category.id,\n      categoryName: category.name,\n      count: allArticles.filter(a => a.categoryId === category.id).length,\n    }));\n  }\n\n  async getDateStats(startDate?: string, endDate?: string): Promise<import(\"@shared/schema\").DateStats[]> {\n    // Use SQL DATE() function to compare dates directly without timezone issues\n    let dateConditions = [];\n    if (startDate) {\n      dateConditions.push(sql`DATE(${articles.crawledDate}) >= ${startDate}`);\n    }\n    if (endDate) {\n      dateConditions.push(sql`DATE(${articles.crawledDate}) <= ${endDate}`);\n    }\n\n    const result = await db\n      .select({\n        date: sql<string>`DATE(${articles.crawledDate})`,\n        count: sql<number>`COUNT(*)::int`,\n      })\n      .from(articles)\n      .where(dateConditions.length > 0 ? and(...dateConditions) : undefined)\n      .groupBy(sql`DATE(${articles.crawledDate})`)\n      .orderBy(sql`DATE(${articles.crawledDate})`);\n\n    return result.map(r => ({\n      date: r.date,\n      count: r.count,\n    }));\n  }\n\n  async getCategoryDateStats(startDate?: string, endDate?: string): Promise<import(\"@shared/schema\").CategoryDateStats[]> {\n    const allCategories = await db.select().from(categories).orderBy(categories.displayOrder);\n    \n    // Use SQL DATE() function to compare dates directly without timezone issues\n    let dateConditions = [];\n    if (startDate) {\n      dateConditions.push(sql`DATE(${articles.crawledDate}) >= ${startDate}`);\n    }\n    if (endDate) {\n      dateConditions.push(sql`DATE(${articles.crawledDate}) <= ${endDate}`);\n    }\n\n    const result = await db\n      .select({\n        categoryId: articles.categoryId,\n        date: sql<string>`DATE(${articles.crawledDate})`,\n        count: sql<number>`COUNT(*)::int`,\n      })\n      .from(articles)\n      .where(dateConditions.length > 0 ? and(...dateConditions) : undefined)\n      .groupBy(articles.categoryId, sql`DATE(${articles.crawledDate})`)\n      .orderBy(sql`DATE(${articles.crawledDate})`);\n\n    return allCategories.map(category => ({\n      categoryId: category.id,\n      categoryName: category.name,\n      stats: result\n        .filter(r => r.categoryId === category.id)\n        .map(r => ({\n          date: r.date,\n          count: r.count,\n        })),\n    }));\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","size_bytes":15748},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5741},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"server/crawler.ts":{"content":"import { compareTwoStrings } from \"string-similarity\";\nimport { summarizeArticle, selectTopImportantArticles, analyzeAndRankArticles } from \"./openai\";\nimport { storage } from \"./storage\";\nimport type { CategoryWithKeywords, Article } from \"@shared/schema\";\nimport { sendNotification } from \"./notifier\";\nimport type { WebSocketServer } from \"ws\";\n\n// Helper function to broadcast crawl progress via WebSocket\nfunction broadcastProgress(message: any) {\n  try {\n    const wss = (global as any).crawlProgressWss as WebSocketServer | undefined;\n    if (wss) {\n      const data = JSON.stringify(message);\n      wss.clients.forEach((client) => {\n        if (client.readyState === 1) { // OPEN\n          client.send(data);\n        }\n      });\n    }\n  } catch (error) {\n    console.error(\"Failed to broadcast progress:\", error);\n  }\n}\n\ninterface NaverNewsItem {\n  title: string;\n  link: string;\n  description: string;\n  pubDate: string;\n  summary?: string;\n  importance?: number;\n}\n\ninterface NaverSearchResponse {\n  items: NaverNewsItem[];\n  total: number;\n  start: number;\n  display: number;\n}\n\n// Check if article is within last 3 days\nfunction isWithinThreeDays(pubDate: string): boolean {\n  const articleDate = new Date(pubDate);\n  const threeDaysAgo = new Date();\n  threeDaysAgo.setDate(threeDaysAgo.getDate() - 3);\n  return articleDate >= threeDaysAgo;\n}\n\n// Check if article is within last N days\nfunction isWithinDays(pubDate: string, days: number): boolean {\n  const articleDate = new Date(pubDate);\n  const daysAgo = new Date();\n  daysAgo.setDate(daysAgo.getDate() - days);\n  return articleDate >= daysAgo;\n}\n\n// Decode HTML entities (named and numeric)\nfunction decodeHTMLEntities(text: string): string {\n  const namedEntities: Record<string, string> = {\n    '&quot;': '\"',\n    '&apos;': \"'\",\n    '&amp;': '&',\n    '&lt;': '<',\n    '&gt;': '>',\n    '&#039;': \"'\",\n    '&nbsp;': ' ',\n  };\n  \n  return text\n    // Decode named entities\n    .replace(/&[a-z]+;/gi, (match) => namedEntities[match] || match)\n    // Decode numeric entities (e.g., &#34;, &#x201c;)\n    .replace(/&#(\\d+);/g, (match, dec) => String.fromCharCode(parseInt(dec, 10)))\n    .replace(/&#x([0-9a-f]+);/gi, (match, hex) => String.fromCharCode(parseInt(hex, 16)));\n}\n\n// Clean article title by removing news source suffixes and prefixes\nfunction cleanTitle(title: string): string {\n  // Remove common patterns like \"- 네이트\", \"- 조선일보\", \"| YTN\", \"(연합뉴스)\" etc.\n  return title\n    // Remove prefixes (at the start)\n    .replace(/^\\[[^\\]]+\\]\\s*/, '')  // Remove \"[리포트 브리핑] \" at start\n    .replace(/^【[^】]+】\\s*/, '')    // Remove \"【...】 \" at start\n    .replace(/^\\([^)]+\\)\\s*/, '')   // Remove \"(...) \" at start\n    // Remove suffixes (at the end)\n    .replace(/\\s*-\\s*[^-]+$/, '')   // Remove \" - NewsSource\"\n    .replace(/\\s*\\|\\s*[^|]+$/, '')  // Remove \" | NewsSource\"\n    .replace(/\\s*\\([^)]+\\)$/, '')   // Remove \" (NewsSource)\"\n    .replace(/\\s*【[^】]+】$/, '')    // Remove \" 【NewsSource】\"\n    .replace(/\\s*\\[[^\\]]+\\]$/, '')  // Remove \" [NewsSource]\"\n    .trim();\n}\n\n// Fetch articles for a keyword from Naver Search API\nexport async function fetchArticlesForKeyword(keyword: string): Promise<NaverNewsItem[]> {\n  try {\n    const clientId = process.env.NAVER_CLIENT_ID;\n    const clientSecret = process.env.NAVER_CLIENT_SECRET;\n    \n    if (!clientId || !clientSecret) {\n      throw new Error(\"NAVER_CLIENT_ID 또는 NAVER_CLIENT_SECRET이 설정되지 않았습니다.\");\n    }\n\n    const encodedKeyword = encodeURIComponent(keyword);\n    const url = `https://openapi.naver.com/v1/search/news.json?query=${encodedKeyword}&display=100&sort=date`;\n    \n    // Add a small delay to avoid rate limiting (50ms)\n    await new Promise(resolve => setTimeout(resolve, 50));\n    \n    const response = await fetch(url, {\n      headers: {\n        \"X-Naver-Client-Id\": clientId,\n        \"X-Naver-Client-Secret\": clientSecret,\n      },\n    });\n\n    if (!response.ok) {\n      throw new Error(`Naver API error: ${response.status} ${response.statusText}`);\n    }\n\n    const data: NaverSearchResponse = await response.json();\n    \n    // Filter articles within last 3 days\n    const recentArticles = data.items.filter(item => item.pubDate && isWithinThreeDays(item.pubDate));\n    \n    // Filter articles that contain the keyword in title\n    const keywordLower = keyword.toLowerCase();\n    const relevantArticles = recentArticles.filter(item => {\n      const titleText = item.title.replace(/<\\/?b>/g, \"\").toLowerCase();\n      return titleText.includes(keywordLower);\n    });\n    \n    // Clean titles\n    const articles = relevantArticles.map(item => ({\n      ...item,\n      title: cleanTitle(decodeHTMLEntities(item.title.replace(/<\\/?b>/g, \"\"))), // Remove <b> tags and decode HTML entities\n      description: decodeHTMLEntities(item.description.replace(/<\\/?b>/g, \"\")), // Remove <b> tags and decode HTML entities\n    }));\n\n    return articles;\n  } catch (error) {\n    console.error(`Failed to fetch articles for keyword \"${keyword}\":`, error);\n    return [];\n  }\n}\n\n// Filter out promotional/event articles based on keywords\nfunction filterPromotionalArticles(articles: NaverNewsItem[]): NaverNewsItem[] {\n  const promotionalKeywords = [\n    '인기', '호평', '주목', '관심',\n    '전시', '박람회', '행사', '이벤트', '개최',\n    '캠페인', '홍보', '광고', '마케팅', '프로모션',\n    '후원', '기부', '봉사', '나눔', 'CSR',\n    '팝업', '체험관', '스폰서', '초청', '클래스', '교실', '놀이터',\n    '친환경', '지속가능', '탄소중립',\n    '판다', '루이', '후이', // Panda-related\n  ];\n  \n  return articles.filter(article => {\n    const titleLower = article.title.toLowerCase();\n    const descLower = article.description.toLowerCase();\n    const textToCheck = titleLower + ' ' + descLower;\n    \n    const hasPromotionalKeyword = promotionalKeywords.some(keyword => \n      textToCheck.includes(keyword.toLowerCase())\n    );\n    return !hasPromotionalKeyword;\n  });\n}\n\n// Find the most important article using GPT, then select the longest one among top candidates\nasync function findRepresentativeArticle(articles: NaverNewsItem[]): Promise<NaverNewsItem | null> {\n  if (articles.length === 0) return null;\n  if (articles.length === 1) return articles[0];\n\n  try {\n    // Step 0: Filter out promotional articles BEFORE sending to GPT\n    const filteredArticles = filterPromotionalArticles(articles);\n    if (filteredArticles.length === 0) {\n      console.warn(`    All ${articles.length} articles filtered out as promotional, skipping keyword`);\n      return null;\n    }\n    if (filteredArticles.length < articles.length) {\n      console.log(`    Filtered ${articles.length - filteredArticles.length} promotional articles (${filteredArticles.length} remaining)`);\n    }\n\n    // Step 1: Use GPT to select top 3 most important articles from filtered set\n    const topN = Math.min(3, filteredArticles.length);\n    const topIndices = await selectTopImportantArticles(\n      filteredArticles.map(a => ({ title: a.title, description: a.description })),\n      topN\n    );\n\n    if (topIndices.length === 0) {\n      console.warn(\"    GPT returned no indices, skipping keyword\");\n      return null;\n    }\n\n    // Step 2: Among top articles, select the one with longest description\n    const topArticles = topIndices\n      .filter(i => i >= 0 && i < filteredArticles.length) // Ensure valid indices for filteredArticles\n      .map(i => filteredArticles[i])\n      .filter(a => a && a.title && a.description); // Ensure valid articles\n    \n    if (topArticles.length === 0) {\n      console.warn(\"    No valid articles from GPT selection, skipping keyword\");\n      return null;\n    }\n\n    topArticles.sort((a, b) => b.description.length - a.description.length);\n\n    const selected = topArticles[0];\n    console.log(`    GPT selected top ${topArticles.length} articles, choosing longest: \"${selected.title?.substring(0, 50)}...\" (${selected.description?.length || 0} chars)`);\n    \n    return selected;\n  } catch (error) {\n    console.error(\"    Failed to use GPT selection, falling back to similarity-based selection:\", error);\n    \n    // Fallback to old similarity-based method\n    const similarityScores = articles.map((article, index) => {\n      let totalSimilarity = 0;\n      for (let i = 0; i < articles.length; i++) {\n        if (i !== index) {\n          const similarity = compareTwoStrings(\n            article.title + \" \" + article.description,\n            articles[i].title + \" \" + articles[i].description\n          );\n          totalSimilarity += similarity;\n        }\n      }\n      return {\n        article,\n        avgSimilarity: totalSimilarity / (articles.length - 1),\n      };\n    });\n\n    similarityScores.sort((a, b) => b.avgSimilarity - a.avgSimilarity);\n    return similarityScores[0].article;\n  }\n}\n\n// Process a single keyword within a category\nasync function processKeyword(\n  category: CategoryWithKeywords,\n  keywordObj: { id: string; categoryId: string; keyword: string },\n  keywordIndex: number,\n  totalKeywords: number\n): Promise<(Article & { category: CategoryWithKeywords }) | null> {\n  try {\n    const keyword = keywordObj.keyword;\n    console.log(`  [${keywordIndex + 1}/${totalKeywords}] Processing keyword: ${keyword}`);\n    \n    broadcastProgress({\n      type: \"keyword_started\",\n      categoryId: category.id,\n      categoryName: category.name,\n      keyword: keyword,\n      keywordIndex: keywordIndex + 1,\n      totalKeywords: totalKeywords,\n    });\n\n    // Fetch articles for this keyword\n    const articles = await fetchArticlesForKeyword(keyword);\n\n    broadcastProgress({\n      type: \"keyword_articles_found\",\n      categoryId: category.id,\n      categoryName: category.name,\n      keyword: keyword,\n      articleCount: articles.length,\n    });\n\n    if (articles.length === 0) {\n      console.log(`    No articles found for keyword: ${keyword}`);\n      broadcastProgress({\n        type: \"keyword_completed\",\n        categoryId: category.id,\n        categoryName: category.name,\n        keyword: keyword,\n        success: false,\n        reason: \"기사 없음\",\n      });\n      return null;\n    }\n\n    // Find the most representative article for this keyword\n    const representativeArticle = await findRepresentativeArticle(articles);\n\n    if (!representativeArticle) {\n      console.log(`    Could not determine representative article for keyword: ${keyword}`);\n      broadcastProgress({\n        type: \"keyword_completed\",\n        categoryId: category.id,\n        categoryName: category.name,\n        keyword: keyword,\n        success: false,\n        reason: \"대표 기사 선정 실패\",\n      });\n      return null;\n    }\n\n    console.log(`    Selected article: ${representativeArticle.title}`);\n    broadcastProgress({\n      type: \"keyword_article_selected\",\n      categoryId: category.id,\n      categoryName: category.name,\n      keyword: keyword,\n      articleTitle: representativeArticle.title,\n    });\n\n    // Summarize the article using GPT\n    broadcastProgress({\n      type: \"keyword_summarizing\",\n      categoryId: category.id,\n      categoryName: category.name,\n      keyword: keyword,\n    });\n\n    const contentToSummarize = representativeArticle.description || representativeArticle.title;\n    let summary: string;\n    \n    try {\n      summary = await summarizeArticle(contentToSummarize);\n    } catch (error) {\n      // If summarization fails, leave summary empty\n      console.warn(`    ⚠ Failed to summarize, leaving summary empty: ${error instanceof Error ? error.message : \"Unknown error\"}`);\n      summary = \"\";\n    }\n\n    // Save to database\n    const newArticle = await storage.createArticle({\n      categoryId: category.id,\n      keyword: keyword,\n      title: representativeArticle.title,\n      summary,\n      url: representativeArticle.link,\n      publishedDate: new Date(representativeArticle.pubDate),\n    });\n\n    console.log(`    ✓ Saved article for keyword: ${keyword}`);\n    broadcastProgress({\n      type: \"keyword_completed\",\n      categoryId: category.id,\n      categoryName: category.name,\n      keyword: keyword,\n      success: true,\n      articleTitle: representativeArticle.title,\n    });\n    \n    return {\n      ...newArticle,\n      category,\n    };\n  } catch (error) {\n    console.error(`    ✗ Failed to process keyword ${keywordObj.keyword}:`, error);\n    broadcastProgress({\n      type: \"keyword_error\",\n      categoryId: category.id,\n      categoryName: category.name,\n      keyword: keywordObj.keyword,\n      error: error instanceof Error ? error.message : \"알 수 없는 오류\",\n    });\n    return null;\n  }\n}\n\n// Process a single category (now processes all keywords)\nasync function processCategoryParallel(category: CategoryWithKeywords): Promise<(Article & { category: CategoryWithKeywords })[]> {\n  try {\n    console.log(`Processing category: ${category.name} (${category.keywords.length} keywords)`);\n    broadcastProgress({\n      type: \"category_started\",\n      categoryId: category.id,\n      categoryName: category.name,\n      keywordCount: category.keywords.length,\n    });\n\n    if (category.keywords.length === 0) {\n      console.log(`  No keywords for category ${category.name}, skipping.`);\n      broadcastProgress({\n        type: \"category_skipped\",\n        categoryId: category.id,\n        categoryName: category.name,\n        reason: \"키워드 없음\",\n      });\n      return [];\n    }\n\n    // Process keywords in batches to avoid rate limiting\n    const BATCH_SIZE = 5;\n    const BATCH_DELAY = 500; // milliseconds between batches\n    \n    const allResults: PromiseSettledResult<(Article & { category: CategoryWithKeywords }) | null>[] = [];\n    const totalBatches = Math.ceil(category.keywords.length / BATCH_SIZE);\n    \n    console.log(`  Processing ${category.keywords.length} keywords in ${totalBatches} batches (${BATCH_SIZE} per batch)`);\n\n    for (let i = 0; i < category.keywords.length; i += BATCH_SIZE) {\n      const batch = category.keywords.slice(i, i + BATCH_SIZE);\n      const batchNumber = Math.floor(i / BATCH_SIZE) + 1;\n      \n      console.log(`  Batch ${batchNumber}/${totalBatches}: Processing ${batch.length} keywords`);\n      \n      const batchPromises = batch.map((keywordObj, batchIndex) => \n        processKeyword(category, keywordObj, i + batchIndex, category.keywords.length)\n      );\n      \n      const batchResults = await Promise.allSettled(batchPromises);\n      allResults.push(...batchResults);\n      \n      // Add delay between batches (except after the last batch)\n      if (i + BATCH_SIZE < category.keywords.length) {\n        console.log(`  Waiting ${BATCH_DELAY}ms before next batch...`);\n        await new Promise(resolve => setTimeout(resolve, BATCH_DELAY));\n      }\n    }\n\n    const results = allResults;\n    \n    // Extract successful articles and count failures\n    const articles = results\n      .filter((result): result is PromiseFulfilledResult<Article & { category: CategoryWithKeywords } | null> => \n        result.status === \"fulfilled\" && result.value !== null\n      )\n      .map(result => result.value as Article & { category: CategoryWithKeywords });\n\n    const failedCount = category.keywords.length - articles.length;\n    const hasSuccess = articles.length > 0;\n    const totalSuccess = failedCount === 0;\n\n    console.log(`  ${totalSuccess ? '✓' : '⚠'} Category ${category.name} completed: ${articles.length}/${category.keywords.length} articles saved`);\n    \n    let statusMessage: string;\n    if (totalSuccess) {\n      statusMessage = `완료 (${articles.length}개 기사 수집)`;\n    } else if (hasSuccess) {\n      statusMessage = `부분 완료 (${articles.length}/${category.keywords.length} 기사 수집)`;\n    } else {\n      statusMessage = \"뉴스 없음 (모든 키워드에서 기사 없음)\";\n    }\n\n    broadcastProgress({\n      type: \"category_completed\",\n      categoryId: category.id,\n      categoryName: category.name,\n      success: hasSuccess, // true if at least one article was collected\n      totalSuccess: totalSuccess, // true only if all keywords succeeded\n      articlesCount: articles.length,\n      totalKeywords: category.keywords.length,\n      failedKeywords: failedCount,\n      reason: statusMessage,\n    });\n    \n    return articles;\n  } catch (error) {\n    console.error(`  ✗ Failed to process category ${category.name}:`, error);\n    broadcastProgress({\n      type: \"category_error\",\n      categoryId: category.id,\n      categoryName: category.name,\n      error: error instanceof Error ? error.message : \"알 수 없는 오류\",\n    });\n    return [];\n  }\n}\n\n// Crawl articles for all categories sequentially to avoid rate limiting\nexport async function crawlNews(): Promise<void> {\n  console.log(\"Starting sequential news crawling...\");\n  \n  const startTime = Date.now();\n  \n  // Get all categories with keywords\n  const categories = await storage.getCategoriesWithKeywords();\n  \n  broadcastProgress({\n    type: \"crawl_started\",\n    totalCategories: categories.length,\n    categories: categories.map(c => ({ id: c.id, name: c.name })),\n    timestamp: new Date().toISOString(),\n  });\n  \n  // Process categories SEQUENTIALLY to avoid overwhelming the API\n  const newArticles: (Article & { category: CategoryWithKeywords })[] = [];\n  \n  for (let i = 0; i < categories.length; i++) {\n    const category = categories[i];\n    console.log(`\\n[${i + 1}/${categories.length}] Starting category: ${category.name}`);\n    \n    try {\n      const articles = await processCategoryParallel(category);\n      newArticles.push(...articles);\n    } catch (error) {\n      console.error(`Failed to process category ${category.name}:`, error);\n    }\n    \n    // Add delay between categories (except after the last one)\n    if (i < categories.length - 1) {\n      const CATEGORY_DELAY = 1000; // 1 second between categories\n      console.log(`Waiting ${CATEGORY_DELAY}ms before next category...`);\n      await new Promise(resolve => setTimeout(resolve, CATEGORY_DELAY));\n    }\n  }\n\n  const duration = Date.now() - startTime;\n  console.log(`News crawling completed! Created ${newArticles.length} articles in ${duration}ms.`);\n  \n  // Send notifications about new articles\n  if (newArticles.length > 0) {\n    console.log(`Sending notifications for ${newArticles.length} new articles...`);\n    try {\n      await sendNotification(newArticles);\n    } catch (error) {\n      console.error(\"Failed to send notifications:\", error);\n    }\n  }\n\n  broadcastProgress({\n    type: \"crawl_completed\",\n    totalArticles: newArticles.length,\n    duration,\n    timestamp: new Date().toISOString(),\n  });\n}\n\n// Live news search - search Naver API in real-time, use GPT to deduplicate and rank by importance\nexport async function searchLiveNews(query: string, daysBack: number = 7): Promise<NaverNewsItem[]> {\n  try {\n    const clientId = process.env.NAVER_CLIENT_ID;\n    const clientSecret = process.env.NAVER_CLIENT_SECRET;\n    \n    if (!clientId || !clientSecret) {\n      throw new Error(\"NAVER_CLIENT_ID 또는 NAVER_CLIENT_SECRET이 설정되지 않았습니다.\");\n    }\n\n    console.log(`Searching live news for: \"${query}\" (last ${daysBack} days)`);\n    \n    const encodedQuery = encodeURIComponent(query);\n    const url = `https://openapi.naver.com/v1/search/news.json?query=${encodedQuery}&display=100&sort=date`;\n    \n    const response = await fetch(url, {\n      headers: {\n        \"X-Naver-Client-Id\": clientId,\n        \"X-Naver-Client-Secret\": clientSecret,\n      },\n    });\n\n    if (!response.ok) {\n      throw new Error(`Naver API error: ${response.status} ${response.statusText}`);\n    }\n\n    const data: NaverSearchResponse = await response.json();\n    \n    // Filter articles within specified days\n    const recentArticles = data.items.filter(item => \n      item.pubDate && isWithinDays(item.pubDate, daysBack)\n    );\n    \n    console.log(`Found ${recentArticles.length} articles within last ${daysBack} days`);\n    \n    // Clean and decode titles\n    const cleanedArticles = recentArticles.map(item => ({\n      title: cleanTitle(decodeHTMLEntities(item.title.replace(/<\\/?b>/g, \"\"))),\n      description: decodeHTMLEntities(item.description.replace(/<\\/?b>/g, \"\")),\n      link: item.link,\n      pubDate: item.pubDate,\n    }));\n\n    // Use GPT to analyze articles: deduplicate, rank by importance, and generate summaries\n    const analyzedArticles = await analyzeAndRankArticles(cleanedArticles);\n    \n    console.log(`After GPT analysis: ${analyzedArticles.length} articles (sorted by importance)`);\n    \n    return analyzedArticles;\n  } catch (error) {\n    console.error(`Failed to search live news for \"${query}\":`, error);\n    throw error;\n  }\n}\n\n// Remove duplicate articles based on title similarity\nfunction removeDuplicateArticles(articles: NaverNewsItem[]): NaverNewsItem[] {\n  if (articles.length <= 1) return articles;\n\n  const uniqueArticles: NaverNewsItem[] = [];\n  const SIMILARITY_THRESHOLD = 0.7; // Consider articles with >70% similarity as duplicates\n\n  for (const article of articles) {\n    // Check if this article is similar to any already selected article\n    const isDuplicate = uniqueArticles.some(uniqueArticle => {\n      const similarity = compareTwoStrings(\n        article.title.toLowerCase(),\n        uniqueArticle.title.toLowerCase()\n      );\n      return similarity > SIMILARITY_THRESHOLD;\n    });\n\n    if (!isDuplicate) {\n      uniqueArticles.push(article);\n    }\n  }\n\n  return uniqueArticles;\n}\n","size_bytes":21467},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/pages/stats.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Link } from \"wouter\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Label } from \"@/components/ui/label\";\nimport { Button } from \"@/components/ui/button\";\nimport { DateRangePicker } from \"@/components/ui/date-range-picker\";\nimport { BarChart, Bar, LineChart, Line, PieChart, Pie, Cell, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from \"recharts\";\nimport { Calendar, TrendingUp, BarChart3, ArrowLeft } from \"lucide-react\";\nimport type { CategoryStats, DateStats, CategoryDateStats } from \"@shared/schema\";\nimport { DateRange } from \"react-day-picker\";\nimport { format } from \"date-fns\";\n\nconst COLORS = [\"#8884d8\", \"#82ca9d\", \"#ffc658\", \"#ff8042\", \"#a4de6c\"];\n\nexport default function StatsPage() {\n  const [dateRange, setDateRange] = useState<DateRange | undefined>();\n  const [appliedDateRange, setAppliedDateRange] = useState<{ start?: string; end?: string }>({});\n\n  const categoryStatsQuery = useQuery<CategoryStats[]>({\n    queryKey: [\n      \"/api/stats/category\",\n      appliedDateRange.start || \"all\",\n      appliedDateRange.end || \"all\",\n    ],\n    queryFn: async () => {\n      const params = new URLSearchParams();\n      if (appliedDateRange.start) params.append(\"startDate\", appliedDateRange.start);\n      if (appliedDateRange.end) params.append(\"endDate\", appliedDateRange.end);\n      const queryString = params.toString();\n      const url = `/api/stats/category${queryString ? `?${queryString}` : \"\"}`;\n      const res = await fetch(url, { credentials: \"include\" });\n      if (!res.ok) throw new Error(\"Failed to fetch stats\");\n      return res.json();\n    },\n  });\n\n  const dateStatsQuery = useQuery<DateStats[]>({\n    queryKey: [\n      \"/api/stats/date\",\n      appliedDateRange.start || \"all\",\n      appliedDateRange.end || \"all\",\n    ],\n    queryFn: async () => {\n      const params = new URLSearchParams();\n      if (appliedDateRange.start) params.append(\"startDate\", appliedDateRange.start);\n      if (appliedDateRange.end) params.append(\"endDate\", appliedDateRange.end);\n      const queryString = params.toString();\n      const url = `/api/stats/date${queryString ? `?${queryString}` : \"\"}`;\n      const res = await fetch(url, { credentials: \"include\" });\n      if (!res.ok) throw new Error(\"Failed to fetch stats\");\n      return res.json();\n    },\n  });\n\n  const categoryDateStatsQuery = useQuery<CategoryDateStats[]>({\n    queryKey: [\n      \"/api/stats/category-date\",\n      appliedDateRange.start || \"all\",\n      appliedDateRange.end || \"all\",\n    ],\n    queryFn: async () => {\n      const params = new URLSearchParams();\n      if (appliedDateRange.start) params.append(\"startDate\", appliedDateRange.start);\n      if (appliedDateRange.end) params.append(\"endDate\", appliedDateRange.end);\n      const queryString = params.toString();\n      const url = `/api/stats/category-date${queryString ? `?${queryString}` : \"\"}`;\n      const res = await fetch(url, { credentials: \"include\" });\n      if (!res.ok) throw new Error(\"Failed to fetch stats\");\n      return res.json();\n    },\n  });\n\n  const handleApplyFilter = () => {\n    if (dateRange?.from && dateRange?.to) {\n      setAppliedDateRange({\n        start: format(dateRange.from, \"yyyy-MM-dd\"),\n        end: format(dateRange.to, \"yyyy-MM-dd\"),\n      });\n    }\n  };\n\n  const handleClearFilter = () => {\n    setDateRange(undefined);\n    setAppliedDateRange({});\n  };\n\n  const totalArticles = categoryStatsQuery.data?.reduce((sum, cat) => sum + cat.count, 0) || 0;\n\n  return (\n    <div className=\"min-h-screen bg-background p-8\">\n      <div className=\"max-w-7xl mx-auto space-y-8\">\n        {/* Header */}\n        <div className=\"flex items-center gap-4 mb-4\">\n          <Link href=\"/\">\n            <Button variant=\"outline\" size=\"icon\" data-testid=\"button-back-home\">\n              <ArrowLeft className=\"h-4 w-4\" />\n            </Button>\n          </Link>\n          <div>\n            <h1 className=\"text-3xl font-bold mb-2\" data-testid=\"text-stats-title\">\n              통계 대시보드\n            </h1>\n            <p className=\"text-muted-foreground\">\n              뉴스 아카이브 데이터를 시각화하여 분석합니다\n            </p>\n          </div>\n        </div>\n\n        {/* Date Range Filter */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Calendar className=\"h-5 w-5\" />\n              날짜 범위 필터\n            </CardTitle>\n            <CardDescription>\n              통계를 조회할 날짜 범위를 설정하세요\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"flex flex-wrap items-end gap-4\">\n              <div className=\"flex-1 min-w-[300px]\">\n                <Label>날짜 범위</Label>\n                <DateRangePicker\n                  date={dateRange}\n                  onDateChange={setDateRange}\n                />\n              </div>\n              <Button onClick={handleApplyFilter} data-testid=\"button-apply-filter\">\n                필터 적용\n              </Button>\n              <Button variant=\"outline\" onClick={handleClearFilter} data-testid=\"button-clear-filter\">\n                초기화\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Summary Cards */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">전체 기사 수</CardTitle>\n              <BarChart3 className=\"h-4 w-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\" data-testid=\"text-total-articles\">\n                {totalArticles.toLocaleString()}\n              </div>\n              <p className=\"text-xs text-muted-foreground mt-1\">\n                선택한 기간 동안 크롤링된 기사\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">카테고리 수</CardTitle>\n              <TrendingUp className=\"h-4 w-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\" data-testid=\"text-total-categories\">\n                {categoryStatsQuery.data?.length || 0}\n              </div>\n              <p className=\"text-xs text-muted-foreground mt-1\">\n                활성 카테고리 개수\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">일별 평균</CardTitle>\n              <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\" data-testid=\"text-avg-daily\">\n                {dateStatsQuery.data && dateStatsQuery.data.length > 0\n                  ? Math.round(totalArticles / dateStatsQuery.data.length)\n                  : 0}\n              </div>\n              <p className=\"text-xs text-muted-foreground mt-1\">\n                하루 평균 기사 수\n              </p>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Charts */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          {/* Category Bar Chart */}\n          <Card>\n            <CardHeader>\n              <CardTitle>카테고리별 기사 수</CardTitle>\n              <CardDescription>각 카테고리의 기사 개수 비교</CardDescription>\n            </CardHeader>\n            <CardContent>\n              {categoryStatsQuery.isLoading ? (\n                <div className=\"h-80 flex items-center justify-center text-muted-foreground\">\n                  로딩 중...\n                </div>\n              ) : (\n                <ResponsiveContainer width=\"100%\" height={300}>\n                  <BarChart data={categoryStatsQuery.data}>\n                    <CartesianGrid strokeDasharray=\"3 3\" />\n                    <XAxis dataKey=\"categoryName\" angle={-45} textAnchor=\"end\" height={100} />\n                    <YAxis />\n                    <Tooltip />\n                    <Bar dataKey=\"count\" fill=\"#8884d8\" />\n                  </BarChart>\n                </ResponsiveContainer>\n              )}\n            </CardContent>\n          </Card>\n\n          {/* Category Pie Chart */}\n          <Card>\n            <CardHeader>\n              <CardTitle>카테고리 분포</CardTitle>\n              <CardDescription>전체 대비 카테고리 비율</CardDescription>\n            </CardHeader>\n            <CardContent>\n              {categoryStatsQuery.isLoading ? (\n                <div className=\"h-80 flex items-center justify-center text-muted-foreground\">\n                  로딩 중...\n                </div>\n              ) : (\n                <ResponsiveContainer width=\"100%\" height={300}>\n                  <PieChart>\n                    <Pie\n                      data={categoryStatsQuery.data}\n                      dataKey=\"count\"\n                      nameKey=\"categoryName\"\n                      cx=\"50%\"\n                      cy=\"50%\"\n                      outerRadius={100}\n                      label\n                    >\n                      {categoryStatsQuery.data?.map((_, index) => (\n                        <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\n                      ))}\n                    </Pie>\n                    <Tooltip />\n                    <Legend />\n                  </PieChart>\n                </ResponsiveContainer>\n              )}\n            </CardContent>\n          </Card>\n\n          {/* Date Line Chart */}\n          <Card className=\"lg:col-span-2\">\n            <CardHeader>\n              <CardTitle>날짜별 기사 추이</CardTitle>\n              <CardDescription>시간에 따른 기사 수 변화</CardDescription>\n            </CardHeader>\n            <CardContent>\n              {dateStatsQuery.isLoading ? (\n                <div className=\"h-80 flex items-center justify-center text-muted-foreground\">\n                  로딩 중...\n                </div>\n              ) : (\n                <ResponsiveContainer width=\"100%\" height={300}>\n                  <LineChart data={dateStatsQuery.data}>\n                    <CartesianGrid strokeDasharray=\"3 3\" />\n                    <XAxis dataKey=\"date\" />\n                    <YAxis />\n                    <Tooltip />\n                    <Legend />\n                    <Line type=\"monotone\" dataKey=\"count\" stroke=\"#8884d8\" name=\"기사 수\" />\n                  </LineChart>\n                </ResponsiveContainer>\n              )}\n            </CardContent>\n          </Card>\n\n          {/* Category-Date Line Chart */}\n          <Card className=\"lg:col-span-2\">\n            <CardHeader>\n              <CardTitle>카테고리별 날짜 추이</CardTitle>\n              <CardDescription>카테고리별 시간에 따른 기사 수 변화</CardDescription>\n            </CardHeader>\n            <CardContent>\n              {categoryDateStatsQuery.isLoading ? (\n                <div className=\"h-80 flex items-center justify-center text-muted-foreground\">\n                  로딩 중...\n                </div>\n              ) : categoryDateStatsQuery.data && categoryDateStatsQuery.data.length > 0 ? (\n                <ResponsiveContainer width=\"100%\" height={400}>\n                  <LineChart\n                    data={\n                      categoryDateStatsQuery.data[0]?.stats.map((stat) => {\n                        const dataPoint: any = { date: stat.date };\n                        categoryDateStatsQuery.data?.forEach((catStat) => {\n                          const found = catStat.stats.find((s) => s.date === stat.date);\n                          dataPoint[catStat.categoryName] = found?.count || 0;\n                        });\n                        return dataPoint;\n                      }) || []\n                    }\n                  >\n                    <CartesianGrid strokeDasharray=\"3 3\" />\n                    <XAxis dataKey=\"date\" />\n                    <YAxis />\n                    <Tooltip />\n                    <Legend />\n                    {categoryDateStatsQuery.data?.map((catStat, index) => (\n                      <Line\n                        key={catStat.categoryId}\n                        type=\"monotone\"\n                        dataKey={catStat.categoryName}\n                        stroke={COLORS[index % COLORS.length]}\n                      />\n                    ))}\n                  </LineChart>\n                </ResponsiveContainer>\n              ) : (\n                <div className=\"h-80 flex items-center justify-center text-muted-foreground\">\n                  데이터가 없습니다\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":13290},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1383},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = false,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-semibold text-gray-900\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-gray-900 rounded-md w-9 font-semibold text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-semibold aria-selected:opacity-100 !text-gray-900 hover:!text-gray-900\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-gray-300 text-gray-900 hover:bg-gray-300 hover:text-gray-900 focus:bg-gray-300 focus:text-gray-900\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2717},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* LIGHT MODE */\n:root {\n  --button-outline: rgba(0,0,0, .10);\n  --badge-outline: rgba(0,0,0, .05);\n\n  /* Automatic computation of border around primary / danger buttons */\n  --opaque-button-border-intensity: -8; /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(0,0,0, .03);\n  --elevate-2: rgba(0,0,0, .08);\n\n  --background: 0 0% 3.53%;\n\n  --foreground: 0 0% 92.16%;\n\n  --border: 0 0% 16.86%;\n\n  --card: 300 4.35% 6.67%;\n\n  --card-foreground: 0 0% 100%;\n\n  --card-border: 0 0% 94%;\n\n  --sidebar: 45 25% 97%;\n\n  --sidebar-foreground: 20 14% 17%;\n\n  --sidebar-border: 45 15% 80%;\n\n  --sidebar-primary: 9 75% 61%;\n\n  --sidebar-primary-foreground: 0 0% 100%;\n\n  --sidebar-accent: 25 45% 80%;\n\n  --sidebar-accent-foreground: 20 14% 17%;\n\n  --sidebar-ring: 9 75% 61%;\n\n  --popover: 45 25% 97%;\n\n  --popover-foreground: 0 0% 10%;\n\n  --popover-border: 0 0% 90%;\n\n  --primary: 0 0% 96.08%;\n\n  --primary-foreground: 0 0% 5.1%;\n\n  --secondary: 0 0% 92.16%;\n\n  --secondary-foreground: 0 0% 5.1%;\n\n  --muted: 0 0% 25.1%;\n\n  --muted-foreground: 0 0% 67.06%;\n\n  --accent: 0 0% 92.16%;\n\n  --accent-foreground: 0 0% 0%;\n\n  --destructive: 356.3033 90.5579% 54.3137%;\n\n  --destructive-foreground: 0 0% 100%;\n\n  --input: 0 0% 16.86%;\n  --ring: 221.74 13.14% 34.31%;\n  --chart-1: 203.8863 88.2845% 53.1373%;\n  --chart-2: 159.7826 100% 36.0784%;\n  --chart-3: 42.0290 92.8251% 56.2745%;\n  --chart-4: 147.1429 78.5047% 41.9608%;\n  --chart-5: 341.4894 75.2000% 50.9804%;\n\n  --font-sans: 'Inter', sans-serif;\n  --font-serif: 'Inter', sans-serif;\n  --font-mono: Menlo, monospace;\n  --radius: 0.4rem;\n  --shadow-2xs: 0px 2px 0px 0px hsl(9, 75%, 61% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(9, 75%, 61% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(9, 75%, 61% / 0.00), 0px 1px 2px -1px hsl(9, 75%, 61% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(9, 75%, 61% / 0.00), 0px 1px 2px -1px hsl(9, 75%, 61% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(9, 75%, 61% / 0.00), 0px 2px 4px -1px hsl(9, 75%, 61% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(9, 75%, 61% / 0.00), 0px 4px 6px -1px hsl(9, 75%, 61% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(9, 75%, 61% / 0.00), 0px 8px 10px -1px hsl(9, 75%, 61% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(9, 75%, 61% / 0.00);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n  /* Automatically computed borders - intensity can be controlled by the user by the --opaque-button-border-intensity setting */\n\n  /* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n.dark {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .05);\n\n  --opaque-button-border-intensity: 9;  /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(255,255,255, .04);\n  --elevate-2: rgba(255,255,255, .09);\n\n  --background: 20 14% 4%;\n\n  --foreground: 45 25% 91%;\n\n  --border: 20 14% 15%;\n\n  --card: 20 14% 8%;\n\n  --card-foreground: 45 25% 85%;\n\n  --card-border: 0 0% 16%;\n\n  --sidebar: 20 14% 8%;\n\n  --sidebar-foreground: 45 25% 85%;\n\n  --sidebar-border: 20 14% 15%;\n\n  --sidebar-primary: 9 75% 61%;\n\n  --sidebar-primary-foreground: 0 0% 100%;\n\n  --sidebar-accent: 25 45% 20%;\n\n  --sidebar-accent-foreground: 45 25% 85%;\n\n  --sidebar-ring: 9 75% 61%;\n\n  --popover: 20 14% 4%;\n\n  --popover-foreground: 45 25% 91%;\n\n  --popover-border: 0 0% 22%;\n\n  --primary: 9 75% 61%;\n\n  --primary-foreground: 0 0% 100%;\n\n  --secondary: 30 15% 52%;\n\n  --secondary-foreground: 0 0% 100%;\n\n  --muted: 20 14% 15%;\n\n  --muted-foreground: 45 15% 46%;\n\n  --accent: 25 45% 20%;\n\n  --accent-foreground: 45 25% 85%;\n\n  --destructive: 356.3033 90.5579% 54.3137%;\n\n  --destructive-foreground: 0 0% 100%;\n\n  --input: 20 14% 18%;\n  --ring: 9 75% 61%;\n  --chart-1: 203.8863 88.2845% 53.1373%;\n  --chart-2: 159.7826 100% 36.0784%;\n  --chart-3: 42.0290 92.8251% 56.2745%;\n  --chart-4: 147.1429 78.5047% 41.9608%;\n  --chart-5: 341.4894 75.2000% 50.9804%;\n\n  --shadow-2xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 2px 4px -1px hsl(0 0% 0% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 4px 6px -1px hsl(0 0% 0% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 8px 10px -1px hsl(0 0% 0% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n\n  /* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n/**\n * Using the elevate system.\n * Automatic contrast adjustment.\n *\n * <element className=\"hover-elevate\" />\n * <element className=\"active-elevate-2\" />\n *\n * // Using the tailwind utility when a data attribute is \"on\"\n * <element className=\"toggle-elevate data-[state=on]:toggle-elevated\" />\n * // Or manually controlling the toggle state\n * <element className=\"toggle-elevate toggle-elevated\" />\n *\n * Elevation systems have to handle many states.\n * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)\n * - toggled or not\n * - focused or not (this is not handled with these utilities)\n *\n * Even without handling focused or not, this is six possible combinations that\n * need to be distinguished from eachother visually.\n */\n@layer utilities {\n\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of\n   * buttons/badges can remove the automatic brightness adjustment on interactions\n   * and program their own. */\n  .no-default-hover-elevate {}\n\n  .no-default-active-elevate {}\n\n\n  /**\n   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.\n   * This way they can stack/compound. Both will overlap the parent's borders!\n   * So borders will be automatically adjusted both on toggle, and hover/active,\n   * and they will be compounded.\n   */\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: -1;\n    /* sits behind content but above backdrop */\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  /* Does not work on elements with overflow:hidden! */\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: 999;\n    /* sits in front of content */\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n}","size_bytes":11323},"server/scheduler.ts":{"content":"import * as cron from \"node-cron\";\nimport { db } from \"./db\";\nimport { schedulerSettings } from \"@shared/schema\";\nimport { crawlNews } from \"./crawler\";\nimport { storage } from \"./storage\";\nimport { eq } from \"drizzle-orm\";\n\nlet scheduledTask: cron.ScheduledTask | null = null;\n\nexport async function getSchedulerSettings() {\n  const settings = await db.select().from(schedulerSettings).limit(1);\n  \n  if (settings.length === 0) {\n    // Create default settings if none exist\n    const [newSettings] = await db\n      .insert(schedulerSettings)\n      .values({\n        enabled: false,\n        cronExpression: \"0 9 * * *\", // 9 AM daily\n        deleteExisting: false,\n      })\n      .returning();\n    return newSettings;\n  }\n  \n  return settings[0];\n}\n\nexport async function updateSchedulerSettings(updates: {\n  enabled?: boolean;\n  cronExpression?: string;\n  deleteExisting?: boolean;\n}) {\n  const current = await getSchedulerSettings();\n  \n  const [updated] = await db\n    .update(schedulerSettings)\n    .set({\n      ...updates,\n      updatedAt: new Date(),\n    })\n    .where(eq(schedulerSettings.id, current.id))\n    .returning();\n\n  // Restart scheduler with new settings\n  await initializeScheduler();\n  \n  return updated;\n}\n\nasync function runScheduledCrawl() {\n  try {\n    const settings = await getSchedulerSettings();\n    \n    console.log(`[Scheduler] Running scheduled crawl at ${new Date().toISOString()}`);\n    \n    // If deleteExisting is true, delete today's articles first\n    if (settings.deleteExisting) {\n      const today = new Date().toISOString().split(\"T\")[0];\n      await storage.deleteArticlesByDate(today);\n      console.log(`[Scheduler] Deleted existing articles for ${today}`);\n    }\n    \n    await crawlNews();\n    \n    // Update last run time\n    await db\n      .update(schedulerSettings)\n      .set({ lastRun: new Date() })\n      .where(eq(schedulerSettings.id, settings.id));\n    \n    console.log(`[Scheduler] Scheduled crawl completed successfully`);\n  } catch (error) {\n    console.error(`[Scheduler] Error during scheduled crawl:`, error);\n  }\n}\n\nexport async function initializeScheduler() {\n  // Stop existing scheduler if running\n  if (scheduledTask) {\n    scheduledTask.stop();\n    scheduledTask = null;\n    console.log(\"[Scheduler] Stopped previous scheduled task\");\n  }\n\n  const settings = await getSchedulerSettings();\n  \n  if (!settings.enabled) {\n    console.log(\"[Scheduler] Scheduler is disabled\");\n    return;\n  }\n\n  // Validate cron expression (this should not happen if API validation works)\n  if (!cron.validate(settings.cronExpression)) {\n    console.error(`[Scheduler] Invalid cron expression found in database: ${settings.cronExpression}`);\n    console.error(`[Scheduler] Scheduler cannot start. Please update the cron expression via API.`);\n    // Disable the scheduler in database since it's invalid\n    await updateSchedulerSettings({ enabled: false });\n    return;\n  }\n\n  // Start new scheduler\n  try {\n    scheduledTask = cron.schedule(settings.cronExpression, runScheduledCrawl, {\n      timezone: \"Asia/Seoul\",\n    });\n    console.log(`[Scheduler] Scheduler started successfully`);\n    console.log(`[Scheduler] Cron expression: ${settings.cronExpression}`);\n    console.log(`[Scheduler] Delete existing: ${settings.deleteExisting ? 'Yes' : 'No'}`);\n  } catch (error) {\n    console.error(`[Scheduler] Failed to start scheduler:`, error);\n    throw error;\n  }\n}\n\nexport function stopScheduler() {\n  if (scheduledTask) {\n    scheduledTask.stop();\n    scheduledTask = null;\n    console.log(\"[Scheduler] Scheduler stopped\");\n  }\n}\n","size_bytes":3582},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { ThemeProvider } from \"@/components/theme-provider\";\nimport HomePage from \"@/pages/home\";\nimport StatsPage from \"@/pages/stats\";\nimport NotFound from \"@/pages/not-found\";\n\nfunction Router() {\n  return (\n    <Switch>\n      <Route path=\"/\" component={HomePage} />\n      <Route path=\"/stats\" component={StatsPage} />\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <ThemeProvider defaultTheme=\"light\">\n        <TooltipProvider>\n          <Toaster />\n          <Router />\n        </TooltipProvider>\n      </ThemeProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":933},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport { crawlNews, searchLiveNews, fetchArticlesForKeyword } from \"./crawler\";\nimport { summarizeArticle } from \"./openai\";\nimport { z } from \"zod\";\nimport { getSchedulerSettings, updateSchedulerSettings } from \"./scheduler\";\nimport { getNotificationSettings, updateNotificationSettings } from \"./notifier\";\nimport * as cron from \"node-cron\";\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // GET /api/categories - Get all categories with keywords\n  app.get(\"/api/categories\", async (req, res) => {\n    try {\n      const categories = await storage.getCategoriesWithKeywords();\n      res.json(categories);\n    } catch (error: any) {\n      console.error(\"Error fetching categories:\", error);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // PUT /api/keywords - Update keywords for all categories\n  app.put(\"/api/keywords\", async (req, res) => {\n    try {\n      const schema = z.object({\n        keywords: z.record(z.array(z.string())),\n      });\n\n      const { keywords } = schema.parse(req.body);\n\n      // Update keywords for each category\n      for (const [categoryId, keywordList] of Object.entries(keywords)) {\n        await storage.updateKeywordsByCategory(categoryId, keywordList);\n      }\n\n      res.json({ success: true });\n    } catch (error: any) {\n      console.error(\"Error updating keywords:\", error);\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  // GET /api/articles/dates - Get all available dates with articles\n  app.get(\"/api/articles/dates\", async (req, res) => {\n    try {\n      const dates = await storage.getAvailableDates();\n      res.json(dates);\n    } catch (error: any) {\n      console.error(\"Error fetching dates:\", error);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // GET /api/articles?date=YYYY-MM-DD or ?startDate=YYYY-MM-DD&endDate=YYYY-MM-DD\n  app.get(\"/api/articles\", async (req, res) => {\n    try {\n      const date = req.query.date as string | undefined;\n      const startDate = req.query.startDate as string | undefined;\n      const endDate = req.query.endDate as string | undefined;\n      \n      // Support both single date and date range\n      if (startDate && endDate) {\n        const categoriesWithArticles = await storage.getCategoriesWithArticlesByDateRange(startDate, endDate);\n        res.json(categoriesWithArticles);\n      } else if (date) {\n        const categoriesWithArticles = await storage.getCategoriesWithArticlesByDate(date);\n        res.json(categoriesWithArticles);\n      } else {\n        return res.status(400).json({ error: \"Either date or startDate+endDate parameters are required\" });\n      }\n    } catch (error: any) {\n      console.error(\"Error fetching articles:\", error);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // GET /api/articles/search - Search articles with filters\n  app.get(\"/api/articles/search\", async (req, res) => {\n    try {\n      const query = req.query.q as string | undefined;\n      const startDate = req.query.startDate as string | undefined;\n      const endDate = req.query.endDate as string | undefined;\n      const categoryId = req.query.categoryId as string | undefined;\n\n      const results = await storage.searchArticles(query, startDate, endDate, categoryId);\n      res.json(results);\n    } catch (error: any) {\n      console.error(\"Error searching articles:\", error);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // GET /api/search/live - Search live news from Naver API\n  app.get(\"/api/search/live\", async (req, res) => {\n    try {\n      const query = req.query.q as string | undefined;\n      const daysBackParam = req.query.daysBack || req.query.days;\n      const daysBack = daysBackParam ? parseInt(daysBackParam as string) : 7;\n\n      if (!query || !query.trim()) {\n        return res.status(400).json({ error: \"검색어가 필요합니다.\" });\n      }\n\n      const results = await searchLiveNews(query.trim(), daysBack);\n      res.json(results);\n    } catch (error: any) {\n      console.error(\"Error searching live news:\", error);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // POST /api/crawl - Start crawling news\n  app.post(\"/api/crawl\", async (req, res) => {\n    try {\n      const schema = z.object({\n        deleteExisting: z.boolean().optional(),\n      });\n\n      const { deleteExisting } = schema.parse(req.body);\n\n      // If deleteExisting is true, delete today's articles first\n      if (deleteExisting) {\n        const today = new Date().toISOString().split(\"T\")[0];\n        await storage.deleteArticlesByDate(today);\n        console.log(`Deleted existing articles for ${today}`);\n      }\n\n      // Start crawling (this might take a while)\n      // In a production app, you'd want to run this in a background job\n      await crawlNews();\n\n      res.json({ success: true, message: \"Crawling completed successfully\" });\n    } catch (error: any) {\n      console.error(\"Error during crawling:\", error);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // DELETE /api/articles/date/:date - Delete all articles for a specific date\n  app.delete(\"/api/articles/date/:date\", async (req, res) => {\n    try {\n      const date = req.params.date;\n      \n      if (!date) {\n        return res.status(400).json({ error: \"Date parameter is required\" });\n      }\n\n      await storage.deleteArticlesByDate(date);\n      res.json({ success: true, message: `Articles for ${date} deleted successfully` });\n    } catch (error: any) {\n      console.error(\"Error deleting articles by date:\", error);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // DELETE /api/articles/bulk - Delete multiple articles by IDs\n  app.delete(\"/api/articles/bulk\", async (req, res) => {\n    try {\n      const schema = z.object({\n        articleIds: z.array(z.string()),\n      });\n\n      const { articleIds } = schema.parse(req.body);\n\n      if (articleIds.length === 0) {\n        return res.status(400).json({ error: \"No article IDs provided\" });\n      }\n\n      await storage.deleteArticlesByIds(articleIds);\n      res.json({ success: true, message: `${articleIds.length} articles deleted successfully` });\n    } catch (error: any) {\n      console.error(\"Error deleting articles:\", error);\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  // GET /api/articles/:articleId/alternatives - Get alternative articles for replacement\n  app.get(\"/api/articles/:articleId/alternatives\", async (req, res) => {\n    try {\n      const articleId = req.params.articleId;\n      \n      // Get the article to find its keyword\n      const article = await storage.getArticleById(articleId);\n      if (!article) {\n        return res.status(404).json({ error: \"Article not found\" });\n      }\n\n      if (!article.keyword) {\n        return res.status(400).json({ error: \"This article has no associated keyword for finding alternatives\" });\n      }\n\n      // Fetch alternative articles using the same keyword\n      const alternatives = await fetchArticlesForKeyword(article.keyword);\n      res.json({ keyword: article.keyword, articles: alternatives });\n    } catch (error: any) {\n      console.error(\"Error fetching alternative articles:\", error);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // PUT /api/articles/:articleId/replace - Replace an article with selected alternative\n  app.put(\"/api/articles/:articleId/replace\", async (req, res) => {\n    try {\n      const articleId = req.params.articleId;\n      const schema = z.object({\n        title: z.string(),\n        description: z.string(),\n        url: z.string(),\n        publishedDate: z.string(),\n      });\n\n      const { title, description, url, publishedDate } = schema.parse(req.body);\n\n      // Generate summary using GPT, with fallback to description\n      let summary: string;\n      try {\n        summary = await summarizeArticle(title + \" \" + description);\n      } catch (error) {\n        console.warn(\"GPT summarization failed, using description as fallback:\", error);\n        // Use first 200 characters of description as fallback\n        summary = description.length > 200 \n          ? description.substring(0, 200) + \"...\" \n          : description;\n      }\n\n      // Update the article\n      const updatedArticle = await storage.updateArticle(articleId, {\n        title,\n        summary,\n        url,\n        publishedDate: new Date(publishedDate),\n      });\n\n      res.json(updatedArticle);\n    } catch (error: any) {\n      console.error(\"Error replacing article:\", error);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // POST /api/bookmarks/:articleId - Toggle bookmark for an article\n  app.post(\"/api/bookmarks/:articleId\", async (req, res) => {\n    try {\n      const articleId = req.params.articleId;\n      const isBookmarked = await storage.toggleBookmark(articleId);\n      res.json({ isBookmarked });\n    } catch (error: any) {\n      console.error(\"Error toggling bookmark:\", error);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // GET /api/bookmarks - Get all bookmarked articles\n  app.get(\"/api/bookmarks\", async (req, res) => {\n    try {\n      const bookmarkedArticles = await storage.getBookmarkedArticles();\n      res.json(bookmarkedArticles);\n    } catch (error: any) {\n      console.error(\"Error fetching bookmarks:\", error);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // GET /api/notes/:articleId - Get note for an article\n  app.get(\"/api/notes/:articleId\", async (req, res) => {\n    try {\n      const articleId = req.params.articleId;\n      const note = await storage.getNote(articleId);\n      res.json(note);\n    } catch (error: any) {\n      console.error(\"Error fetching note:\", error);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // POST /api/notes/:articleId - Save or update note for an article\n  app.post(\"/api/notes/:articleId\", async (req, res) => {\n    try {\n      const articleId = req.params.articleId;\n      const schema = z.object({\n        content: z.string(),\n      });\n\n      const { content } = schema.parse(req.body);\n      const note = await storage.saveNote(articleId, content);\n      res.json(note);\n    } catch (error: any) {\n      console.error(\"Error saving note:\", error);\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  // DELETE /api/notes/:articleId - Delete note for an article\n  app.delete(\"/api/notes/:articleId\", async (req, res) => {\n    try {\n      const articleId = req.params.articleId;\n      await storage.deleteNote(articleId);\n      res.json({ success: true });\n    } catch (error: any) {\n      console.error(\"Error deleting note:\", error);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // GET /api/stats/category?startDate=YYYY-MM-DD&endDate=YYYY-MM-DD - Get article count by category\n  app.get(\"/api/stats/category\", async (req, res) => {\n    try {\n      const startDate = req.query.startDate as string | undefined;\n      const endDate = req.query.endDate as string | undefined;\n      \n      const stats = await storage.getCategoryStats(startDate, endDate);\n      res.json(stats);\n    } catch (error: any) {\n      console.error(\"Error fetching category stats:\", error);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // GET /api/stats/date?startDate=YYYY-MM-DD&endDate=YYYY-MM-DD - Get article count by date\n  app.get(\"/api/stats/date\", async (req, res) => {\n    try {\n      const startDate = req.query.startDate as string | undefined;\n      const endDate = req.query.endDate as string | undefined;\n      \n      const stats = await storage.getDateStats(startDate, endDate);\n      res.json(stats);\n    } catch (error: any) {\n      console.error(\"Error fetching date stats:\", error);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // GET /api/stats/category-date?startDate=YYYY-MM-DD&endDate=YYYY-MM-DD - Get article count by category and date\n  app.get(\"/api/stats/category-date\", async (req, res) => {\n    try {\n      const startDate = req.query.startDate as string | undefined;\n      const endDate = req.query.endDate as string | undefined;\n      \n      const stats = await storage.getCategoryDateStats(startDate, endDate);\n      res.json(stats);\n    } catch (error: any) {\n      console.error(\"Error fetching category-date stats:\", error);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // GET /api/scheduler - Get scheduler settings\n  app.get(\"/api/scheduler\", async (req, res) => {\n    try {\n      const settings = await getSchedulerSettings();\n      res.json(settings);\n    } catch (error: any) {\n      console.error(\"Error fetching scheduler settings:\", error);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // PUT /api/scheduler - Update scheduler settings\n  app.put(\"/api/scheduler\", async (req, res) => {\n    try {\n      const schema = z.object({\n        enabled: z.boolean().optional(),\n        cronExpression: z.string().optional(),\n        deleteExisting: z.boolean().optional(),\n      });\n\n      const updates = schema.parse(req.body);\n      \n      // Validate cron expression if provided\n      if (updates.cronExpression !== undefined && !cron.validate(updates.cronExpression)) {\n        return res.status(400).json({ \n          error: `유효하지 않은 크론 표현식입니다: ${updates.cronExpression}` \n        });\n      }\n      \n      const updatedSettings = await updateSchedulerSettings(updates);\n      \n      res.json(updatedSettings);\n    } catch (error: any) {\n      console.error(\"Error updating scheduler settings:\", error);\n      \n      // Return 400 for validation errors, 500 for server errors\n      if (error.name === \"ZodError\") {\n        return res.status(400).json({ error: \"잘못된 입력 데이터입니다.\" });\n      }\n      \n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // GET /api/notifications - Get notification settings\n  app.get(\"/api/notifications\", async (req, res) => {\n    try {\n      const settings = await getNotificationSettings();\n      res.json(settings);\n    } catch (error: any) {\n      console.error(\"Error fetching notification settings:\", error);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // PUT /api/notifications - Update notification settings\n  app.put(\"/api/notifications\", async (req, res) => {\n    try {\n      const schema = z.object({\n        enabled: z.boolean().optional(),\n        emailEnabled: z.boolean().optional(),\n        emailAddress: z.string().nullable().optional(),\n        slackEnabled: z.boolean().optional(),\n        slackWebhookUrl: z.string().nullable().optional(),\n      });\n\n      const updates = schema.parse(req.body);\n      \n      // Validate email if emailEnabled is being set to true\n      if (updates.emailEnabled && !updates.emailAddress) {\n        return res.status(400).json({ \n          error: \"이메일 알림을 활성화하려면 이메일 주소를 입력해야 합니다.\" \n        });\n      }\n      \n      // Validate Slack webhook if slackEnabled is being set to true\n      if (updates.slackEnabled && !updates.slackWebhookUrl) {\n        return res.status(400).json({ \n          error: \"Slack 알림을 활성화하려면 Webhook URL을 입력해야 합니다.\" \n        });\n      }\n      \n      const updatedSettings = await updateNotificationSettings(updates);\n      \n      res.json(updatedSettings);\n    } catch (error: any) {\n      console.error(\"Error updating notification settings:\", error);\n      \n      // Return 400 for validation errors, 500 for server errors\n      if (error.name === \"ZodError\") {\n        return res.status(400).json({ error: \"잘못된 입력 데이터입니다.\" });\n      }\n      \n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // GET /api/export?startDate=YYYY-MM-DD&endDate=YYYY-MM-DD - Export articles as CSV\n  app.get(\"/api/export\", async (req, res) => {\n    try {\n      const startDate = req.query.startDate as string;\n      const endDate = req.query.endDate as string;\n\n      if (!startDate || !endDate) {\n        return res.status(400).json({ error: \"Both startDate and endDate are required\" });\n      }\n\n      const categoriesWithArticles = await storage.getArticlesForExport(startDate, endDate);\n\n      // Generate CSV content\n      const csvRows: string[] = [];\n      \n      // CSV header\n      csvRows.push(\"날짜,카테고리,제목,요약,URL\");\n\n      // Add data rows\n      for (const category of categoriesWithArticles) {\n        for (const article of category.articles) {\n          const crawledDate = new Date(article.crawledDate).toISOString().split(\"T\")[0];\n          const categoryName = `\"${category.name.replace(/\"/g, '\"\"')}\"`;\n          const title = `\"${article.title.replace(/\"/g, '\"\"')}\"`;\n          const summary = `\"${article.summary.replace(/\"/g, '\"\"')}\"`;\n          const url = `\"${article.url.replace(/\"/g, '\"\"')}\"`;\n          \n          csvRows.push(`${crawledDate},${categoryName},${title},${summary},${url}`);\n        }\n      }\n\n      const csvContent = csvRows.join(\"\\n\");\n      \n      // Set headers for CSV download\n      res.setHeader(\"Content-Type\", \"text/csv; charset=utf-8\");\n      res.setHeader(\"Content-Disposition\", `attachment; filename=\"news_export_${startDate}_${endDate}.csv\"`);\n      \n      // Add BOM for proper Korean character encoding in Excel\n      res.send(\"\\uFEFF\" + csvContent);\n    } catch (error: any) {\n      console.error(\"Error exporting articles:\", error);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n}\n","size_bytes":17750},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1202},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"server/openai.ts":{"content":"// Reference: javascript_openai blueprint\nimport OpenAI from \"openai\";\n\n// the newest OpenAI model is \"gpt-5\" which was released August 7, 2025. do not change this unless explicitly requested by the user\nconst openai = new OpenAI({ apiKey: process.env.OPENAI_API_KEY });\n\n// Select top N most important articles from a list\nexport async function selectTopImportantArticles(\n  articles: Array<{ title: string; description: string }>,\n  topN: number = 3\n): Promise<number[]> {\n  try {\n    if (!process.env.OPENAI_API_KEY) {\n      throw new Error(\"OPENAI_API_KEY가 설정되지 않았습니다.\");\n    }\n\n    if (articles.length === 0) {\n      return [];\n    }\n\n    if (articles.length <= topN) {\n      // If we have fewer articles than requested, return all indices\n      return Array.from({ length: articles.length }, (_, i) => i);\n    }\n\n    // Create a numbered list of articles for GPT\n    const articleList = articles\n      .map((article, index) => {\n        const shortTitle = article.title.substring(0, 100);\n        const shortDesc = article.description.substring(0, 150);\n        return `${index}. [제목] ${shortTitle} [본문] ${shortDesc}`;\n      })\n      .join(\"\\n\\n\");\n\n    const prompt = `다음 ${articles.length}개 뉴스 중 기업 실적·계약·투자·인사·소송 같은 비즈니스 변화가 있는 ${topN}개를 선택하세요.\n\n선택 기준:\n- 실적/공시, 계약/수주, 투자/M&A, 임원인사, 소송/제재, 특허/기술개발\n- 제외: 전시·행사·캠페인·후원·기부·CSR·인기·호평·주목\n\n기사:\n${articleList}\n\n비즈니스 변화 있는 ${topN}개 번호: [0, 1, 2]`;\n\n    console.log(`[OpenAI] Requesting top ${topN} articles from ${articles.length} articles...`);\n\n    const response = await openai.chat.completions.create({\n      model: \"gpt-5-nano\",\n      messages: [{ role: \"user\", content: prompt }],\n      max_completion_tokens: 100,\n    });\n\n    const choice = response.choices[0];\n    const content = choice?.message?.content?.trim();\n\n    if (!content) {\n      throw new Error(\"GPT 응답이 비어있습니다.\");\n    }\n\n    console.log(`[OpenAI] Raw response: ${content}`);\n\n    // Parse the response - expect format like [0, 3, 5] or 0, 3, 5\n    const match = content.match(/\\[([0-9,\\s]+)\\]/) || content.match(/^([0-9,\\s]+)$/);\n    \n    if (!match) {\n      console.warn(`[OpenAI] Could not parse response: ${content}, falling back to first ${topN} articles`);\n      return Array.from({ length: topN }, (_, i) => i);\n    }\n\n    const indices = match[1]\n      .split(',')\n      .map(s => parseInt(s.trim()))\n      .filter(n => !isNaN(n) && n >= 0 && n < articles.length)\n      .slice(0, topN);\n\n    if (indices.length === 0) {\n      console.warn(`[OpenAI] No valid indices found, falling back to first ${topN} articles`);\n      return Array.from({ length: topN }, (_, i) => i);\n    }\n\n    console.log(`[OpenAI] Selected top ${indices.length} articles: [${indices.join(', ')}]`);\n    return indices;\n  } catch (error: any) {\n    console.error(\"[OpenAI] Failed to select top articles:\", {\n      error: error.message,\n      status: error.status,\n    });\n    \n    // Fallback: return first topN articles\n    const fallbackIndices = Array.from({ length: Math.min(topN, articles.length) }, (_, i) => i);\n    console.log(`[OpenAI] Falling back to first ${fallbackIndices.length} articles`);\n    return fallbackIndices;\n  }\n}\n\n// Analyze articles for live search: remove duplicates, rank by importance, and generate summaries\nexport async function analyzeAndRankArticles(\n  articles: Array<{ title: string; description: string; link: string; pubDate: string }>\n): Promise<Array<{ title: string; description: string; link: string; pubDate: string; summary: string; importance: number }>> {\n  try {\n    if (!process.env.OPENAI_API_KEY) {\n      console.warn(\"OPENAI_API_KEY가 설정되지 않았습니다. GPT 분석을 건너뜁니다.\");\n      return articles.map(article => ({\n        ...article,\n        summary: article.description.substring(0, 150),\n        importance: 5\n      }));\n    }\n\n    if (articles.length === 0) {\n      return [];\n    }\n\n    console.log(`[OpenAI] Analyzing ${articles.length} articles for live search...`);\n\n    // Create article list for GPT\n    const articleList = articles\n      .map((article, index) => `${index}. [제목] ${article.title}\\n[설명] ${article.description.substring(0, 200)}`)\n      .join(\"\\n\\n\");\n\n    const prompt = `다음 뉴스 기사들을 분석해주세요.\n\n기사 목록:\n${articleList}\n\n다음 작업을 수행하고 JSON 형식으로 응답해주세요:\n1. 중복/유사한 기사는 하나만 남기고 제외 (같은 사건을 다룬 기사)\n2. 남은 기사들의 중요도를 1-10으로 평가 (실적/계약/투자/인사/소송 등 비즈니스 변화가 큰 기사일수록 높은 점수)\n3. 각 기사를 2-3줄로 요약\n\n응답 형식 (JSON 배열):\n[\n  {\n    \"index\": 0,\n    \"importance\": 8,\n    \"summary\": \"삼성전자가 AI 반도체 부문에서 3조원 규모의 투자를 발표했습니다. 이는 글로벌 AI 시장 경쟁력 강화를 위한 전략적 결정입니다.\"\n  },\n  ...\n]\n\n중요: 중복 제거 후 최대 20개 기사만 반환하세요.`;\n\n    const response = await openai.chat.completions.create({\n      model: \"gpt-5-nano\",\n      messages: [{ role: \"user\", content: prompt }],\n      max_completion_tokens: 3000,\n    });\n\n    const content = response.choices[0]?.message?.content?.trim();\n    \n    if (!content) {\n      throw new Error(\"GPT 응답이 비어있습니다.\");\n    }\n\n    console.log(`[OpenAI] Raw response: ${content.substring(0, 200)}...`);\n\n    // Parse JSON response\n    const jsonMatch = content.match(/\\[[\\s\\S]*\\]/);\n    if (!jsonMatch) {\n      console.warn(\"[OpenAI] Could not parse JSON, using fallback\");\n      throw new Error(\"JSON 파싱 실패\");\n    }\n\n    const analyzed = JSON.parse(jsonMatch[0]);\n    \n    // Map analyzed data back to articles\n    const results = analyzed\n      .filter((item: any) => item.index >= 0 && item.index < articles.length)\n      .map((item: any) => ({\n        ...articles[item.index],\n        summary: item.summary || articles[item.index].description.substring(0, 150),\n        importance: item.importance || 5\n      }))\n      .sort((a: any, b: any) => b.importance - a.importance); // Sort by importance\n\n    console.log(`[OpenAI] Analysis complete. ${results.length} articles after deduplication and ranking.`);\n    \n    return results;\n  } catch (error: any) {\n    console.error(\"[OpenAI] Failed to analyze articles:\", error.message);\n    \n    // Fallback: return all articles with basic summaries\n    return articles.slice(0, 20).map(article => ({\n      ...article,\n      summary: article.description.substring(0, 150),\n      importance: 5\n    }));\n  }\n}\n\nexport async function summarizeArticle(text: string): Promise<string> {\n  try {\n    // Check if API key exists\n    if (!process.env.OPENAI_API_KEY) {\n      throw new Error(\"OPENAI_API_KEY가 설정되지 않았습니다.\");\n    }\n\n    // Limit input text to avoid token limits\n    const limitedText = text.length > 3000 ? text.substring(0, 3000) + \"...\" : text;\n    \n    const prompt = `다음은 뉴스 기사 제목입니다. 제목만 보고 1-2줄로 간결하게 요약해주세요. \n    \n중요: \n- 제목만 있어도 최선을 다해 요약하세요\n- \"본문이 필요합니다\" 같은 메타 메시지는 절대 하지 마세요\n- 제목의 핵심 내용을 그대로 간결하게 정리해주세요\n\n제목: ${limitedText}`;\n\n    console.log(`[OpenAI] Requesting summary for text (${limitedText.length} chars)...`);\n    \n    const response = await openai.chat.completions.create({\n      model: \"gpt-5-nano\",\n      messages: [{ role: \"user\", content: prompt }],\n      max_completion_tokens: 500,\n    });\n\n    const choice = response.choices[0];\n    const summary = choice?.message?.content;\n    \n    // Check for truncation\n    if (choice?.finish_reason === \"length\") {\n      console.warn(\"[OpenAI] Response was truncated (finish_reason: length)\");\n      // Still use the truncated summary if available\n      if (summary) {\n        console.log(`[OpenAI] Using truncated summary (${summary.length} chars)`);\n        return summary.trim();\n      }\n    }\n    \n    if (!summary || summary.trim().length === 0) {\n      console.error(\"[OpenAI] No summary in response:\", {\n        finish_reason: choice?.finish_reason,\n        has_content: !!summary,\n        content_length: summary?.length || 0,\n      });\n      throw new Error(\"응답에 요약 내용이 없습니다.\");\n    }\n\n    // Check if GPT returned a meta-message refusing to summarize\n    const metaMessagePatterns = [\n      \"기사 본문\",\n      \"링크를 보내주시면\",\n      \"제목만으로\",\n      \"정확한 요약이 어렵\",\n      \"더 자세한 내용\",\n      \"전체 내용을\"\n    ];\n    \n    const hasMetaMessage = metaMessagePatterns.some(pattern => \n      summary.includes(pattern)\n    );\n    \n    if (hasMetaMessage) {\n      console.warn(\"[OpenAI] GPT refused to summarize (meta-message detected)\");\n      throw new Error(\"GPT가 요약을 거부했습니다 (메타 메시지 감지)\");\n    }\n\n    console.log(`[OpenAI] Summary generated successfully (${summary.length} chars, finish_reason: ${choice?.finish_reason})`);\n    return summary.trim();\n  } catch (error: any) {\n    console.error(\"[OpenAI] Failed to summarize article:\", {\n      error: error.message,\n      status: error.status,\n      code: error.code,\n      type: error.type,\n    });\n    \n    // Provide more specific error messages\n    if (error.code === \"invalid_api_key\") {\n      throw new Error(\"OpenAI API 키가 유효하지 않습니다. 키를 확인해주세요.\");\n    } else if (error.code === \"insufficient_quota\") {\n      throw new Error(\"OpenAI API 할당량이 부족합니다.\");\n    } else if (error.status === 404) {\n      throw new Error(\"GPT-5 모델을 찾을 수 없습니다. GPT-4o로 변경을 권장합니다.\");\n    } else if (error.message) {\n      throw new Error(`기사 요약 실패: ${error.message}`);\n    } else {\n      throw new Error(\"기사 요약 중 알 수 없는 오류가 발생했습니다.\");\n    }\n  }\n}\n","size_bytes":10179},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"server/seed.ts":{"content":"import { storage } from \"./storage\";\nimport { db } from \"./db\";\nimport { categories, keywords } from \"@shared/schema\";\n\n// Initial category and keyword data\nconst initialData = [\n  {\n    name: \"자사뉴스\",\n    displayOrder: 1,\n    keywords: [\"그래디언트\", \"아이마켓코리아\", \"아이마켓\"],\n  },\n  {\n    name: \"경쟁사\",\n    displayOrder: 2,\n    keywords: [\"KeP\", \"서브원\", \"엔투비\", \"코리아이플랫폼\", \"행복나래\"],\n  },\n  {\n    name: \"삼성고객사\",\n    displayOrder: 3,\n    keywords: [\n      \"삼성SDC\", \"삼성SDI\", \"삼성E&A\", \"삼성디스플레이\", \"삼성물산\",\n      \"삼성바이오로직스\", \"삼성바이오에피스\", \"삼성생명\", \"삼성에스디아이\",\n      \"삼성에스디에스\", \"삼성엔지니어링\", \"삼성이앤에이\", \"삼성전기\",\n      \"삼성전자\", \"삼성중공업\", \"삼성증권\", \"삼성카드\", \"삼성화재\",\n      \"에버랜드\", \"에스원\", \"웰스토리\", \"제일기획\", \"호텔신라\"\n    ],\n  },\n  {\n    name: \"전략고객사\",\n    displayOrder: 4,\n    keywords: [\n      \"HC컴퍼니\", \"KPX케미칼\", \"TKG휴켐스\", \"YKsteel\", \"s-tec\", \"그린케미칼\",\n      \"농심\", \"대한전선\", \"대한제강\", \"대한제당\", \"디아이지에어가스\",\n      \"롯데칠성\", \"롯데케미칼\", \"르노삼성\", \"르노자동차\", \"르노코리아\",\n      \"매일유업\", \"메가마트\", \"벽산\", \"세방전지\", \"스템코\", \"에스텍시스템\",\n      \"에이치씨컴퍼니\", \"에코프로\", \"엘오케이\", \"와이케이스틸\", \"우리은행\",\n      \"유신정밀공업\", \"케이피엑스케미칼\", \"코스맥스\", \"코웨이\", \"태광산업\",\n      \"태양\", \"티케이지휴켐스\", \"한국철강\", \"한라시멘트\", \"해성디에스\",\n      \"홈플러스\", \"효성굿스프링스\", \"효성전기\"\n    ],\n  },\n  {\n    name: \"시황\",\n    displayOrder: 5,\n    keywords: [\"PMI\", \"유가\", \"환율\"],\n  },\n];\n\nexport async function seedDatabase() {\n  console.log(\"Checking if database needs seeding...\");\n\n  // Check if categories already exist\n  const existingCategories = await storage.getCategories();\n  \n  if (existingCategories.length > 0) {\n    console.log(\"Database already seeded, skipping...\");\n    return;\n  }\n\n  console.log(\"Seeding database with initial data...\");\n\n  for (const categoryData of initialData) {\n    // Create category\n    const category = await storage.createCategory({\n      name: categoryData.name,\n      displayOrder: categoryData.displayOrder,\n    });\n\n    console.log(`Created category: ${category.name}`);\n\n    // Add keywords\n    await storage.updateKeywordsByCategory(category.id, categoryData.keywords);\n    console.log(`  Added ${categoryData.keywords.length} keywords`);\n  }\n\n  console.log(\"Database seeding completed!\");\n}\n","size_bytes":2758},"client/src/components/confirm-dialog.tsx":{"content":"import {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\n\ninterface ConfirmDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  title: string;\n  description: string;\n  onConfirm: () => void;\n  onCancel?: () => void;\n  confirmText?: string;\n  cancelText?: string;\n  variant?: \"default\" | \"destructive\";\n}\n\nexport function ConfirmDialog({\n  open,\n  onOpenChange,\n  title,\n  description,\n  onConfirm,\n  onCancel,\n  confirmText = \"확인\",\n  cancelText = \"취소\",\n  variant = \"default\",\n}: ConfirmDialogProps) {\n  const handleCancel = () => {\n    onOpenChange(false);\n    onCancel?.();\n  };\n\n  const handleConfirm = () => {\n    onConfirm();\n  };\n\n  return (\n    <AlertDialog open={open} onOpenChange={onOpenChange}>\n      <AlertDialogContent>\n        <AlertDialogHeader>\n          <AlertDialogTitle>{title}</AlertDialogTitle>\n          <AlertDialogDescription>{description}</AlertDialogDescription>\n        </AlertDialogHeader>\n        <AlertDialogFooter>\n          <AlertDialogCancel onClick={handleCancel}>\n            {cancelText}\n          </AlertDialogCancel>\n          <AlertDialogAction\n            onClick={handleConfirm}\n            className={\n              variant === \"destructive\"\n                ? \"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n                : \"\"\n            }\n          >\n            {confirmText}\n          </AlertDialogAction>\n        </AlertDialogFooter>\n      </AlertDialogContent>\n    </AlertDialog>\n  );\n}\n","size_bytes":1644},"replit.md":{"content":"# 뉴스 아카이브 - News Crawler Archive System\n\n## Overview\nThis application is a news crawling and archiving system that leverages Naver Search API to collect the most representative news articles based on keywords and OpenAI GPT-5 for automatic summarization. The collected news is archived by date for easy retrieval. The system aims to provide a streamlined way for businesses to monitor news related to their company, competitors, clients, and market trends, offering insights through summarized articles, statistical dashboards, and efficient search capabilities.\n\n## User Preferences\n- I prefer simple language.\n- I want iterative development.\n- Ask before making major changes.\n- Do not make changes to the folder `Z`.\n- Do not make changes to the file `Y`.\n\n## System Architecture\n\n### UI/UX Decisions\nThe design emphasizes a monochrome, modern aesthetic with a dark mode default, though a light mode is available. Key UI elements include a slide-out management panel with smooth animations, date-based dropdown filters, and a responsive layout for various devices. Typography uses \"Inter\" for primary text and \"JetBrains Mono\" for technical data.\n\n### Technical Implementations\n- **News Crawling**: Utilizes Naver Search API to fetch articles published within the last 3 days. It selects the single most representative article per keyword using a string similarity analysis. GPT-5 API is used to generate 1-2 sentence summaries. HTML entity decoding and title sanitization (removing brackets and news agency names) are performed.\n- **Category System**: Organizes news into five predefined categories: \"자사뉴스\" (Own Company News), \"경쟁사\" (Competitors), \"삼성고객사\" (Samsung Clients), \"전략고객사\" (Strategic Clients), and \"시황\" (Market Conditions).\n- **Search Functionality**: Supports two modes:\n    - **Archive Search**: Searches stored articles by client/keyword with date range and category filtering, displayed in a timeline view.\n    - **Real-time Search**: Directly calls Naver Search API for live news within the last month, automatically removing duplicates (70% similarity threshold), sorted by recency.\n- **Management Features**: Includes manual crawling initiation with real-time progress display, keyword management (add/edit/delete per category), selective article deletion, date-based archive deletion, bookmarking with personal notes, CSV export, and a statistical dashboard. Automated crawling via a scheduler and notifications (email/Slack) are also supported.\n- **Article Replacement**: When auto-selected articles are unsatisfactory, users can manually replace them by viewing alternative articles from the same keyword search. The system stores the keyword used for each article crawl, enabling accurate alternative article retrieval. Selected alternatives are automatically summarized by GPT-5 before replacement.\n\n### System Design Choices\n- **Frontend**: Built with React, TypeScript, Wouter for routing, TanStack Query for data fetching, Tailwind CSS with Shadcn UI for styling, and Framer Motion for animations.\n- **Backend**: Implemented with Express.js and TypeScript.\n- **Database**: PostgreSQL (Neon) with Drizzle ORM.\n- **Real-time Updates**: WebSocket is used to track and display real-time crawling progress.\n\n## External Dependencies\n- **Naver Search API**: Official API for news article crawling.\n- **OpenAI GPT-5 API**: Used for automatic news summarization.\n- **PostgreSQL (Neon)**: Database for storing articles, keywords, and system configurations.\n- **node-cron**: For scheduling automated crawling tasks.\n- **WebSocket**: For real-time communication regarding crawling progress.\n- **String Similarity Library**: Used for analyzing and selecting representative articles.\n- **Recharts**: For data visualization in the statistics dashboard.\n- **date-fns**: For date manipulation and formatting.","size_bytes":3871},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"shared/schema.ts":{"content":"import { sql } from \"drizzle-orm\";\nimport { pgTable, text, varchar, timestamp, integer, boolean } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\nimport { relations } from \"drizzle-orm\";\n\n// Categories table\nexport const categories = pgTable(\"categories\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: text(\"name\").notNull().unique(),\n  displayOrder: integer(\"display_order\").notNull(),\n});\n\n// Keywords table - stores keywords for each category\nexport const keywords = pgTable(\"keywords\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  categoryId: varchar(\"category_id\").notNull().references(() => categories.id, { onDelete: \"cascade\" }),\n  keyword: text(\"keyword\").notNull(),\n});\n\n// Articles table - stores crawled and summarized articles\nexport const articles = pgTable(\"articles\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  categoryId: varchar(\"category_id\").notNull().references(() => categories.id, { onDelete: \"cascade\" }),\n  keyword: text(\"keyword\"), // Which keyword this article was crawled with (nullable for existing articles)\n  title: text(\"title\").notNull(),\n  summary: text(\"summary\").notNull(),\n  url: text(\"url\").notNull(),\n  publishedDate: timestamp(\"published_date\").notNull(),\n  crawledDate: timestamp(\"crawled_date\").notNull().defaultNow(),\n});\n\n// Bookmarks table - tracks bookmarked articles\nexport const bookmarks = pgTable(\"bookmarks\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  articleId: varchar(\"article_id\").notNull().references(() => articles.id, { onDelete: \"cascade\" }),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\n// Notes table - stores notes for articles\nexport const notes = pgTable(\"notes\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  articleId: varchar(\"article_id\").notNull().references(() => articles.id, { onDelete: \"cascade\" }),\n  content: text(\"content\").notNull(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\n// Scheduler settings table - stores crawling schedule configuration\nexport const schedulerSettings = pgTable(\"scheduler_settings\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  enabled: boolean(\"enabled\").notNull().default(false),\n  cronExpression: text(\"cron_expression\").notNull().default(\"0 9 * * *\"), // Default: 9 AM daily\n  deleteExisting: boolean(\"delete_existing\").notNull().default(false),\n  lastRun: timestamp(\"last_run\"),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\n// Notification settings table - stores notification configuration\nexport const notificationSettings = pgTable(\"notification_settings\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  enabled: boolean(\"enabled\").notNull().default(false),\n  emailEnabled: boolean(\"email_enabled\").notNull().default(false),\n  emailAddress: text(\"email_address\"),\n  slackEnabled: boolean(\"slack_enabled\").notNull().default(false),\n  slackWebhookUrl: text(\"slack_webhook_url\"),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\n// Relations\nexport const categoriesRelations = relations(categories, ({ many }) => ({\n  keywords: many(keywords),\n  articles: many(articles),\n}));\n\nexport const keywordsRelations = relations(keywords, ({ one }) => ({\n  category: one(categories, {\n    fields: [keywords.categoryId],\n    references: [categories.id],\n  }),\n}));\n\nexport const articlesRelations = relations(articles, ({ one, many }) => ({\n  category: one(categories, {\n    fields: [articles.categoryId],\n    references: [categories.id],\n  }),\n  bookmark: one(bookmarks, {\n    fields: [articles.id],\n    references: [bookmarks.articleId],\n  }),\n  note: one(notes, {\n    fields: [articles.id],\n    references: [notes.articleId],\n  }),\n}));\n\nexport const bookmarksRelations = relations(bookmarks, ({ one }) => ({\n  article: one(articles, {\n    fields: [bookmarks.articleId],\n    references: [articles.id],\n  }),\n}));\n\nexport const notesRelations = relations(notes, ({ one }) => ({\n  article: one(articles, {\n    fields: [notes.articleId],\n    references: [articles.id],\n  }),\n}));\n\n// Insert schemas\nexport const insertCategorySchema = createInsertSchema(categories).omit({\n  id: true,\n});\n\nexport const insertKeywordSchema = createInsertSchema(keywords).omit({\n  id: true,\n});\n\nexport const insertArticleSchema = createInsertSchema(articles).omit({\n  id: true,\n  crawledDate: true,\n});\n\nexport const insertBookmarkSchema = createInsertSchema(bookmarks).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertNoteSchema = createInsertSchema(notes).omit({\n  id: true,\n  updatedAt: true,\n});\n\nexport const insertSchedulerSettingsSchema = createInsertSchema(schedulerSettings).omit({\n  id: true,\n  updatedAt: true,\n});\n\nexport const insertNotificationSettingsSchema = createInsertSchema(notificationSettings).omit({\n  id: true,\n  updatedAt: true,\n});\n\n// Types\nexport type InsertCategory = z.infer<typeof insertCategorySchema>;\nexport type Category = typeof categories.$inferSelect;\n\nexport type InsertKeyword = z.infer<typeof insertKeywordSchema>;\nexport type Keyword = typeof keywords.$inferSelect;\n\nexport type InsertArticle = z.infer<typeof insertArticleSchema>;\nexport type Article = typeof articles.$inferSelect;\n\nexport type InsertBookmark = z.infer<typeof insertBookmarkSchema>;\nexport type Bookmark = typeof bookmarks.$inferSelect;\n\nexport type InsertNote = z.infer<typeof insertNoteSchema>;\nexport type Note = typeof notes.$inferSelect;\n\nexport type InsertSchedulerSettings = z.infer<typeof insertSchedulerSettingsSchema>;\nexport type SchedulerSettings = typeof schedulerSettings.$inferSelect;\n\nexport type InsertNotificationSettings = z.infer<typeof insertNotificationSettingsSchema>;\nexport type NotificationSettings = typeof notificationSettings.$inferSelect;\n\n// Extended types for UI\nexport type CategoryWithKeywords = Category & {\n  keywords: Keyword[];\n};\n\nexport type ArticleWithMetadata = Article & {\n  bookmark?: Bookmark | null;\n  note?: Note | null;\n  isBookmarked?: boolean;\n};\n\nexport type CategoryWithArticles = Category & {\n  articles: ArticleWithMetadata[];\n};\n\nexport type ArticlesByDate = {\n  date: string;\n  categories: {\n    category: Category;\n    articles: ArticleWithMetadata[];\n  }[];\n};\n\n// Statistics types\nexport type CategoryStats = {\n  categoryId: string;\n  categoryName: string;\n  count: number;\n};\n\nexport type DateStats = {\n  date: string;\n  count: number;\n};\n\nexport type CategoryDateStats = {\n  categoryId: string;\n  categoryName: string;\n  stats: DateStats[];\n};\n","size_bytes":6629},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","size_bytes":1904},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/export-dialog.tsx":{"content":"import { useState } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Label } from \"@/components/ui/label\";\nimport { DateRangePicker } from \"@/components/ui/date-range-picker\";\nimport { Download, Loader2 } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { DateRange } from \"react-day-picker\";\nimport { format } from \"date-fns\";\n\ninterface ExportDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n}\n\nexport function ExportDialog({ open, onOpenChange }: ExportDialogProps) {\n  const [dateRange, setDateRange] = useState<DateRange | undefined>();\n  const [isExporting, setIsExporting] = useState(false);\n  const { toast } = useToast();\n\n  const handleExport = async () => {\n    if (!dateRange?.from || !dateRange?.to) {\n      toast({\n        title: \"날짜 선택 필요\",\n        description: \"시작 날짜와 종료 날짜를 모두 선택해주세요.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    try {\n      setIsExporting(true);\n      \n      const startDate = format(dateRange.from, \"yyyy-MM-dd\");\n      const endDate = format(dateRange.to, \"yyyy-MM-dd\");\n      \n      const url = `/api/export?startDate=${startDate}&endDate=${endDate}`;\n      const response = await fetch(url, {\n        credentials: \"include\",\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Export failed\");\n      }\n\n      const blob = await response.blob();\n      const downloadUrl = window.URL.createObjectURL(blob);\n      const a = document.createElement(\"a\");\n      a.href = downloadUrl;\n      a.download = `news_export_${startDate}_${endDate}.csv`;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      window.URL.revokeObjectURL(downloadUrl);\n\n      toast({\n        title: \"내보내기 완료\",\n        description: \"CSV 파일이 다운로드되었습니다.\",\n      });\n      \n      onOpenChange(false);\n      setDateRange(undefined);\n    } catch (error: any) {\n      console.error(\"Export failed:\", error);\n      toast({\n        title: \"내보내기 실패\",\n        description: error.message || \"CSV 내보내기 중 오류가 발생했습니다.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsExporting(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent data-testid=\"dialog-export\">\n        <DialogHeader>\n          <DialogTitle data-testid=\"text-export-title\">CSV 내보내기</DialogTitle>\n          <DialogDescription>\n            내보낼 기사의 날짜 범위를 선택하세요.\n          </DialogDescription>\n        </DialogHeader>\n        \n        <div className=\"grid gap-4 py-4\">\n          <div className=\"grid gap-2\">\n            <Label>날짜 범위</Label>\n            <DateRangePicker\n              date={dateRange}\n              onDateChange={setDateRange}\n            />\n          </div>\n        </div>\n\n        <DialogFooter>\n          <Button\n            variant=\"outline\"\n            onClick={() => onOpenChange(false)}\n            disabled={isExporting}\n            data-testid=\"button-cancel-export\"\n          >\n            취소\n          </Button>\n          <Button\n            onClick={handleExport}\n            disabled={isExporting}\n            data-testid=\"button-confirm-export\"\n          >\n            {isExporting ? (\n              <>\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                내보내는 중...\n              </>\n            ) : (\n              <>\n                <Download className=\"mr-2 h-4 w-4\" />\n                내보내기\n              </>\n            )}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":3877},"client/src/components/article-card.tsx":{"content":"import { ArticleWithMetadata } from \"@shared/schema\";\nimport { ExternalLink, RefreshCcw } from \"lucide-react\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Button } from \"@/components/ui/button\";\nimport { useState } from \"react\";\nimport { AlternativeArticlesDialog } from \"./alternative-articles-dialog\";\n\ninterface ArticleCardProps {\n  article: ArticleWithMetadata;\n  deleteMode: boolean;\n  isSelected: boolean;\n  onToggleSelect: () => void;\n  showBorder: boolean;\n}\n\nexport function ArticleCard({\n  article,\n  deleteMode,\n  isSelected,\n  onToggleSelect,\n  showBorder,\n}: ArticleCardProps) {\n  const [showAlternatives, setShowAlternatives] = useState(false);\n\n  return (\n    <>\n      <div\n        className={`flex items-start gap-4 py-4 hover-elevate ${\n          showBorder ? \"border-b border-border\" : \"\"\n        }`}\n        data-testid={`card-article-${article.id}`}\n      >\n        {/* Checkbox (only visible in delete mode) */}\n        {deleteMode && (\n          <div className=\"pt-1\">\n            <Checkbox\n              checked={isSelected}\n              onCheckedChange={onToggleSelect}\n              data-testid={`checkbox-article-${article.id}`}\n            />\n          </div>\n        )}\n\n        {/* Article Content */}\n        <div className=\"flex-1 min-w-0 space-y-2\">\n          {/* Title */}\n          <a\n            href={article.url}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"group inline-flex items-center gap-2 font-medium leading-tight hover:underline\"\n            data-testid={`link-article-${article.id}`}\n          >\n            <span className=\"break-words\">{article.title}</span>\n            <ExternalLink className=\"h-3.5 w-3.5 flex-shrink-0 text-muted-foreground group-hover:text-foreground transition-colors\" />\n          </a>\n\n          {/* Summary (only if exists and not empty) */}\n          {article.summary && article.summary.trim() && (\n            <p className=\"text-sm leading-relaxed text-muted-foreground\">\n              {article.summary}\n            </p>\n          )}\n        </div>\n\n        {/* Replace Article Button */}\n        {!deleteMode && (\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={() => setShowAlternatives(true)}\n            data-testid={`button-replace-${article.id}`}\n          >\n            <RefreshCcw className=\"h-4 w-4 mr-2\" />\n            다른 기사 보기\n          </Button>\n        )}\n      </div>\n\n      <AlternativeArticlesDialog\n        articleId={article.id}\n        open={showAlternatives}\n        onOpenChange={setShowAlternatives}\n      />\n    </>\n  );\n}\n","size_bytes":2637},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"server/notifier.ts":{"content":"import { db } from \"./db\";\nimport { notificationSettings, type Article, type Category } from \"@shared/schema\";\nimport { eq } from \"drizzle-orm\";\n\n// Get notification settings (create default if not exists)\nexport async function getNotificationSettings() {\n  const settings = await db.select().from(notificationSettings).limit(1);\n  \n  if (settings.length === 0) {\n    // Create default settings\n    const [defaultSettings] = await db.insert(notificationSettings).values({\n      enabled: false,\n      emailEnabled: false,\n      slackEnabled: false,\n    }).returning();\n    return defaultSettings;\n  }\n  \n  return settings[0];\n}\n\n// Update notification settings\nexport async function updateNotificationSettings(updates: Partial<{\n  enabled: boolean;\n  emailEnabled: boolean;\n  emailAddress: string | null;\n  slackEnabled: boolean;\n  slackWebhookUrl: string | null;\n}>) {\n  const existing = await getNotificationSettings();\n  \n  const [updated] = await db\n    .update(notificationSettings)\n    .set({\n      ...updates,\n      updatedAt: new Date(),\n    })\n    .where(eq(notificationSettings.id, existing.id))\n    .returning();\n  \n  return updated;\n}\n\n// Send notification about new articles\nexport async function sendNotification(articles: Array<Article & { category: Category }>) {\n  if (articles.length === 0) {\n    return;\n  }\n  \n  const settings = await getNotificationSettings();\n  \n  if (!settings.enabled) {\n    console.log(\"[Notifier] Notifications disabled, skipping\");\n    return;\n  }\n  \n  const message = buildNotificationMessage(articles);\n  \n  // Send email notification\n  if (settings.emailEnabled && settings.emailAddress) {\n    await sendEmailNotification(settings.emailAddress, message);\n  }\n  \n  // Send Slack notification\n  if (settings.slackEnabled && settings.slackWebhookUrl) {\n    await sendSlackNotification(settings.slackWebhookUrl, message);\n  }\n}\n\n// Build notification message\nfunction buildNotificationMessage(articles: Array<Article & { category: Category }>): {\n  subject: string;\n  text: string;\n  html: string;\n} {\n  const date = new Date().toLocaleDateString('ko-KR');\n  const subject = `[뉴스 크롤러] ${articles.length}개의 새 기사가 수집되었습니다 (${date})`;\n  \n  // Group articles by category\n  const articlesByCategory = articles.reduce((acc, article) => {\n    const catName = article.category.name;\n    if (!acc[catName]) {\n      acc[catName] = [];\n    }\n    acc[catName].push(article);\n    return acc;\n  }, {} as Record<string, typeof articles>);\n  \n  // Build text version\n  let text = `${subject}\\n\\n`;\n  for (const [catName, catArticles] of Object.entries(articlesByCategory)) {\n    text += `━━━ ${catName} (${catArticles.length}개) ━━━\\n\\n`;\n    catArticles.forEach((article, idx) => {\n      text += `${idx + 1}. ${article.title}\\n`;\n      text += `   요약: ${article.summary}\\n`;\n      text += `   링크: ${article.url}\\n\\n`;\n    });\n  }\n  \n  // Build HTML version\n  let html = `\n    <div style=\"font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif; max-width: 800px; margin: 0 auto; padding: 20px;\">\n      <h1 style=\"color: #1a1a1a; border-bottom: 2px solid #e5e5e5; padding-bottom: 10px;\">\n        ${subject}\n      </h1>\n  `;\n  \n  for (const [catName, catArticles] of Object.entries(articlesByCategory)) {\n    html += `\n      <div style=\"margin: 30px 0;\">\n        <h2 style=\"color: #333; background: #f5f5f5; padding: 10px; border-left: 4px solid #666;\">\n          ${catName} (${catArticles.length}개)\n        </h2>\n    `;\n    \n    catArticles.forEach((article, idx) => {\n      html += `\n        <div style=\"margin: 15px 0; padding: 15px; background: #fafafa; border-radius: 5px;\">\n          <h3 style=\"color: #1a1a1a; margin: 0 0 10px 0;\">\n            ${idx + 1}. ${article.title}\n          </h3>\n          <p style=\"color: #666; margin: 5px 0; line-height: 1.6;\">\n            ${article.summary}\n          </p>\n          <p style=\"margin: 10px 0 0 0;\">\n            <a href=\"${article.url}\" style=\"color: #0066cc; text-decoration: none;\">\n              기사 원문 보기 →\n            </a>\n          </p>\n        </div>\n      `;\n    });\n    \n    html += `</div>`;\n  }\n  \n  html += `\n      <hr style=\"margin: 30px 0; border: none; border-top: 1px solid #e5e5e5;\" />\n      <p style=\"color: #999; font-size: 12px; text-align: center;\">\n        뉴스 크롤러 자동 알림 | ${new Date().toLocaleString('ko-KR')}\n      </p>\n    </div>\n  `;\n  \n  return { subject, text, html };\n}\n\n// Send email notification\nasync function sendEmailNotification(emailAddress: string, message: { subject: string; text: string; html: string }) {\n  try {\n    console.log(`[Notifier] Sending email notification to ${emailAddress}`);\n    console.log(`[Notifier] Email functionality requires SMTP configuration`);\n    console.log(`[Notifier] Subject: ${message.subject}`);\n    \n    // Note: Email sending requires SMTP configuration or email service API\n    // Users need to configure their own email service (e.g., SendGrid, AWS SES, SMTP)\n    // For now, just log the notification\n    \n    // Example with nodemailer (would need to be installed and configured):\n    // const transporter = nodemailer.createTransport({...});\n    // await transporter.sendMail({\n    //   from: 'noreply@newscrawler.com',\n    //   to: emailAddress,\n    //   subject: message.subject,\n    //   text: message.text,\n    //   html: message.html,\n    // });\n    \n    console.log(\"[Notifier] Email logged (SMTP not configured)\");\n  } catch (error) {\n    console.error(\"[Notifier] Failed to send email:\", error);\n  }\n}\n\n// Send Slack notification\nasync function sendSlackNotification(webhookUrl: string, message: { subject: string; text: string }) {\n  try {\n    console.log(`[Notifier] Sending Slack notification`);\n    \n    const response = await fetch(webhookUrl, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        text: message.subject,\n        blocks: [\n          {\n            type: \"header\",\n            text: {\n              type: \"plain_text\",\n              text: message.subject,\n            },\n          },\n          {\n            type: \"section\",\n            text: {\n              type: \"mrkdwn\",\n              text: message.text.substring(0, 2900), // Slack has 3000 char limit\n            },\n          },\n        ],\n      }),\n    });\n    \n    if (response.ok) {\n      console.log(\"[Notifier] Slack notification sent successfully\");\n    } else {\n      console.error(\"[Notifier] Slack notification failed:\", await response.text());\n    }\n  } catch (error) {\n    console.error(\"[Notifier] Failed to send Slack notification:\", error);\n  }\n}\n","size_bytes":6675},"client/src/components/management-panel.tsx":{"content":"import { useState } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport {\n  X,\n  Play,\n  Settings,\n  Trash2,\n  Archive,\n  Loader2,\n  Download,\n  Clock,\n  Bell,\n  BarChart3,\n} from \"lucide-react\";\nimport { Link } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { ConfirmDialog } from \"@/components/confirm-dialog\";\nimport { KeywordManager } from \"@/components/keyword-manager\";\nimport { ExportDialog } from \"@/components/export-dialog\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { SchedulerSettingsComponent } from \"@/components/scheduler-settings\";\nimport { NotificationSettingsComponent } from \"@/components/notification-settings\";\nimport { CrawlProgressDialog } from \"@/components/crawl-progress-dialog\";\nimport { format } from \"date-fns\";\n\ninterface ManagementPanelProps {\n  isOpen: boolean;\n  onClose: () => void;\n  deleteMode: boolean;\n  setDeleteMode: (mode: boolean) => void;\n  selectedDate?: Date;\n}\n\nexport function ManagementPanel({\n  isOpen,\n  onClose,\n  deleteMode,\n  setDeleteMode,\n  selectedDate: selectedDateProp,\n}: ManagementPanelProps) {\n  // Format selected date for archive deletion\n  const selectedDate = selectedDateProp ? format(selectedDateProp, \"yyyy-MM-dd\") : \"\";\n  const [showAdvancedSettings, setShowAdvancedSettings] = useState(false);\n  const [showConfirmCrawl, setShowConfirmCrawl] = useState(false);\n  const [showConfirmArchiveDelete, setShowConfirmArchiveDelete] = useState(false);\n  const [showKeywordManager, setShowKeywordManager] = useState(false);\n  const [showExportDialog, setShowExportDialog] = useState(false);\n  const [showSchedulerSettings, setShowSchedulerSettings] = useState(false);\n  const [showNotificationSettings, setShowNotificationSettings] = useState(false);\n  const [showCrawlProgress, setShowCrawlProgress] = useState(false);\n  const [isCrawling, setIsCrawling] = useState(false); // 크롤링 진행 중인지 추적\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  // Start crawling mutation\n  const crawlMutation = useMutation({\n    mutationFn: async (deleteExisting: boolean) => {\n      return await apiRequest(\"POST\", \"/api/crawl\", { deleteExisting });\n    },\n    onSuccess: () => {\n      // Don't show toast here - progress dialog will show completion\n      // Just invalidate queries\n      queryClient.invalidateQueries({ queryKey: [\"/api/articles\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/articles/dates\"] });\n      setShowConfirmCrawl(false);\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"크롤링 실패\",\n        description: error.message || \"크롤링 중 오류가 발생했습니다.\",\n        variant: \"destructive\",\n      });\n      setShowCrawlProgress(false);\n      setIsCrawling(false);\n    },\n  });\n\n  // Delete archive mutation\n  const deleteArchiveMutation = useMutation({\n    mutationFn: async (date: string) => {\n      return await apiRequest(\"DELETE\", `/api/articles/date/${date}`, null);\n    },\n    onSuccess: () => {\n      toast({\n        title: \"아카이브 삭제 완료\",\n        description: \"선택한 날짜의 아카이브가 삭제되었습니다.\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/articles\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/articles/dates\"] });\n      setShowConfirmArchiveDelete(false);\n      onClose();\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"삭제 실패\",\n        description: error.message || \"아카이브 삭제 중 오류가 발생했습니다.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleStartCrawl = async () => {\n    // Check if articles exist for today\n    const today = new Date().toISOString().split(\"T\")[0];\n    \n    try {\n      const response = await fetch(`/api/articles?date=${today}`);\n      const categories = await response.json();\n      \n      // Check if any category has articles\n      const hasArticles = categories.some((cat: any) => cat.articles && cat.articles.length > 0);\n      \n      if (hasArticles) {\n        setShowConfirmCrawl(true);\n      } else {\n        // Show progress dialog and start crawling\n        setShowCrawlProgress(true);\n        setIsCrawling(true);\n        // Wait a bit for WebSocket to connect before starting crawl\n        setTimeout(() => {\n          crawlMutation.mutate(false);\n        }, 500);\n      }\n    } catch (error) {\n      console.error(\"Failed to check existing articles:\", error);\n      // If check fails, just proceed without confirmation\n      setShowCrawlProgress(true);\n      setIsCrawling(true);\n      // Wait a bit for WebSocket to connect before starting crawl\n      setTimeout(() => {\n        crawlMutation.mutate(false);\n      }, 500);\n    }\n  };\n\n  const handleConfirmCrawl = (deleteExisting: boolean) => {\n    setShowCrawlProgress(true);\n    setIsCrawling(true);\n    // Wait a bit for WebSocket to connect before starting crawl\n    setTimeout(() => {\n      crawlMutation.mutate(deleteExisting);\n    }, 500);\n  };\n\n  const handleCrawlProgressComplete = () => {\n    setShowCrawlProgress(false);\n    setIsCrawling(false);\n    toast({\n      title: \"크롤링 완료\",\n      description: \"뉴스 크롤링이 성공적으로 완료되었습니다.\",\n    });\n    onClose();\n  };\n\n  const handleMinimizeCrawlProgress = () => {\n    setShowCrawlProgress(false);\n    // isCrawling은 true로 유지하여 배지가 표시되도록\n  };\n\n  const handleShowCrawlProgress = () => {\n    setShowCrawlProgress(true);\n  };\n\n  const handleToggleDeleteMode = () => {\n    setDeleteMode(!deleteMode);\n    if (!deleteMode) {\n      toast({\n        title: \"기사 선택 모드\",\n        description: \"삭제할 기사를 선택하세요.\",\n      });\n    }\n    onClose();\n  };\n\n  return (\n    <>\n      {/* 크롤링 진행 중 배지 (최소화 상태일 때만 표시) */}\n      {isCrawling && !showCrawlProgress && (\n        <motion.div\n          initial={{ y: 100, opacity: 0 }}\n          animate={{ y: 0, opacity: 1 }}\n          exit={{ y: 100, opacity: 0 }}\n          className=\"fixed bottom-6 right-6 z-50\"\n        >\n          <Button\n            onClick={handleShowCrawlProgress}\n            className=\"shadow-lg gap-2\"\n            size=\"lg\"\n            data-testid=\"button-show-crawl-progress\"\n          >\n            <Loader2 className=\"h-4 w-4 animate-spin\" />\n            크롤링 진행 중...\n          </Button>\n        </motion.div>\n      )}\n\n      <AnimatePresence>\n        {isOpen && (\n          <>\n            {/* Backdrop */}\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              transition={{ duration: 0.3 }}\n              className=\"fixed inset-0 z-40 bg-black/20\"\n              onClick={onClose}\n            />\n\n            {/* Panel */}\n            <motion.div\n              initial={{ x: \"100%\" }}\n              animate={{ x: 0 }}\n              exit={{ x: \"100%\" }}\n              transition={{ duration: 0.3, ease: \"easeOut\" }}\n              className=\"fixed right-0 top-0 z-50 h-screen w-80 bg-card border-l border-card-border shadow-2xl\"\n            >\n              {/* Panel Header */}\n              <div className=\"flex items-center justify-between border-b border-card-border px-6 py-4\">\n                <h2 className=\"text-lg font-medium\" data-testid=\"text-management-title\">\n                  메뉴\n                </h2>\n                <Button\n                  variant=\"ghost\"\n                  size=\"icon\"\n                  onClick={onClose}\n                  data-testid=\"button-close-management\"\n                >\n                  <X className=\"h-5 w-5\" />\n                </Button>\n              </div>\n\n              {/* Panel Content */}\n              <div className=\"flex flex-col gap-2 p-4\">\n                {/* Crawl Button */}\n                <Button\n                  className=\"w-full justify-start gap-3\"\n                  variant=\"default\"\n                  onClick={handleStartCrawl}\n                  disabled={crawlMutation.isPending}\n                  data-testid=\"button-start-crawl\"\n                >\n                  {crawlMutation.isPending ? (\n                    <Loader2 className=\"h-4 w-4 animate-spin\" />\n                  ) : (\n                    <Play className=\"h-4 w-4\" />\n                  )}\n                  크롤링 시작\n                </Button>\n\n                {/* Advanced Settings Toggle */}\n                <Button\n                  className=\"w-full justify-start gap-3\"\n                  variant=\"outline\"\n                  onClick={() => setShowAdvancedSettings(!showAdvancedSettings)}\n                  data-testid=\"button-advanced-settings\"\n                >\n                  <Settings className=\"h-4 w-4\" />\n                  세부설정\n                </Button>\n\n                {/* Advanced Settings - Only show when toggled */}\n                {showAdvancedSettings && (\n                  <div className=\"flex flex-col gap-2 pl-4 pt-2 border-l-2 border-border ml-2\">\n                    {/* Keyword Management */}\n                    <Button\n                      className=\"w-full justify-start gap-3\"\n                      variant=\"ghost\"\n                      onClick={() => {\n                        setShowKeywordManager(true);\n                        onClose();\n                      }}\n                      data-testid=\"button-keyword-management\"\n                    >\n                      <Settings className=\"h-4 w-4\" />\n                      키워드 관리\n                    </Button>\n\n                    {/* Scheduler Settings */}\n                    <Button\n                      className=\"w-full justify-start gap-3\"\n                      variant=\"ghost\"\n                      onClick={() => {\n                        setShowSchedulerSettings(true);\n                        onClose();\n                      }}\n                      data-testid=\"button-scheduler-settings\"\n                    >\n                      <Clock className=\"h-4 w-4\" />\n                      자동 크롤링 설정\n                    </Button>\n\n                    {/* Notification Settings */}\n                    <Button\n                      className=\"w-full justify-start gap-3\"\n                      variant=\"ghost\"\n                      onClick={() => {\n                        setShowNotificationSettings(true);\n                        onClose();\n                      }}\n                      data-testid=\"button-notification-settings\"\n                    >\n                      <Bell className=\"h-4 w-4\" />\n                      알림 설정\n                    </Button>\n\n                    {/* Export CSV */}\n                    <Button\n                      className=\"w-full justify-start gap-3\"\n                      variant=\"ghost\"\n                      onClick={() => {\n                        setShowExportDialog(true);\n                        onClose();\n                      }}\n                      data-testid=\"button-export\"\n                    >\n                      <Download className=\"h-4 w-4\" />\n                      CSV 내보내기\n                    </Button>\n\n                    {/* Statistics */}\n                    <Link href=\"/stats\">\n                      <Button\n                        className=\"w-full justify-start gap-3\"\n                        variant=\"ghost\"\n                        onClick={onClose}\n                        data-testid=\"button-stats\"\n                      >\n                        <BarChart3 className=\"h-4 w-4\" />\n                        통계\n                      </Button>\n                    </Link>\n\n                    {/* Article Selection Delete */}\n                    <Button\n                      className=\"w-full justify-start gap-3\"\n                      variant=\"ghost\"\n                      onClick={handleToggleDeleteMode}\n                      data-testid=\"button-toggle-delete-mode\"\n                    >\n                      <Trash2 className=\"h-4 w-4\" />\n                      기사 선택 삭제\n                    </Button>\n\n                    {/* Archive Delete */}\n                    <Button\n                      className=\"w-full justify-start gap-3\"\n                      variant=\"ghost\"\n                      onClick={() => setShowConfirmArchiveDelete(true)}\n                      disabled={deleteArchiveMutation.isPending}\n                      data-testid=\"button-delete-archive\"\n                    >\n                      {deleteArchiveMutation.isPending ? (\n                        <Loader2 className=\"h-4 w-4 animate-spin\" />\n                      ) : (\n                        <Archive className=\"h-4 w-4\" />\n                      )}\n                      아카이브 삭제\n                    </Button>\n                  </div>\n                )}\n              </div>\n            </motion.div>\n          </>\n        )}\n      </AnimatePresence>\n\n      {/* Confirm Crawl Dialog */}\n      <ConfirmDialog\n        open={showConfirmCrawl}\n        onOpenChange={setShowConfirmCrawl}\n        title=\"당일 기사 삭제\"\n        description=\"오늘 날짜에 이미 크롤링된 기사가 있습니다. 기존 기사를 모두 삭제하고 다시 크롤링하시겠습니까?\"\n        onConfirm={() => handleConfirmCrawl(true)}\n        onCancel={() => {\n          setShowConfirmCrawl(false);\n          toast({\n            title: \"크롤링 취소\",\n            description: \"기존 기사가 있어 크롤링을 진행할 수 없습니다.\",\n          });\n        }}\n        confirmText=\"삭제 후 크롤링\"\n        cancelText=\"취소\"\n      />\n\n      {/* Crawl Progress Dialog */}\n      <CrawlProgressDialog\n        open={showCrawlProgress}\n        onOpenChange={setShowCrawlProgress}\n        onComplete={handleCrawlProgressComplete}\n        onMinimize={handleMinimizeCrawlProgress}\n      />\n\n      {/* Confirm Archive Delete Dialog */}\n      <ConfirmDialog\n        open={showConfirmArchiveDelete}\n        onOpenChange={setShowConfirmArchiveDelete}\n        title=\"아카이브 삭제\"\n        description={`${selectedDate} 날짜의 모든 기사를 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.`}\n        onConfirm={() => deleteArchiveMutation.mutate(selectedDate)}\n        confirmText=\"삭제\"\n        cancelText=\"취소\"\n        variant=\"destructive\"\n      />\n\n      {/* Keyword Manager Modal */}\n      <KeywordManager\n        open={showKeywordManager}\n        onOpenChange={setShowKeywordManager}\n      />\n\n      {/* Export Dialog */}\n      <ExportDialog\n        open={showExportDialog}\n        onOpenChange={setShowExportDialog}\n      />\n\n      {/* Scheduler Settings Dialog */}\n      <Dialog open={showSchedulerSettings} onOpenChange={setShowSchedulerSettings}>\n        <DialogContent className=\"max-w-md\">\n          <DialogHeader>\n            <DialogTitle>자동 크롤링 스케줄러</DialogTitle>\n          </DialogHeader>\n          <SchedulerSettingsComponent />\n        </DialogContent>\n      </Dialog>\n\n      {/* Notification Settings Dialog */}\n      <Dialog open={showNotificationSettings} onOpenChange={setShowNotificationSettings}>\n        <DialogContent className=\"max-w-lg max-h-[80vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>알림 설정</DialogTitle>\n          </DialogHeader>\n          <NotificationSettingsComponent />\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n}\n","size_bytes":15662},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":844},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\nimport { seedDatabase } from \"./seed\";\nimport { initializeScheduler } from \"./scheduler\";\nimport { WebSocketServer } from \"ws\";\n\nconst app = express();\n\ndeclare module 'http' {\n  interface IncomingMessage {\n    rawBody: unknown\n  }\n}\napp.use(express.json({\n  verify: (req, _res, buf) => {\n    req.rawBody = buf;\n  }\n}));\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"…\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  // Initialize database with seed data\n  await seedDatabase();\n\n  // Initialize the scheduler\n  await initializeScheduler();\n\n  const server = await registerRoutes(app);\n\n  // Setup WebSocket server for crawl progress updates\n  const wss = new WebSocketServer({ server, path: \"/ws/crawl\" });\n  \n  wss.on(\"connection\", (ws) => {\n    log(\"WebSocket client connected\");\n    \n    ws.on(\"close\", () => {\n      log(\"WebSocket client disconnected\");\n    });\n  });\n\n  // Export wss globally for crawler to access\n  (global as any).crawlProgressWss = wss;\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":2842},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":2359},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1592},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":21846},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":1080},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/note-dialog.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { ArticleWithMetadata, Note } from \"@shared/schema\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { Trash2 } from \"lucide-react\";\n\ninterface NoteDialogProps {\n  article: ArticleWithMetadata | null;\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nexport function NoteDialog({ article, isOpen, onClose }: NoteDialogProps) {\n  const [noteContent, setNoteContent] = useState(\"\");\n\n  // Fetch note data when dialog opens\n  const { data: note } = useQuery<Note | null>({\n    queryKey: [\"/api/notes\", article?.id],\n    queryFn: async () => {\n      if (!article) return null;\n      const response = await fetch(`/api/notes/${article.id}`, {\n        credentials: \"include\",\n      });\n      if (!response.ok) {\n        if (response.status === 404) return null;\n        throw new Error(\"Failed to fetch note\");\n      }\n      return response.json();\n    },\n    enabled: isOpen && !!article,\n  });\n\n  useEffect(() => {\n    if (note) {\n      setNoteContent(note.content);\n    } else {\n      setNoteContent(\"\");\n    }\n  }, [note]);\n\n  const saveMutation = useMutation({\n    mutationFn: async () => {\n      if (!article) return;\n      const response = await apiRequest(\"POST\", `/api/notes/${article.id}`, { content: noteContent });\n      return response.json();\n    },\n    onSuccess: async () => {\n      await queryClient.invalidateQueries({ queryKey: [\"/api/articles\"] });\n      await queryClient.invalidateQueries({ queryKey: [\"/api/notes\", article?.id] });\n      onClose();\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async () => {\n      if (!article) return;\n      const response = await apiRequest(\"DELETE\", `/api/notes/${article.id}`);\n      return response.json();\n    },\n    onSuccess: async () => {\n      await queryClient.invalidateQueries({ queryKey: [\"/api/articles\"] });\n      await queryClient.invalidateQueries({ queryKey: [\"/api/notes\", article?.id] });\n      setNoteContent(\"\");\n      onClose();\n    },\n  });\n\n  if (!article) return null;\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"sm:max-w-md\" data-testid=\"dialog-note\">\n        <DialogHeader>\n          <DialogTitle className=\"text-base\">메모</DialogTitle>\n        </DialogHeader>\n        \n        <div className=\"space-y-4\">\n          {/* Article title */}\n          <p className=\"text-sm text-muted-foreground line-clamp-2\">\n            {article.title}\n          </p>\n\n          {/* Note textarea */}\n          <Textarea\n            value={noteContent}\n            onChange={(e) => setNoteContent(e.target.value)}\n            placeholder=\"메모를 입력하세요...\"\n            rows={6}\n            className=\"resize-none\"\n            data-testid=\"input-note-content\"\n          />\n        </div>\n\n        <DialogFooter className=\"gap-2 sm:gap-0\">\n          {note && (\n            <Button\n              variant=\"ghost\"\n              onClick={() => deleteMutation.mutate()}\n              disabled={deleteMutation.isPending}\n              data-testid=\"button-delete-note\"\n            >\n              <Trash2 className=\"h-4 w-4 mr-2\" />\n              삭제\n            </Button>\n          )}\n          <div className=\"flex gap-2\">\n            <Button\n              variant=\"outline\"\n              onClick={onClose}\n              data-testid=\"button-cancel-note\"\n            >\n              취소\n            </Button>\n            <Button\n              onClick={() => saveMutation.mutate()}\n              disabled={saveMutation.isPending || !noteContent.trim()}\n              data-testid=\"button-save-note\"\n            >\n              저장\n            </Button>\n          </div>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":4024},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"client/src/components/scheduler-settings.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Label } from \"@/components/ui/label\";\nimport { Input } from \"@/components/ui/input\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Button } from \"@/components/ui/button\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Clock, Save } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport type { SchedulerSettings } from \"@shared/schema\";\n\nexport function SchedulerSettingsComponent() {\n  const { toast } = useToast();\n  const [cronExpression, setCronExpression] = useState(\"\");\n  const [enabled, setEnabled] = useState(false);\n  const [deleteExisting, setDeleteExisting] = useState(false);\n\n  const { data: settings, isLoading } = useQuery<SchedulerSettings>({\n    queryKey: [\"/api/scheduler\"],\n  });\n\n  useEffect(() => {\n    if (settings) {\n      setCronExpression(settings.cronExpression);\n      setEnabled(settings.enabled);\n      setDeleteExisting(settings.deleteExisting);\n    }\n  }, [settings]);\n\n  const updateMutation = useMutation({\n    mutationFn: async (updates: {\n      enabled?: boolean;\n      cronExpression?: string;\n      deleteExisting?: boolean;\n    }) => {\n      return await apiRequest(\"PUT\", \"/api/scheduler\", updates);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/scheduler\"] });\n      toast({\n        title: \"설정 저장됨\",\n        description: \"스케줄러 설정이 성공적으로 저장되었습니다.\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"오류\",\n        description: error.message || \"설정 저장에 실패했습니다.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSave = () => {\n    updateMutation.mutate({\n      enabled,\n      cronExpression,\n      deleteExisting,\n    });\n  };\n\n  if (isLoading) {\n    return (\n      <Card>\n        <CardHeader>\n          <CardTitle>자동 크롤링 스케줄러</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"text-muted-foreground\">로딩 중...</div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <Clock className=\"h-5 w-5\" />\n          자동 크롤링 스케줄러\n        </CardTitle>\n        <CardDescription>\n          지정된 시간에 자동으로 뉴스를 크롤링합니다\n        </CardDescription>\n      </CardHeader>\n      <CardContent className=\"space-y-6\">\n        {/* Enable/Disable Switch */}\n        <div className=\"flex items-center justify-between\">\n          <div className=\"space-y-0.5\">\n            <Label htmlFor=\"scheduler-enabled\">스케줄러 활성화</Label>\n            <p className=\"text-sm text-muted-foreground\">\n              자동 크롤링을 활성화하거나 비활성화합니다\n            </p>\n          </div>\n          <Switch\n            id=\"scheduler-enabled\"\n            checked={enabled}\n            onCheckedChange={setEnabled}\n            data-testid=\"switch-scheduler-enabled\"\n          />\n        </div>\n\n        {/* Cron Expression Input */}\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"cron-expression\">크론 표현식</Label>\n          <Input\n            id=\"cron-expression\"\n            value={cronExpression}\n            onChange={(e) => setCronExpression(e.target.value)}\n            placeholder=\"0 9 * * *\"\n            data-testid=\"input-cron-expression\"\n          />\n          <p className=\"text-sm text-muted-foreground\">\n            예시: \"0 9 * * *\" = 매일 오전 9시, \"0 */6 * * *\" = 6시간마다\n          </p>\n        </div>\n\n        {/* Delete Existing Checkbox */}\n        <div className=\"flex items-center space-x-2\">\n          <Checkbox\n            id=\"delete-existing\"\n            checked={deleteExisting}\n            onCheckedChange={(checked) => setDeleteExisting(checked as boolean)}\n            data-testid=\"checkbox-delete-existing\"\n          />\n          <Label\n            htmlFor=\"delete-existing\"\n            className=\"text-sm font-normal cursor-pointer\"\n          >\n            크롤링 전 당일 기사 삭제\n          </Label>\n        </div>\n\n        {/* Last Run Info */}\n        {settings?.lastRun && (\n          <div className=\"pt-4 border-t\">\n            <p className=\"text-sm text-muted-foreground\">\n              마지막 실행: {new Date(settings.lastRun).toLocaleString(\"ko-KR\")}\n            </p>\n          </div>\n        )}\n\n        {/* Save Button */}\n        <Button\n          onClick={handleSave}\n          disabled={updateMutation.isPending}\n          className=\"w-full\"\n          data-testid=\"button-save-scheduler\"\n        >\n          <Save className=\"h-4 w-4 mr-2\" />\n          {updateMutation.isPending ? \"저장 중...\" : \"설정 저장\"}\n        </Button>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":5083},"client/src/components/theme-toggle.tsx":{"content":"import { Moon, Sun } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { useTheme } from \"@/components/theme-provider\";\n\nexport function ThemeToggle() {\n  const { theme, setTheme } = useTheme();\n\n  return (\n    <Button\n      variant=\"ghost\"\n      size=\"icon\"\n      onClick={() => setTheme(theme === \"light\" ? \"dark\" : \"light\")}\n      data-testid=\"button-theme-toggle\"\n    >\n      <Sun className=\"h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0\" />\n      <Moon className=\"absolute h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100\" />\n      <span className=\"sr-only\">Toggle theme</span>\n    </Button>\n  );\n}\n","size_bytes":677},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/theme-provider.tsx":{"content":"import { createContext, useContext, useEffect, useState } from \"react\";\n\ntype Theme = \"dark\" | \"light\";\n\ntype ThemeProviderProps = {\n  children: React.ReactNode;\n  defaultTheme?: Theme;\n};\n\ntype ThemeProviderState = {\n  theme: Theme;\n  setTheme: (theme: Theme) => void;\n};\n\nconst initialState: ThemeProviderState = {\n  theme: \"dark\",\n  setTheme: () => null,\n};\n\nconst ThemeProviderContext = createContext<ThemeProviderState>(initialState);\n\nexport function ThemeProvider({\n  children,\n  defaultTheme = \"light\",\n  ...props\n}: ThemeProviderProps) {\n  const [theme] = useState<Theme>(defaultTheme);\n\n  useEffect(() => {\n    const root = window.document.documentElement;\n    root.classList.remove(\"light\", \"dark\");\n    root.classList.add(theme);\n  }, [theme]);\n\n  const value = {\n    theme,\n    setTheme: () => null, // Theme is now fixed, cannot be changed\n  };\n\n  return (\n    <ThemeProviderContext.Provider {...props} value={value}>\n      {children}\n    </ThemeProviderContext.Provider>\n  );\n}\n\nexport const useTheme = () => {\n  const context = useContext(ThemeProviderContext);\n\n  if (context === undefined)\n    throw new Error(\"useTheme must be used within a ThemeProvider\");\n\n  return context;\n};\n","size_bytes":1199},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/components/keyword-manager.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport { Loader2 } from \"lucide-react\";\nimport { CategoryWithKeywords } from \"@shared/schema\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface KeywordManagerProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n}\n\nexport function KeywordManager({ open, onOpenChange }: KeywordManagerProps) {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  // Fetch categories with keywords\n  const { data: categories = [], isLoading } = useQuery<CategoryWithKeywords[]>({\n    queryKey: [\"/api/categories\"],\n    enabled: open,\n  });\n\n  // Local state for editing keywords\n  const [editedKeywords, setEditedKeywords] = useState<\n    Record<string, string>\n  >({});\n  const [isDirty, setIsDirty] = useState(false);\n\n  // Initialize edited keywords when data loads\n  useEffect(() => {\n    if (categories.length > 0 && !isDirty) {\n      const initialKeywords: Record<string, string> = {};\n      categories.forEach((category) => {\n        initialKeywords[category.id] = category.keywords\n          .map((k) => k.keyword)\n          .join(\", \");\n      });\n      setEditedKeywords(initialKeywords);\n    }\n  }, [categories, isDirty]);\n\n  // Save keywords mutation\n  const saveKeywordsMutation = useMutation({\n    mutationFn: async (\n      keywordsByCategoryId: Record<string, string[]>\n    ) => {\n      return await apiRequest(\"PUT\", \"/api/keywords\", { keywords: keywordsByCategoryId });\n    },\n    onSuccess: () => {\n      toast({\n        title: \"키워드 저장 완료\",\n        description: \"키워드가 성공적으로 저장되었습니다.\",\n      });\n      setIsDirty(false);\n      queryClient.invalidateQueries({ queryKey: [\"/api/categories\"] });\n      onOpenChange(false);\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"저장 실패\",\n        description: error.message || \"키워드 저장 중 오류가 발생했습니다.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleKeywordChange = (categoryId: string, value: string) => {\n    setEditedKeywords((prev) => ({\n      ...prev,\n      [categoryId]: value,\n    }));\n    setIsDirty(true);\n  };\n\n  const handleSave = () => {\n    const keywordsByCategoryId: Record<string, string[]> = {};\n    \n    Object.entries(editedKeywords).forEach(([categoryId, keywordsStr]) => {\n      const keywords = keywordsStr\n        .split(\",\")\n        .map((k) => k.trim())\n        .filter((k) => k.length > 0);\n      keywordsByCategoryId[categoryId] = keywords;\n    });\n\n    saveKeywordsMutation.mutate(keywordsByCategoryId);\n  };\n\n  const handleCancel = () => {\n    if (isDirty) {\n      const confirmed = window.confirm(\n        \"변경사항이 저장되지 않았습니다. 정말 닫으시겠습니까?\"\n      );\n      if (!confirmed) return;\n    }\n    setIsDirty(false);\n    onOpenChange(false);\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={handleCancel}>\n      <DialogContent className=\"max-w-4xl max-h-[80vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle data-testid=\"text-keyword-manager-title\">\n            키워드 관리\n          </DialogTitle>\n          <DialogDescription>\n            각 카테고리의 키워드를 수정할 수 있습니다. 키워드는 쉼표(,)로 구분하세요.\n          </DialogDescription>\n        </DialogHeader>\n\n        {isLoading ? (\n          <div className=\"flex items-center justify-center py-8\">\n            <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 py-4\">\n            {categories.map((category) => (\n              <div key={category.id} className=\"space-y-2\">\n                <Label htmlFor={`keywords-${category.id}`} className=\"text-base font-medium\">\n                  {category.name}\n                </Label>\n                <Textarea\n                  id={`keywords-${category.id}`}\n                  value={editedKeywords[category.id] || \"\"}\n                  onChange={(e) =>\n                    handleKeywordChange(category.id, e.target.value)\n                  }\n                  placeholder=\"키워드를 쉼표로 구분하여 입력하세요\"\n                  className=\"font-mono text-sm min-h-[120px] resize-none\"\n                  data-testid={`textarea-keywords-${category.name}`}\n                />\n                <p className=\"text-xs text-muted-foreground\">\n                  {editedKeywords[category.id]?.split(\",\").filter((k) => k.trim()).length || 0}개 키워드\n                </p>\n              </div>\n            ))}\n          </div>\n        )}\n\n        <DialogFooter>\n          <Button\n            variant=\"outline\"\n            onClick={handleCancel}\n            data-testid=\"button-cancel-keywords\"\n          >\n            취소\n          </Button>\n          <Button\n            onClick={handleSave}\n            disabled={!isDirty || saveKeywordsMutation.isPending}\n            data-testid=\"button-save-keywords\"\n          >\n            {saveKeywordsMutation.isPending ? (\n              <>\n                <Loader2 className=\"h-4 w-4 animate-spin mr-2\" />\n                저장 중...\n              </>\n            ) : (\n              \"저장\"\n            )}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":5749},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"design_guidelines.md":{"content":"# Design Guidelines: News Crawler Archive System\n\n## Design Approach\n\n**Selected Approach:** Design System - Inspired by Linear and Notion\n**Justification:** This is a utility-focused productivity tool requiring efficiency, clarity, and information density. The monotone modern aesthetic aligns with Linear's minimalist approach and Notion's clean information architecture.\n\n**Key Design Principles:**\n- Minimalist hierarchy through typography and spacing, not color\n- Information clarity over visual embellishment\n- Efficient workflows with clear affordances\n- Consistent, predictable interactions\n\n---\n\n## Core Design Elements\n\n### A. Color Palette\n\n**Dark Mode Primary** (default):\n- Background Base: 0 0% 9% (deep charcoal)\n- Surface: 0 0% 12% (elevated panels)\n- Surface Elevated: 0 0% 15% (dropdowns, modals)\n- Border: 0 0% 20% (subtle dividers)\n- Text Primary: 0 0% 95% (high contrast)\n- Text Secondary: 0 0% 65% (metadata, labels)\n- Text Tertiary: 0 0% 45% (placeholders)\n- Accent: 0 0% 100% (interactive elements, pure white for CTAs)\n- Accent Hover: 0 0% 90%\n- Destructive: 0 70% 50% (delete actions only)\n\n**Light Mode:**\n- Background Base: 0 0% 98%\n- Surface: 0 0% 100%\n- Surface Elevated: 0 0% 100% with subtle shadow\n- Border: 0 0% 90%\n- Text Primary: 0 0% 10%\n- Text Secondary: 0 0% 40%\n- Text Tertiary: 0 0% 60%\n- Accent: 0 0% 0% (pure black for CTAs)\n- Accent Hover: 0 0% 15%\n\n**Status Colors** (used sparingly):\n- Success: 142 70% 45% (crawling complete)\n- Warning: 38 90% 50% (confirmation needed)\n- Error: 0 70% 50%\n\n### B. Typography\n\n**Font Stack:**\n- Primary: 'Inter', system-ui, sans-serif (via Google Fonts)\n- Monospace: 'JetBrains Mono', monospace (for dates, technical data)\n\n**Type Scale:**\n- Headlines (H1): text-2xl font-semibold (category titles)\n- Subheads (H2): text-lg font-medium (section headers)\n- Body: text-base font-normal (article titles)\n- Small: text-sm (summaries, metadata)\n- Tiny: text-xs (timestamps, labels)\n\n**Line Height:**\n- Headlines: leading-tight\n- Body text: leading-relaxed\n- UI elements: leading-none\n\n### C. Layout System\n\n**Spacing Primitives:** Use Tailwind units of 2, 4, 6, 8, 12, 16\n- Micro spacing: gap-2, p-2 (tight groups)\n- Standard spacing: gap-4, p-4 (cards, list items)\n- Section spacing: gap-8, py-8 (between major sections)\n- Page margins: px-6 md:px-12 lg:px-16\n\n**Grid System:**\n- Container: max-w-7xl mx-auto\n- Single column layout for article list\n- Multi-column for category groups (grid-cols-1 md:grid-cols-2 lg:grid-cols-3 for keyword management)\n\n**Responsive Breakpoints:**\n- Mobile: base (single column)\n- Tablet: md (expanded spacing)\n- Desktop: lg (full feature set)\n\n### D. Component Library\n\n**Navigation Header:**\n- Fixed top bar (h-16)\n- Left: Logo/site title (text-xl font-semibold)\n- Center: Date picker dropdown (w-64, subtle border)\n- Right: \"관리 메뉴\" button (ghost style with subtle border)\n\n**Date Picker Dropdown:**\n- Minimal select input with calendar icon\n- Dropdown shows last 30 days with subtle hover states\n- Selected date highlighted with white/black background\n\n**Slide-out Management Panel:**\n- Right-aligned panel (w-80)\n- Slides in with smooth transform transition (300ms)\n- Dark overlay backdrop (bg-black/20)\n- Contains 4 stacked buttons with icons and labels\n- Close on backdrop click or X button\n\n**Category Sections:**\n- Section header (text-lg font-medium, mb-4)\n- Divider line below (border-b, 1px, border-gray-800)\n- Collapsed/expanded state toggle\n\n**Article Cards:**\n- Clean list items with hover state (bg-surface-elevated)\n- Checkbox (left, only visible in delete mode)\n- Article title (clickable, font-medium)\n- 1-2 line summary (text-sm, text-secondary)\n- Timestamp (text-xs, text-tertiary, right-aligned)\n- Subtle border-b between items\n\n**Buttons:**\n- Primary: White/black background, high contrast text, px-6 py-2, rounded-md\n- Secondary: Transparent with subtle border, hover fills with surface color\n- Ghost: No border, subtle hover background\n- Destructive: Red background for delete confirmations\n\n**Modal Dialogs:**\n- Centered overlay with backdrop blur\n- White/dark card with rounded corners (rounded-lg)\n- Clear title, message, action buttons at bottom\n- \"Yes/No\" confirmation for destructive actions\n\n**Keyword Management Interface:**\n- Grid layout for categories (2-3 columns on desktop)\n- Each category in bordered card\n- Editable text areas with monospace font\n- \"저장\" button (primary) at bottom\n- Clear dirty state indicator\n\n**Empty States:**\n- Centered icon and text\n- \"아직 크롤링된 기사가 없습니다\" message\n- Subtle prompt to start crawling\n\n**Loading States:**\n- Skeleton screens with subtle pulse animation\n- Spinner for button loading states\n- Progress indicator for crawling status\n\n**Form Inputs:**\n- Consistent border radius (rounded-md)\n- Subtle border, focus state with increased border opacity\n- Dark background for dark mode, white for light mode\n- Placeholder text in tertiary color\n\n### E. Interactions & Animations\n\n**Use Sparingly:**\n- Slide panel: transform translate-x with 300ms ease-out\n- Dropdown: opacity and scale with 200ms ease\n- Hover states: subtle background change, no transform\n- Loading: subtle pulse on skeleton screens\n- No page transitions or scroll animations\n\n**Micro-interactions:**\n- Checkbox selection: instant visual feedback\n- Button press: subtle scale (95%) on active state\n- Link hover: underline decoration\n\n---\n\n## Layout Structure\n\n**Main Dashboard:**\n```\n[Fixed Header with Date Picker & Menu Button]\n[Category Section 1 - 자사뉴스]\n  - Article 1\n  - Article 2\n[Category Section 2 - 경쟁사]\n  - Articles...\n[Continue for all 5 categories]\n```\n\n**Information Hierarchy:**\n1. Date (most prominent in header)\n2. Category names (section dividers)\n3. Article titles (primary clickable content)\n4. Article summaries (supporting context)\n5. Timestamps (metadata)\n\n**Visual Rhythm:**\n- Consistent padding between articles (py-4)\n- Larger gaps between categories (mt-8)\n- Breathing room in header and footer (py-6)\n\n---\n\n## Critical Specifications\n\n- All text fields and inputs must maintain dark mode consistency\n- Checkbox styling: custom design with border in monotone palette\n- Hover states subtle: 5-10% opacity change, never jarring\n- Focus states: 2px outline in white/black with 2px offset\n- Monospace font for technical data only (dates, keywords)\n- Zero decorative elements or illustrations\n- Information-first design: every pixel serves a purpose","size_bytes":6462},"client/src/components/ui/date-picker.tsx":{"content":"import { format } from \"date-fns\";\nimport { ko } from \"date-fns/locale\";\nimport { Calendar as CalendarIcon } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Calendar } from \"@/components/ui/calendar\";\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/components/ui/popover\";\nimport { cn } from \"@/lib/utils\";\n\ninterface DatePickerProps {\n  date: Date | undefined;\n  onDateChange: (date: Date | undefined) => void;\n  availableDates?: string[];\n  className?: string;\n  \"data-testid\"?: string;\n}\n\nexport function DatePicker({\n  date,\n  onDateChange,\n  availableDates = [],\n  className,\n  \"data-testid\": testId,\n}: DatePickerProps) {\n  const availableDateSet = new Set(availableDates);\n\n  return (\n    <Popover>\n      <PopoverTrigger asChild>\n        <Button\n          variant=\"outline\"\n          className={cn(\n            \"justify-start text-left font-normal\",\n            !date && \"text-muted-foreground\",\n            className\n          )}\n          data-testid={testId}\n        >\n          <CalendarIcon className=\"mr-2 h-4 w-4\" />\n          {date ? format(date, \"yyyy년 M월 d일\", { locale: ko }) : \"날짜 선택\"}\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent className=\"w-auto p-0\" align=\"end\">\n        <Calendar\n          mode=\"single\"\n          selected={date}\n          onSelect={onDateChange}\n          locale={ko}\n          showOutsideDays={false}\n          modifiers={{\n            available: (day) => {\n              const dateStr = format(day, \"yyyy-MM-dd\");\n              return availableDateSet.has(dateStr);\n            },\n          }}\n          modifiersClassNames={{\n            available: \"font-bold text-primary bg-primary/10 hover:bg-primary/20\",\n          }}\n          initialFocus\n        />\n      </PopoverContent>\n    </Popover>\n  );\n}\n","size_bytes":1828},"client/src/components/timeline-view.tsx":{"content":"import { format } from \"date-fns\";\nimport { Calendar, ExternalLink } from \"lucide-react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Card } from \"@/components/ui/card\";\nimport type { ArticleWithMetadata, CategoryWithKeywords } from \"@shared/schema\";\n\ninterface TimelineViewProps {\n  articles: ArticleWithMetadata[];\n  categories: CategoryWithKeywords[];\n}\n\ninterface GroupedArticles {\n  date: string;\n  articles: ArticleWithMetadata[];\n}\n\nexport function TimelineView({ articles, categories }: TimelineViewProps) {\n  const getCategoryName = (categoryId: string) => {\n    return categories.find((c) => c.id === categoryId)?.name || \"알 수 없음\";\n  };\n\n  const groupedByDate = articles.reduce((acc, article) => {\n    const dateKey = format(new Date(article.crawledDate), \"yyyy-MM-dd\");\n    \n    if (!acc[dateKey]) {\n      acc[dateKey] = [];\n    }\n    acc[dateKey].push(article);\n    return acc;\n  }, {} as Record<string, ArticleWithMetadata[]>);\n\n  const sortedGroups: GroupedArticles[] = Object.entries(groupedByDate)\n    .map(([date, articles]) => ({ date, articles }))\n    .sort((a, b) => b.date.localeCompare(a.date));\n\n  if (sortedGroups.length === 0) {\n    return (\n      <div className=\"text-center py-12 text-muted-foreground\">\n        검색 결과가 없습니다.\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      {sortedGroups.map((group) => (\n        <div key={group.date} className=\"relative\">\n          <div className=\"sticky top-0 z-10 bg-background/95 backdrop-blur-sm py-3 mb-4 border-b\">\n            <div className=\"flex items-center gap-2\">\n              <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n              <h3 className=\"text-lg font-semibold\">\n                {format(new Date(group.date), \"yyyy년 MM월 dd일\")}\n              </h3>\n              <Badge variant=\"secondary\" className=\"ml-2\">\n                {group.articles.length}건\n              </Badge>\n            </div>\n          </div>\n\n          <div className=\"space-y-4 relative before:absolute before:left-6 before:top-0 before:bottom-0 before:w-px before:bg-border\">\n            {group.articles.map((article, index) => (\n              <div key={article.id} className=\"relative pl-14\">\n                <div\n                  className=\"absolute left-4 top-6 w-4 h-4 rounded-full bg-primary border-4 border-background\"\n                  data-testid={`timeline-dot-${article.id}`}\n                />\n\n                <Card className=\"p-4 hover-elevate\" data-testid={`timeline-article-${article.id}`}>\n                  <div className=\"space-y-2\">\n                    <div className=\"flex items-start justify-between gap-3\">\n                      <div className=\"flex-1\">\n                        {article.categoryId && (\n                          <div className=\"flex items-center gap-2 mb-1\">\n                            <Badge variant=\"outline\" data-testid={`timeline-category-${article.id}`}>\n                              {getCategoryName(article.categoryId)}\n                            </Badge>\n                          </div>\n                        )}\n                        <a\n                          href={article.url}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          className=\"text-base font-medium hover:text-primary transition-colors inline-flex items-center gap-1 group\"\n                          data-testid={`timeline-title-${article.id}`}\n                        >\n                          {article.title}\n                          <ExternalLink className=\"h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity\" />\n                        </a>\n                      </div>\n                    </div>\n\n                    {article.summary && (\n                      <p\n                        className=\"text-sm text-muted-foreground line-clamp-3\"\n                        data-testid={`timeline-summary-${article.id}`}\n                      >\n                        {article.summary}\n                      </p>\n                    )}\n                  </div>\n                </Card>\n              </div>\n            ))}\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n}\n","size_bytes":4219},"client/src/components/crawl-progress-dialog.tsx":{"content":"import { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { CheckCircle2, Loader2, XCircle, AlertCircle, MinusCircle, Minimize2 } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { useCrawlProgress, type CategoryProgress } from \"@/hooks/use-crawl-progress\";\nimport { useEffect } from \"react\";\n\ninterface CrawlProgressDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onComplete?: () => void;\n  onMinimize?: () => void;\n}\n\nfunction getCategoryStatusIcon(status: CategoryProgress[\"status\"]) {\n  switch (status) {\n    case \"completed\":\n      return <CheckCircle2 className=\"h-5 w-5 text-green-500\" data-testid=\"icon-completed\" />;\n    case \"processing\":\n      return <Loader2 className=\"h-5 w-5 animate-spin text-blue-500\" data-testid=\"icon-processing\" />;\n    case \"error\":\n      return <XCircle className=\"h-5 w-5 text-red-500\" data-testid=\"icon-error\" />;\n    case \"skipped\":\n      return <MinusCircle className=\"h-5 w-5 text-muted-foreground\" data-testid=\"icon-skipped\" />;\n    case \"pending\":\n    default:\n      return <AlertCircle className=\"h-5 w-5 text-muted-foreground\" data-testid=\"icon-pending\" />;\n  }\n}\n\nexport function CrawlProgressDialog({ open, onOpenChange, onComplete, onMinimize }: CrawlProgressDialogProps) {\n  const { isConnected, categoryProgress, isComplete, connect, disconnect } = useCrawlProgress();\n\n  useEffect(() => {\n    if (open) {\n      connect();\n    } else {\n      disconnect();\n    }\n  }, [open, connect, disconnect]);\n\n  useEffect(() => {\n    if (isComplete && onComplete) {\n      // Wait a bit before closing to show final state\n      const timer = setTimeout(() => {\n        onComplete();\n        // Disconnect after a short delay to ensure onComplete finishes\n        setTimeout(() => {\n          disconnect();\n        }, 100);\n      }, 1500);\n      return () => clearTimeout(timer);\n    }\n  }, [isComplete, disconnect]);  // Remove onComplete from dependencies to prevent infinite loop\n\n  const categories = Array.from(categoryProgress.values());\n  const totalCategories = categories.length;\n  const completedCategories = categories.filter(\n    (c) => c.status === \"completed\" || c.status === \"error\" || c.status === \"skipped\"\n  ).length;\n  const progressPercentage = totalCategories > 0 ? (completedCategories / totalCategories) * 100 : 0;\n\n  const handleMinimize = () => {\n    if (onMinimize && !isComplete) {\n      onMinimize();\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent \n        className=\"max-w-2xl max-h-[80vh] overflow-hidden flex flex-col\" \n        data-testid=\"dialog-crawl-progress\"\n        onInteractOutside={(e) => {\n          // 크롤링 진행 중에는 외부 클릭으로 닫히지 않도록\n          if (!isComplete) {\n            e.preventDefault();\n          }\n        }}\n      >\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-2\">\n              {!isComplete && <Loader2 className=\"h-5 w-5 animate-spin\" />}\n              크롤링 진행 상황\n            </div>\n            {!isComplete && onMinimize && (\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                onClick={handleMinimize}\n                className=\"h-8 w-8\"\n                data-testid=\"button-minimize\"\n              >\n                <Minimize2 className=\"h-4 w-4\" />\n              </Button>\n            )}\n          </DialogTitle>\n        </DialogHeader>\n\n        <div className=\"space-y-4 flex-1 overflow-auto\">\n          {/* Overall progress */}\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center justify-between text-sm\">\n              <span className=\"text-muted-foreground\">전체 진행률</span>\n              <span className=\"font-mono\" data-testid=\"text-progress\">\n                {completedCategories} / {totalCategories}\n              </span>\n            </div>\n            <Progress value={progressPercentage} className=\"h-2\" data-testid=\"progress-bar\" />\n          </div>\n\n          {/* Connection status */}\n          {!isConnected && totalCategories === 0 && (\n            <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n              <Loader2 className=\"h-4 w-4 animate-spin\" />\n              연결 중...\n            </div>\n          )}\n\n          {/* Category list */}\n          <div className=\"space-y-2\">\n            {categories.map((category) => (\n              <div\n                key={category.id}\n                className=\"border rounded-lg p-3 space-y-1\"\n                data-testid={`category-${category.id}`}\n              >\n                <div className=\"flex items-start gap-2\">\n                  <div className=\"mt-0.5\">{getCategoryStatusIcon(category.status)}</div>\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"font-medium text-sm\" data-testid={`category-name-${category.id}`}>\n                      {category.name}\n                    </div>\n                    <div className=\"text-sm text-muted-foreground\" data-testid={`category-message-${category.id}`}>\n                      {category.message}\n                    </div>\n                    {category.articleTitle && (\n                      <div className=\"text-xs text-muted-foreground mt-1 truncate\" data-testid={`category-article-${category.id}`}>\n                        📰 {category.articleTitle}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n\n          {/* Completion message */}\n          {isComplete && (\n            <div className=\"flex items-center gap-2 p-3 bg-green-500/10 text-green-600 dark:text-green-400 rounded-lg\" data-testid=\"message-complete\">\n              <CheckCircle2 className=\"h-5 w-5\" />\n              <span className=\"font-medium\">크롤링 완료!</span>\n            </div>\n          )}\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":6141},"server/backfill.ts":{"content":"import { compareTwoStrings } from \"string-similarity\";\nimport { summarizeArticle } from \"./openai\";\nimport { storage } from \"./storage\";\nimport type { CategoryWithKeywords, Article } from \"@shared/schema\";\n\ninterface NaverNewsItem {\n  title: string;\n  link: string;\n  description: string;\n  pubDate: string;\n}\n\ninterface NaverSearchResponse {\n  items: NaverNewsItem[];\n  total: number;\n  start: number;\n  display: number;\n}\n\n// Decode HTML entities\nfunction decodeHTMLEntities(text: string): string {\n  const namedEntities: Record<string, string> = {\n    '&quot;': '\"',\n    '&apos;': \"'\",\n    '&amp;': '&',\n    '&lt;': '<',\n    '&gt;': '>',\n    '&#039;': \"'\",\n    '&nbsp;': ' ',\n  };\n  \n  return text\n    .replace(/&[a-z]+;/gi, (match) => namedEntities[match] || match)\n    .replace(/&#(\\d+);/g, (match, dec) => String.fromCharCode(parseInt(dec, 10)))\n    .replace(/&#x([0-9a-f]+);/gi, (match, hex) => String.fromCharCode(parseInt(hex, 16)));\n}\n\n// Clean article title\nfunction cleanTitle(title: string): string {\n  return title\n    .replace(/^\\[[^\\]]+\\]\\s*/, '')\n    .replace(/^【[^】]+】\\s*/, '')\n    .replace(/^\\([^)]+\\)\\s*/, '')\n    .replace(/\\s*-\\s*[^-]+$/, '')\n    .replace(/\\s*\\|\\s*[^|]+$/, '')\n    .replace(/\\s*\\([^)]+\\)$/, '')\n    .replace(/\\s*【[^】]+】$/, '')\n    .replace(/\\s*\\[[^\\]]+\\]$/, '')\n    .trim();\n}\n\n// Check if article is within date range (targetDate - 3 days to targetDate)\nfunction isWithinDateRange(pubDate: string, targetDate: Date): boolean {\n  const articleDate = new Date(pubDate);\n  const threeDaysBeforeTarget = new Date(targetDate);\n  threeDaysBeforeTarget.setDate(threeDaysBeforeTarget.getDate() - 3);\n  \n  return articleDate >= threeDaysBeforeTarget && articleDate <= targetDate;\n}\n\n// Fetch articles for a keyword from Naver Search API for a specific target date\nasync function fetchArticlesForKeywordAndDate(keyword: string, targetDate: Date): Promise<NaverNewsItem[]> {\n  try {\n    const clientId = process.env.NAVER_CLIENT_ID;\n    const clientSecret = process.env.NAVER_CLIENT_SECRET;\n    \n    if (!clientId || !clientSecret) {\n      throw new Error(\"NAVER_CLIENT_ID 또는 NAVER_CLIENT_SECRET이 설정되지 않았습니다.\");\n    }\n\n    const encodedKeyword = encodeURIComponent(keyword);\n    const url = `https://openapi.naver.com/v1/search/news.json?query=${encodedKeyword}&display=100&sort=date`;\n    \n    await new Promise(resolve => setTimeout(resolve, 50));\n    \n    const response = await fetch(url, {\n      headers: {\n        \"X-Naver-Client-Id\": clientId,\n        \"X-Naver-Client-Secret\": clientSecret,\n      },\n    });\n\n    if (!response.ok) {\n      throw new Error(`Naver API error: ${response.status} ${response.statusText}`);\n    }\n\n    const data: NaverSearchResponse = await response.json();\n    \n    // Filter articles within target date range (targetDate - 3 days to targetDate)\n    const recentArticles = data.items.filter(item => \n      item.pubDate && isWithinDateRange(item.pubDate, targetDate)\n    );\n    \n    // Filter articles that contain the keyword in title\n    const keywordLower = keyword.toLowerCase();\n    const relevantArticles = recentArticles.filter(item => {\n      const titleText = item.title.replace(/<\\/?b>/g, \"\").toLowerCase();\n      return titleText.includes(keywordLower);\n    });\n    \n    // Clean titles\n    const articles = relevantArticles.map(item => ({\n      ...item,\n      title: cleanTitle(decodeHTMLEntities(item.title.replace(/<\\/?b>/g, \"\"))),\n      description: decodeHTMLEntities(item.description.replace(/<\\/?b>/g, \"\")),\n    }));\n\n    return articles;\n  } catch (error) {\n    console.error(`Failed to fetch articles for keyword \"${keyword}\":`, error);\n    return [];\n  }\n}\n\n// Filter out promotional articles\nfunction filterPromotionalArticles(articles: NaverNewsItem[]): NaverNewsItem[] {\n  const promotionalKeywords = [\n    \"할인\", \"이벤트\", \"프로모션\", \"증정\", \"경품\",\n    \"쿠폰\", \"특가\", \"세일\", \"무료\", \"공짜\",\n    \"선착순\", \"추첨\", \"응모\", \"참여\", \"혜택\"\n  ];\n  \n  return articles.filter(article => {\n    const titleLower = article.title.toLowerCase();\n    const descLower = article.description.toLowerCase();\n    \n    return !promotionalKeywords.some(keyword => \n      titleLower.includes(keyword) || descLower.includes(keyword)\n    );\n  });\n}\n\n// Find the most representative article\nasync function findRepresentativeArticle(articles: NaverNewsItem[]): Promise<NaverNewsItem | null> {\n  if (articles.length === 0) return null;\n  if (articles.length === 1) return articles[0];\n\n  const filteredArticles = filterPromotionalArticles(articles);\n  if (filteredArticles.length === 0) return articles[0];\n  if (filteredArticles.length === 1) return filteredArticles[0];\n\n  const titles = filteredArticles.map(a => a.title);\n  const similarityScores: number[] = [];\n\n  for (let i = 0; i < titles.length; i++) {\n    let totalSimilarity = 0;\n    for (let j = 0; j < titles.length; j++) {\n      if (i !== j) {\n        totalSimilarity += compareTwoStrings(titles[i], titles[j]);\n      }\n    }\n    const averageSimilarity = totalSimilarity / (titles.length - 1);\n    similarityScores.push(averageSimilarity);\n  }\n\n  const maxSimilarityIndex = similarityScores.indexOf(Math.max(...similarityScores));\n  return filteredArticles[maxSimilarityIndex];\n}\n\n// Process a single keyword for a specific date\nasync function processKeywordForDate(\n  category: CategoryWithKeywords,\n  keywordObj: { id: string; categoryId: string; keyword: string },\n  targetDate: Date,\n  crawledDate: Date\n): Promise<Article | null> {\n  try {\n    const keyword = keywordObj.keyword;\n    \n    // Fetch articles for this keyword\n    const articles = await fetchArticlesForKeywordAndDate(keyword, targetDate);\n\n    if (articles.length === 0) {\n      return null;\n    }\n\n    // Find the most representative article\n    const representativeArticle = await findRepresentativeArticle(articles);\n\n    if (!representativeArticle) {\n      return null;\n    }\n\n    // Summarize the article using GPT\n    const contentToSummarize = representativeArticle.description || representativeArticle.title;\n    let summary: string;\n    \n    try {\n      summary = await summarizeArticle(contentToSummarize);\n    } catch (error) {\n      console.warn(`Failed to summarize, leaving summary empty: ${error instanceof Error ? error.message : \"Unknown error\"}`);\n      summary = \"\";\n    }\n\n    // Save to database with the target crawledDate\n    const newArticle = await storage.createArticleWithDate({\n      categoryId: category.id,\n      title: representativeArticle.title,\n      summary,\n      url: representativeArticle.link,\n      publishedDate: new Date(representativeArticle.pubDate),\n      crawledDate: crawledDate,\n    });\n\n    return newArticle;\n  } catch (error) {\n    console.error(`Failed to process keyword ${keywordObj.keyword}:`, error);\n    return null;\n  }\n}\n\n// Process a category for a specific date\nasync function processCategoryForDate(\n  category: CategoryWithKeywords,\n  targetDate: Date,\n  crawledDate: Date\n): Promise<Article[]> {\n  if (category.keywords.length === 0) {\n    return [];\n  }\n\n  const BATCH_SIZE = 5;\n  const BATCH_DELAY = 500;\n  \n  const allResults: PromiseSettledResult<Article | null>[] = [];\n  \n  for (let i = 0; i < category.keywords.length; i += BATCH_SIZE) {\n    const batch = category.keywords.slice(i, i + BATCH_SIZE);\n    \n    const batchPromises = batch.map(keywordObj => \n      processKeywordForDate(category, keywordObj, targetDate, crawledDate)\n    );\n    \n    const batchResults = await Promise.allSettled(batchPromises);\n    allResults.push(...batchResults);\n    \n    if (i + BATCH_SIZE < category.keywords.length) {\n      await new Promise(resolve => setTimeout(resolve, BATCH_DELAY));\n    }\n  }\n\n  const articles = allResults\n    .filter((result): result is PromiseFulfilledResult<Article | null> => \n      result.status === \"fulfilled\" && result.value !== null\n    )\n    .map(result => result.value as Article);\n\n  return articles;\n}\n\n// Backfill news for a specific date\nasync function backfillNewsForDate(date: Date): Promise<void> {\n  const dateStr = date.toISOString().split('T')[0];\n  console.log(`\\nBackfilling news for ${dateStr}...`);\n  \n  // Get all categories with keywords\n  const categories = await storage.getCategoriesWithKeywords();\n  \n  let totalArticles = 0;\n  \n  for (let i = 0; i < categories.length; i++) {\n    const category = categories[i];\n    console.log(`[${i + 1}/${categories.length}] Processing category: ${category.name}`);\n    \n    try {\n      const articles = await processCategoryForDate(category, date, date);\n      totalArticles += articles.length;\n      console.log(`  ✓ Saved ${articles.length} articles for ${category.name}`);\n    } catch (error) {\n      console.error(`  ✗ Failed to process category ${category.name}:`, error);\n    }\n    \n    // Add delay between categories\n    if (i < categories.length - 1) {\n      await new Promise(resolve => setTimeout(resolve, 1000));\n    }\n  }\n  \n  console.log(`✓ Completed ${dateStr}: ${totalArticles} articles saved`);\n}\n\n// Main backfill function\nexport async function backfillNews(daysBack: number = 90): Promise<void> {\n  console.log(`Starting backfill for the last ${daysBack} days...`);\n  \n  const today = new Date();\n  today.setHours(0, 0, 0, 0);\n  \n  // Generate dates from (today - daysBack) to (today - 1)\n  const dates: Date[] = [];\n  for (let i = daysBack; i >= 1; i--) {\n    const date = new Date(today);\n    date.setDate(date.getDate() - i);\n    dates.push(date);\n  }\n  \n  console.log(`Will backfill ${dates.length} days from ${dates[0].toISOString().split('T')[0]} to ${dates[dates.length - 1].toISOString().split('T')[0]}`);\n  \n  for (let i = 0; i < dates.length; i++) {\n    const date = dates[i];\n    console.log(`\\n=== Progress: ${i + 1}/${dates.length} ===`);\n    \n    try {\n      await backfillNewsForDate(date);\n    } catch (error) {\n      console.error(`Failed to backfill for ${date.toISOString().split('T')[0]}:`, error);\n    }\n    \n    // Add a delay between dates to avoid overwhelming the API\n    if (i < dates.length - 1) {\n      console.log(\"Waiting 2 seconds before next date...\");\n      await new Promise(resolve => setTimeout(resolve, 2000));\n    }\n  }\n  \n  console.log(\"\\n✓ Backfill completed!\");\n}\n\n// Run if called directly\nconst isMainModule = import.meta.url === `file://${process.argv[1]}`;\nif (isMainModule) {\n  console.log(\"Starting 3-month backfill...\");\n  backfillNews(90)\n    .then(() => {\n      console.log(\"Backfill finished successfully!\");\n      process.exit(0);\n    })\n    .catch((error) => {\n      console.error(\"Backfill failed:\", error);\n      process.exit(1);\n    });\n}\n","size_bytes":10644},"client/src/components/alternative-articles-dialog.tsx":{"content":"import { useState } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { ExternalLink, Loader2, RefreshCcw } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { format } from \"date-fns\";\nimport { ko } from \"date-fns/locale\";\n\ninterface AlternativeArticlesDialogProps {\n  articleId: string;\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n}\n\ninterface NaverNewsItem {\n  title: string;\n  link: string;\n  description: string;\n  pubDate: string;\n}\n\ninterface AlternativesResponse {\n  keyword: string;\n  articles: NaverNewsItem[];\n}\n\nexport function AlternativeArticlesDialog({\n  articleId,\n  open,\n  onOpenChange,\n}: AlternativeArticlesDialogProps) {\n  const { toast } = useToast();\n  const [selectedArticle, setSelectedArticle] = useState<NaverNewsItem | null>(null);\n\n  // Fetch alternative articles\n  const { data, isLoading, error } = useQuery<AlternativesResponse>({\n    queryKey: [\"/api/articles\", articleId, \"alternatives\"],\n    enabled: open,\n  });\n\n  // Replace article mutation\n  const replaceMutation = useMutation({\n    mutationFn: async (article: NaverNewsItem) => {\n      return apiRequest(\"PUT\", `/api/articles/${articleId}/replace`, {\n        title: article.title,\n        description: article.description,\n        url: article.link,\n        publishedDate: article.pubDate,\n      });\n    },\n    onSuccess: () => {\n      toast({\n        title: \"기사 교체 완료\",\n        description: \"선택한 기사로 성공적으로 교체되었습니다.\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/articles\"] });\n      onOpenChange(false);\n    },\n    onError: (error) => {\n      toast({\n        title: \"기사 교체 실패\",\n        description: error instanceof Error ? error.message : \"알 수 없는 오류가 발생했습니다.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleReplace = () => {\n    if (selectedArticle) {\n      replaceMutation.mutate(selectedArticle);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-4xl max-h-[80vh] overflow-hidden flex flex-col\">\n        <DialogHeader>\n          <DialogTitle>다른 기사 선택</DialogTitle>\n          <DialogDescription>\n            {data?.keyword && `\"${data.keyword}\" 키워드로 검색된 다른 기사들입니다.`}\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"flex-1 overflow-y-auto space-y-4 pr-2\">\n          {isLoading && (\n            <div className=\"flex items-center justify-center py-8\">\n              <Loader2 className=\"h-6 w-6 animate-spin text-muted-foreground\" />\n            </div>\n          )}\n\n          {error && (\n            <div className=\"text-center py-8 text-destructive\">\n              {error instanceof Error ? error.message : \"기사를 불러오는데 실패했습니다.\"}\n            </div>\n          )}\n\n          {data?.articles && data.articles.length === 0 && (\n            <div className=\"text-center py-8 text-muted-foreground\">\n              대체 가능한 기사가 없습니다.\n            </div>\n          )}\n\n          {data?.articles.map((article, index) => (\n            <div\n              key={index}\n              className={`p-4 rounded-md border transition-colors cursor-pointer hover-elevate ${\n                selectedArticle === article\n                  ? \"border-primary bg-accent\"\n                  : \"border-border\"\n              }`}\n              onClick={() => setSelectedArticle(article)}\n              data-testid={`card-alternative-${index}`}\n            >\n              <div className=\"space-y-2\">\n                {/* Title with link */}\n                <div className=\"flex items-start gap-2\">\n                  <h4 className=\"font-medium flex-1 leading-tight\">\n                    {article.title}\n                  </h4>\n                  <a\n                    href={article.link}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"text-muted-foreground hover:text-foreground transition-colors\"\n                    onClick={(e) => e.stopPropagation()}\n                  >\n                    <ExternalLink className=\"h-4 w-4\" />\n                  </a>\n                </div>\n\n                {/* Description */}\n                <p className=\"text-sm text-muted-foreground leading-relaxed\">\n                  {article.description}\n                </p>\n\n                {/* Published Date */}\n                <p className=\"text-xs text-muted-foreground\">\n                  {format(new Date(article.pubDate), \"yyyy년 M월 d일 HH:mm\", { locale: ko })}\n                </p>\n              </div>\n            </div>\n          ))}\n        </div>\n\n        <div className=\"flex justify-end gap-2 pt-4 border-t\">\n          <Button\n            variant=\"outline\"\n            onClick={() => onOpenChange(false)}\n            data-testid=\"button-cancel\"\n          >\n            취소\n          </Button>\n          <Button\n            onClick={handleReplace}\n            disabled={!selectedArticle || replaceMutation.isPending}\n            data-testid=\"button-confirm-replace\"\n          >\n            {replaceMutation.isPending ? (\n              <>\n                <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                교체 중...\n              </>\n            ) : (\n              <>\n                <RefreshCcw className=\"h-4 w-4 mr-2\" />\n                교체하기\n              </>\n            )}\n          </Button>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":5826},"client/src/components/ui/date-range-picker.tsx":{"content":"import { format } from \"date-fns\";\nimport { Calendar as CalendarIcon } from \"lucide-react\";\nimport { DateRange } from \"react-day-picker\";\n\nimport { cn } from \"@/lib/utils\";\nimport { Button } from \"@/components/ui/button\";\nimport { Calendar } from \"@/components/ui/calendar\";\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/components/ui/popover\";\n\ninterface DateRangePickerProps {\n  date?: DateRange;\n  onDateChange?: (date: DateRange | undefined) => void;\n  className?: string;\n  availableDates?: string[];\n}\n\nexport function DateRangePicker({\n  date,\n  onDateChange,\n  className,\n  availableDates = [],\n}: DateRangePickerProps) {\n  const disabledMatcher = availableDates.length > 0 \n    ? (day: Date) => {\n        const dateStr = format(day, \"yyyy-MM-dd\");\n        return !availableDates.includes(dateStr);\n      }\n    : undefined;\n\n  return (\n    <div className={cn(\"grid gap-2\", className)}>\n      <Popover>\n        <PopoverTrigger asChild>\n          <Button\n            id=\"date\"\n            variant={\"outline\"}\n            className={cn(\n              \"w-full justify-start text-left font-normal\",\n              !date && \"text-muted-foreground\"\n            )}\n            data-testid=\"button-date-range-picker\"\n          >\n            <CalendarIcon className=\"mr-2 h-4 w-4\" />\n            {date?.from ? (\n              date.to ? (\n                <>\n                  {format(date.from, \"yyyy.MM.dd\")} - {format(date.to, \"yyyy.MM.dd\")}\n                </>\n              ) : (\n                format(date.from, \"yyyy.MM.dd\")\n              )\n            ) : (\n              <span>날짜를 선택하세요</span>\n            )}\n          </Button>\n        </PopoverTrigger>\n        <PopoverContent className=\"w-auto p-0 bg-card\" align=\"start\">\n          <Calendar\n            initialFocus\n            mode=\"range\"\n            defaultMonth={date?.from}\n            selected={date}\n            onSelect={onDateChange}\n            numberOfMonths={2}\n            className=\"text-foreground\"\n            disabled={disabledMatcher}\n          />\n        </PopoverContent>\n      </Popover>\n    </div>\n  );\n}\n","size_bytes":2122},"client/src/hooks/use-crawl-progress.ts":{"content":"import { useEffect, useState, useRef, useCallback } from \"react\";\n\nexport interface CrawlProgressMessage {\n  type: string;\n  categoryId?: string;\n  categoryName?: string;\n  keyword?: string;\n  keywordIndex?: number;\n  totalKeywords?: number;\n  keywordCount?: number;\n  articleCount?: number;\n  articlesCount?: number;\n  failedKeywords?: number;\n  totalSuccess?: boolean;\n  articleTitle?: string;\n  success?: boolean;\n  reason?: string;\n  error?: string;\n  totalCategories?: number;\n  totalArticles?: number;\n  duration?: number;\n  timestamp?: string;\n  categories?: Array<{ id: string; name: string }>;\n}\n\nexport interface CategoryProgress {\n  id: string;\n  name: string;\n  status: \"pending\" | \"processing\" | \"completed\" | \"error\" | \"skipped\";\n  message?: string;\n  articleTitle?: string;\n  keywordsCompleted?: number;\n  totalKeywords?: number;\n}\n\nexport function useCrawlProgress() {\n  const [isConnected, setIsConnected] = useState(false);\n  const [messages, setMessages] = useState<CrawlProgressMessage[]>([]);\n  const [categoryProgress, setCategoryProgress] = useState<Map<string, CategoryProgress>>(new Map());\n  const [isComplete, setIsComplete] = useState(false);\n  const wsRef = useRef<WebSocket | null>(null);\n\n  const connect = useCallback(() => {\n    // Clear previous state\n    setMessages([]);\n    setCategoryProgress(new Map());\n    setIsComplete(false);\n\n    // Create WebSocket connection\n    const protocol = window.location.protocol === \"https:\" ? \"wss:\" : \"ws:\";\n    const ws = new WebSocket(`${protocol}//${window.location.host}/ws/crawl`);\n\n    ws.onopen = () => {\n      console.log(\"WebSocket connected\");\n      setIsConnected(true);\n    };\n\n    ws.onmessage = (event) => {\n      try {\n        const message: CrawlProgressMessage = JSON.parse(event.data);\n        console.log(\"Crawl progress:\", message);\n\n        // Add message to list\n        setMessages((prev) => [...prev, message]);\n\n        // Initialize categories when crawl starts\n        if (message.type === \"crawl_started\" && message.categories) {\n          const initialMap = new Map<string, CategoryProgress>();\n          message.categories.forEach(cat => {\n            initialMap.set(cat.id, {\n              id: cat.id,\n              name: cat.name,\n              status: \"pending\",\n              message: \"대기 중...\",\n            });\n          });\n          setCategoryProgress(initialMap);\n        }\n        // Update category progress\n        else if (message.type === \"category_started\") {\n          setCategoryProgress((prev) => {\n            const newMap = new Map(prev);\n            newMap.set(message.categoryId!, {\n              id: message.categoryId!,\n              name: message.categoryName!,\n              status: \"processing\",\n              message: `키워드 ${message.keywordCount}개 검색 중...`,\n              keywordsCompleted: 0,\n              totalKeywords: message.keywordCount,\n            });\n            return newMap;\n          });\n        } \n        // Keyword-level progress tracking\n        else if (message.type === \"keyword_started\") {\n          setCategoryProgress((prev) => {\n            const newMap = new Map(prev);\n            const existing = newMap.get(message.categoryId!);\n            if (existing) {\n              newMap.set(message.categoryId!, {\n                ...existing,\n                message: `[${message.keywordIndex}/${message.totalKeywords}] ${message.keyword} 검색 중...`,\n              });\n            }\n            return newMap;\n          });\n        } else if (message.type === \"keyword_articles_found\") {\n          setCategoryProgress((prev) => {\n            const newMap = new Map(prev);\n            const existing = newMap.get(message.categoryId!);\n            if (existing) {\n              newMap.set(message.categoryId!, {\n                ...existing,\n                message: `${message.keyword}: 기사 ${message.articleCount}개 발견`,\n              });\n            }\n            return newMap;\n          });\n        } else if (message.type === \"keyword_article_selected\") {\n          setCategoryProgress((prev) => {\n            const newMap = new Map(prev);\n            const existing = newMap.get(message.categoryId!);\n            if (existing) {\n              newMap.set(message.categoryId!, {\n                ...existing,\n                message: `${message.keyword}: 대표 기사 선정 완료`,\n              });\n            }\n            return newMap;\n          });\n        } else if (message.type === \"keyword_summarizing\") {\n          setCategoryProgress((prev) => {\n            const newMap = new Map(prev);\n            const existing = newMap.get(message.categoryId!);\n            if (existing) {\n              newMap.set(message.categoryId!, {\n                ...existing,\n                message: `${message.keyword}: GPT-5 요약 중...`,\n              });\n            }\n            return newMap;\n          });\n        } else if (message.type === \"keyword_completed\") {\n          setCategoryProgress((prev) => {\n            const newMap = new Map(prev);\n            const existing = newMap.get(message.categoryId!);\n            if (existing) {\n              // Only count successful keywords\n              const completed = message.success \n                ? (existing.keywordsCompleted || 0) + 1 \n                : (existing.keywordsCompleted || 0);\n              \n              let displayMessage: string;\n              if (message.success) {\n                displayMessage = `${completed}/${existing.totalKeywords} 키워드 완료`;\n              } else {\n                // Show failure reason\n                displayMessage = `${message.keyword}: ${message.reason || \"뉴스 없음\"}`;\n              }\n\n              newMap.set(message.categoryId!, {\n                ...existing,\n                message: displayMessage,\n                keywordsCompleted: completed,\n              });\n            }\n            return newMap;\n          });\n        } else if (message.type === \"keyword_error\") {\n          setCategoryProgress((prev) => {\n            const newMap = new Map(prev);\n            const existing = newMap.get(message.categoryId!);\n            if (existing) {\n              // Don't count errors as completed\n              newMap.set(message.categoryId!, {\n                ...existing,\n                message: `${message.keyword}: ${message.error || \"오류\"}`,\n              });\n            }\n            return newMap;\n          });\n        } else if (message.type === \"category_articles_found\") {\n          setCategoryProgress((prev) => {\n            const newMap = new Map(prev);\n            const existing = newMap.get(message.categoryId!);\n            if (existing) {\n              newMap.set(message.categoryId!, {\n                ...existing,\n                message: `기사 ${message.articleCount}개 발견`,\n              });\n            }\n            return newMap;\n          });\n        } else if (message.type === \"category_article_selected\") {\n          setCategoryProgress((prev) => {\n            const newMap = new Map(prev);\n            const existing = newMap.get(message.categoryId!);\n            if (existing) {\n              newMap.set(message.categoryId!, {\n                ...existing,\n                message: \"대표 기사 선정 완료\",\n                articleTitle: message.articleTitle,\n              });\n            }\n            return newMap;\n          });\n        } else if (message.type === \"category_summarizing\") {\n          setCategoryProgress((prev) => {\n            const newMap = new Map(prev);\n            const existing = newMap.get(message.categoryId!);\n            if (existing) {\n              newMap.set(message.categoryId!, {\n                ...existing,\n                message: \"GPT-5 요약 중...\",\n              });\n            }\n            return newMap;\n          });\n        } else if (message.type === \"category_completed\") {\n          setCategoryProgress((prev) => {\n            const newMap = new Map(prev);\n            const existing = newMap.get(message.categoryId!);\n            if (existing) {\n              const articlesCount = message.articlesCount || 0;\n              const totalKeywords = message.totalKeywords || existing.totalKeywords || 0;\n              const failedKeywords = message.failedKeywords || 0;\n              const totalSuccess = message.totalSuccess || false;\n              \n              // Determine status: completed if all success, error if none, processing if partial\n              let status: \"completed\" | \"error\" | \"processing\";\n              if (!message.success) {\n                status = \"error\";\n              } else if (totalSuccess) {\n                status = \"completed\";\n              } else {\n                status = \"completed\"; // Partial success still shows as completed\n              }\n\n              newMap.set(message.categoryId!, {\n                ...existing,\n                status,\n                message: message.reason || (message.success \n                  ? `완료 (${articlesCount}/${totalKeywords} 기사)` \n                  : \"뉴스 없음\"),\n                keywordsCompleted: articlesCount, // Use actual article count instead of total keywords\n              });\n            }\n            return newMap;\n          });\n        } else if (message.type === \"category_skipped\") {\n          setCategoryProgress((prev) => {\n            const newMap = new Map(prev);\n            newMap.set(message.categoryId!, {\n              id: message.categoryId!,\n              name: message.categoryName!,\n              status: \"skipped\",\n              message: message.reason || \"건너뜀\",\n            });\n            return newMap;\n          });\n        } else if (message.type === \"category_error\") {\n          setCategoryProgress((prev) => {\n            const newMap = new Map(prev);\n            const existing = newMap.get(message.categoryId!);\n            if (existing) {\n              newMap.set(message.categoryId!, {\n                ...existing,\n                status: \"error\",\n                message: message.error || \"오류 발생\",\n              });\n            }\n            return newMap;\n          });\n        } else if (message.type === \"crawl_completed\") {\n          setIsComplete(true);\n        }\n      } catch (error) {\n        console.error(\"Failed to parse WebSocket message:\", error);\n      }\n    };\n\n    ws.onerror = (error) => {\n      console.error(\"WebSocket error:\", error);\n    };\n\n    ws.onclose = () => {\n      console.log(\"WebSocket disconnected\");\n      setIsConnected(false);\n    };\n\n    wsRef.current = ws;\n  }, []);\n\n  const disconnect = useCallback(() => {\n    if (wsRef.current) {\n      wsRef.current.close();\n      wsRef.current = null;\n    }\n  }, []);\n\n  useEffect(() => {\n    return () => {\n      disconnect();\n    };\n  }, [disconnect]);\n\n  return {\n    isConnected,\n    messages,\n    categoryProgress,\n    isComplete,\n    connect,\n    disconnect,\n  };\n}\n","size_bytes":10909},"client/src/components/search-bar.tsx":{"content":"import { useState } from \"react\";\nimport { Search, X, Database, Radio } from \"lucide-react\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { DateRangePicker } from \"@/components/ui/date-range-picker\";\nimport { DateRange } from \"react-day-picker\";\nimport type { CategoryWithKeywords } from \"@shared/schema\";\nimport { ToggleGroup, ToggleGroupItem } from \"@/components/ui/toggle-group\";\nimport { useQuery } from \"@tanstack/react-query\";\n\ninterface SearchBarProps {\n  categories: CategoryWithKeywords[];\n  onSearch: (filters: SearchFilters) => void;\n}\n\nexport type SearchType = \"archive\" | \"live\";\n\nexport interface SearchFilters {\n  query: string;\n  categoryId?: string;\n  dateRange?: DateRange;\n  searchType: SearchType;\n  daysBack?: number;\n}\n\nexport function SearchBar({ categories, onSearch }: SearchBarProps) {\n  const [query, setQuery] = useState(\"\");\n  const [categoryId, setCategoryId] = useState<string | undefined>(undefined);\n  const [dateRange, setDateRange] = useState<DateRange | undefined>(undefined);\n  const [searchType, setSearchType] = useState<SearchType>(\"live\");\n  const [daysBack, setDaysBack] = useState<number>(7);\n\n  const { data: availableDates = [] } = useQuery<string[]>({\n    queryKey: [\"/api/articles/dates\"],\n  });\n\n  const handleSearch = () => {\n    onSearch({\n      query: query.trim(),\n      categoryId,\n      dateRange: searchType === \"archive\" ? dateRange : undefined,\n      searchType,\n      daysBack: searchType === \"live\" ? daysBack : undefined,\n    });\n  };\n\n  const handleClear = () => {\n    setQuery(\"\");\n    setCategoryId(undefined);\n    setDateRange(undefined);\n    onSearch({\n      query: \"\",\n      categoryId: undefined,\n      dateRange: undefined,\n      searchType,\n      daysBack: searchType === \"live\" ? daysBack : undefined,\n    });\n  };\n\n  const hasActiveFilters = query.trim() || categoryId || dateRange;\n\n  return (\n    <div className=\"space-y-4 p-6 bg-card border rounded-md\">\n      <div className=\"flex items-center gap-4 pb-4 border-b\">\n        <span className=\"text-sm text-muted-foreground\">검색 타입:</span>\n        <ToggleGroup\n          type=\"single\"\n          value={searchType}\n          onValueChange={(value) => {\n            if (value) setSearchType(value as SearchType);\n          }}\n          data-testid=\"toggle-search-type\"\n        >\n          <ToggleGroupItem \n            value=\"live\" \n            data-testid=\"toggle-live-search\"\n            className=\"border data-[state=on]:bg-primary data-[state=on]:text-primary-foreground data-[state=off]:bg-background data-[state=off]:border-input\"\n          >\n            <Radio className=\"h-4 w-4 mr-2\" />\n            실시간 검색\n          </ToggleGroupItem>\n          <ToggleGroupItem \n            value=\"archive\" \n            data-testid=\"toggle-archive-search\"\n            className=\"border data-[state=on]:bg-primary data-[state=on]:text-primary-foreground data-[state=off]:bg-background data-[state=off]:border-input\"\n          >\n            <Database className=\"h-4 w-4 mr-2\" />\n            아카이브 검색\n          </ToggleGroupItem>\n        </ToggleGroup>\n        {searchType === \"live\" && (\n          <Select\n            value={daysBack.toString()}\n            onValueChange={(value) => setDaysBack(parseInt(value))}\n          >\n            <SelectTrigger className=\"w-[140px]\" data-testid=\"select-days-back\">\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"1\">오늘</SelectItem>\n              <SelectItem value=\"3\">최근 3일</SelectItem>\n              <SelectItem value=\"7\">최근 1주일</SelectItem>\n              <SelectItem value=\"30\">최근 1달</SelectItem>\n            </SelectContent>\n          </Select>\n        )}\n      </div>\n\n      <div className=\"flex gap-3\">\n        <div className=\"flex-1 relative\">\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n          <Input\n            placeholder={\n              searchType === \"archive\"\n                ? \"고객사명, 키워드 검색 (예: 삼성전자, 계약, 투자)\"\n                : \"실시간 뉴스 검색 (예: 삼성전자, KeP)\"\n            }\n            value={query}\n            onChange={(e) => setQuery(e.target.value)}\n            onKeyDown={(e) => {\n              if (e.key === \"Enter\") {\n                handleSearch();\n              }\n            }}\n            className=\"pl-10\"\n            data-testid=\"input-search-query\"\n          />\n        </div>\n        <Button\n          onClick={handleSearch}\n          data-testid=\"button-search\"\n        >\n          <Search className=\"h-4 w-4 mr-2\" />\n          검색\n        </Button>\n        {hasActiveFilters && (\n          <Button\n            variant=\"outline\"\n            onClick={handleClear}\n            data-testid=\"button-clear-search\"\n          >\n            <X className=\"h-4 w-4 mr-2\" />\n            초기화\n          </Button>\n        )}\n      </div>\n\n      {searchType === \"archive\" && (\n        <div className=\"space-y-3\">\n          <div className=\"flex items-center gap-3\">\n            <span className=\"text-sm font-medium text-foreground min-w-[60px]\">\n              1. 날짜\n            </span>\n            <div className=\"flex-1\">\n              <DateRangePicker\n                date={dateRange}\n                onDateChange={setDateRange}\n                availableDates={availableDates}\n                data-testid=\"date-range-picker-search\"\n              />\n            </div>\n          </div>\n\n          <div className=\"flex items-center gap-3\">\n            <span className=\"text-sm font-medium text-foreground min-w-[60px]\">\n              2. 카테고리\n            </span>\n            <div className=\"flex-1\">\n              <Select\n                value={categoryId}\n                onValueChange={(value) => setCategoryId(value === \"all\" ? undefined : value)}\n              >\n                <SelectTrigger data-testid=\"select-category-filter\">\n                  <SelectValue placeholder=\"전체 카테고리\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">전체 카테고리</SelectItem>\n                  {categories.map((category) => (\n                    <SelectItem key={category.id} value={category.id}>\n                      {category.name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":6696}},"version":2}